%%
%% This is file `hicite.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% src/intro.dtx  (with options: `package')
%% src/quickstart.dtx  (with options: `package')
%% src/options.dtx  (with options: `package')
%% src/refs.dtx  (with options: `package')
%% src/cparse.dtx  (with options: `package')
%% src/names.dtx  (with options: `package')
%% src/dates.dtx  (with options: `package')
%% src/xref.dtx  (with options: `package')
%% src/urls.dtx  (with options: `package')
%% src/struct.dtx  (with options: `package')
%% src/anonymous.dtx  (with options: `package')
%% src/iface.dtx  (with options: `package')
%% src/parse.dtx  (with options: `package')
%% src/signals.dtx  (with options: `package')
%% src/pages.dtx  (with options: `package')
%% src/parens.dtx  (with options: `package')
%% src/toa.dtx  (with options: `package')
%% src/endnotes.dtx  (with options: `package')
%% src/short.dtx  (with options: `package')
%% src/draw.dtx  (with options: `package')
%% src/abbrevs.dtx  (with options: `package')
%% src/fonts.dtx  (with options: `package')
%% src/state.dtx  (with options: `package')
%% src/supra.dtx  (with options: `package')
%% src/format.dtx  (with options: `package')
%% src/caseref.dtx  (with options: `package')
%% src/constrefs.dtx  (with options: `package')
%% src/statrefs.dtx  (with options: `package')
%% src/govrefs.dtx  (with options: `package')
%% src/bookrefs.dtx  (with options: `package')
%% src/artrefs.dtx  (with options: `package')
%% src/foreignrefs.dtx  (with options: `package')
%% src/specrefs.dtx  (with options: `package')
%% src/otherrefs.dtx  (with options: `package')
%% src/nondocrefs.dtx  (with options: `package')
%% src/genparams.dtx  (with options: `package')
%% src/commparams.dtx  (with options: `package')
%% src/caseparams.dtx  (with options: `package')
%% src/legparams.dtx  (with options: `package')
%% src/bookparams.dtx  (with options: `package')
%% src/refparams.dtx  (with options: `package')
%% src/conclusion.dtx  (with options: `package')
%% 
%% This is a generated file.
%% 
%% Copyright 2013-2022 Charles Duan. This program is free software: you can
%% redistribute it and/or modify it under the terms of the GNU General Public
%% License as published by the Free Software Foundation, either version 3 of the
%% License, or (at your option) any later version.
%% 
%% This program is distributed in the hope that it will be useful, but WITHOUT
%% ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
%% FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.
%% 
%% You should have received a copy of the GNU General Public License along with
%% this program.  If not, see <http://www.gnu.org/licenses/>.
%% 
%%
%% \iffalse filename: intro.dtx \fi
%%
\ProvidesPackage{hicite}[2022/07/20 Legal citation formatting and management]
\RequirePackage{etoolbox,strings,sortlist,keyval,abbrev}
\def\hi@pkgname{hicite}
%%
%% \iffalse filename: intro.dtx \fi
%%
%%
%% \iffalse filename: options.dtx \fi
%%
\DeclareOption{review}{\hi@hooks@review}
\DeclareOption{journal}{\hi@hooks@review}
\DeclareOption{journalfonts}{\UseFontPack{review}}
\DeclareOption{memofonts}{\UseFontPack{memo}}
\DeclareOption{memo}{\hi@hooks@memo}
\DeclareOption{brief}{\hi@hooks@memo}
\DeclareOption{endnote}{\hi@useendnotes}
\DeclareOption{endnotes}{\hi@useendnotes}
\DeclareOption{fullurl}{\hi@urlstyle@full}
\DeclareOption{toaurl}{\hi@urlstyle@toa}
\DeclareOption{linkurl}{\hi@urlstyle@link}
\DeclareOption{italcase}{\UseFontPack{italcase}}
\DeclareOption{toastar}{\hi@toa@starcount=4\relax}
\DeclareOption{somenotename}{\hi@noname@sometimes}
\DeclareOption{nonotename}{\hi@noname@always}
\DeclareOption{useopturl}{\hi@param@alias{opturl}{url}}
\def\hi@hooks@review{}
\def\hi@hooks@memo{}
%%
%% \iffalse filename: refs.dtx \fi
%%
\def\hi@citetype#1#2{%
    \@ifundefined{tc@#1}{%
        \global\expandafter\let\csname tc@#1\endcsname#2%
    }{}%
}
\let\hi@newcitetype\def
\hi@newcitetype\hi@type@other{other:Other Source/s}
\hi@newcitetype\hi@type@const{const:Constitutional Provision/s}
\hi@newcitetype\hi@type@found{const:Foundational Document/s}
\hi@newcitetype\hi@type@statute{statute:Statute/s}
\hi@newcitetype\hi@type@regulation{statute:Regulation/s}
\hi@newcitetype\hi@type@rule{statute:Rule/s}
\hi@newcitetype\hi@type@case{case:Case/s}
\hi@newcitetype\hi@type@admin{case:Administrative Decision/s}
\hi@newcitetype\hi@type@treaty{statute:Treat/y/ies}
\def\hi@type@doforall{%
    \do{case}%
    \do{const}%
    \do{statute}%
    \do{other}%
}
\let\hi@citeforms\@empty
\def\hi@newcite#1#2#3{%
    \g@addto@macro\hi@citeforms{\do{#1}{#2}}%
    \gdef#1##1##2{%
        \@ifundefined{fc@##1}{}{%
            \PackageError\hi@pkgname{%
                Citation for ##1 already defined
            }{%
                The citation for ##1 has already been defined.\MessageBreak
                Please select another name.
            }%
        }%
        \begingroup
            \def\@this@case{##1}%
            \hi@param@set{#1}{##2}%
            #3%
            % \hi@bib@output
        \endgroup
    }%
}
\def\hi@alias@cite#1#2{\def#1{#2}}
\def\hi@newcite@form#1#2{%
    \@ifundefined{#1@#2}{%
        \expandafter\protected@xdef\csname#1@#2\endcsname
    }{%
        \find@eq{sc}{#1}{}{%
            \PackageWarning\hi@pkgname{Refusing to redefine #1@#2}%
        }%
        \hi@newcite@form@gobble
    }%
}
\make@find@eq{sc}
\def\hi@newcite@form@gobble#1#{\@gobble}
\def\hi@params{}
\newtoks\hi@param@parens
\def\hi@param@addparen#1#2{%
    \push@toks\hi@param@parens{%
        \hi@parens@add#1{#2}%
    }%
}
\DeclareRobustCommand\hi@param@undef[1]{%
    \PackageError\hi@pkgname{%
        Citation parameter \noexpand#1 missing in \@this@case
    }{Include the missing citation parameter.}%
    \textbf{???}%
}
\def\hi@undefine#1{\def#1{\hi@param@undef{\string#1}}}
\def\hi@param@clear{%
    \def\do##1##2{\expandafter\hi@undefine\csname hi@kv@##1\endcsname}%
    \hi@params
    \hi@param@parens{}%
}
\AtEndOfPackage{\hi@param@clear}
\def\hi@defparam#1#2{%
    \g@addto@macro\hi@params{\do{#1}{#2}}%
    \define@key{hi}{#1}%
}
\def\hi@newparam#1#2{%
    \@expand{\hi@defparam{#1}{#2}}{%
        \expandafter\def\csname hi@kv@#1\endcsname{##1}%
    }i%
}
\def\hi@defparam@noval#1#2{%
    \hi@defparam{#1}{#2}[#1]%
}
\def\hi@newparam@noval#1#2{%
    \@expand{\hi@defparam@noval{#1}{#2}}{%
        \expandafter\def\csname hi@kv@#1\endcsname{##1}%
    }i%
}
\def\hi@param@alias#1#2{%
    \g@addto@macro\hi@params{\do{#1}{Alias for #2}}%
    \edef\reserved@a{%
        \noexpand\def\expandafter\noexpand\csname KV@hi@#1\endcsname{%
            \expandafter\noexpand\csname KV@hi@#2\endcsname
        }%
    }\reserved@a
}
\def\hi@param@set#1#2{%
    \let\hi@param@set@hooks\@empty
    \expandafter\hi@param@set@kind\string#1\@stop
    \hi@param@read{#2}%
    \hi@param@set@hooks
}
\def\hi@param@read#1{%
    \find@in{;}{#1}{%
        \hi@param@read@{#1}%
    }{\hi@param@read@{#1}{#1}{}}%
}
\def\hi@param@read@#1#2#3{%
    \find@in{=}{#2}{%
        \@firstofthree{\setkeys{hi}{#1}}%
    }{%
        \chop@space@then@run{#2}\hi@cparse
        \ifstrempty{#3}{}{\setkeys{hi}{#3}}%
    }%
}
\make@find@in{=}
\make@find@in{;}
\def\hi@param@set@kind#1#2#3#4#5\@stop{%
    \def\hi@kv@kind{#5}%
}
\def\hi@param@addhook#1{%
    \addto@macro\hi@param@set@hooks{#1}%
}
\def\hi@ifset#1{%
    \expandafter\hi@ifset@#1.\@stop
}
\def\hi@ifset@#1#2\@stop{%
    \ifx\hi@param@undef#1\expandafter\@secondoftwo
    \else                \expandafter\@firstoftwo   \fi
}
\def\hi@ifeitherset#1#2{%
    \hi@ifset#1{\@firstoftwo}{\hi@ifset#2}%
}
\def\defcitegroup#1#2#3{%
    \forcsvlist{\hi@citegroup@{#1}{#2}}{#3}%
}
\def\hi@citegroup@#1#2#3{#1{#3}{#2#3}}
%%
%% \iffalse filename: cparse.dtx \fi
%%
\def\hi@cp@paren#1#2#3{%
    \find@end{)}{#1}{\hi@cp@paren@{#2}{#3}}{#3{#1}}%
}
\def\hi@cp@paren@#1#2#3{%
    \find@last{ (}{#3}{\hi@cp@paren@@{#1}{#2}}{#2{#3)}}%
}
\def\hi@cp@paren@@#1#2#3#4{#1{#4}#2{#3}}
\def\hi@cp@cite#1#2#3#4#5{%
    \hi@cp@paren{#1}{#5}{\hi@cp@cite@text{#2}{#3}{#4}}%
}
\def\hi@cp@cite@text#1#2#3#4{\hi@cp@cite@text@{#4}{#1}{#2}{#3}}
\def\hi@cp@cite@text@#1{%
    \find@in{/}{#1}{\hi@cp@cite@slash}{%
        \find@in{ }{#1}{\hi@cp@cite@space}{%
            \PackageError\hi@pkgname{%
                Cite parameter `#1' needs two slashes or spaces%
            }{Should be `cite=.../.../...'}%
        }%
    }%
}
\make@find@in{/}
\def\hi@cp@cite@slash#1#2{%
    \find@last{/}{#2}{\hi@cp@cite@set{#1}}{%
        \PackageError\hi@pkgname{%
            Cite parameter `#1' needs two slashes%
        }{Should be `cite=.../.../...'}%
    }%
}%
\def\hi@cp@cite@space#1#2{%
    \find@last{ }{#2}{\hi@cp@cite@space@{#1}}{%
        \PackageError\hi@pkgname{%
            Cite parameter `#1' needs two spaces%
        }{Should be `cite=.../.../...'}%
    }%
}
\def\hi@cp@cite@space@#1#2#3{%
    \find@last{ }{#2}{%
        \hi@cp@cite@space@@{#1}{#3}%
    }{\hi@cp@cite@set{#1}{#2}{#3}}%
}
\def\hi@cp@cite@space@@#1#2#3#4{%
    \@ifundefined{hi@div@#4}{%
        \hi@cp@cite@set{#1}{#3 #4}{#2}%
    }{%
        \hi@cp@cite@set{#1}{#3}{#4 #2}%
    }%
}
\def\hi@cp@cite@set#1#2#3#4#5#6{%
    \ifstrempty{#1}{}{#4{#1}}%
    \ifstrempty{#2}{}{#5{#2}}%
    \ifstrempty{#3}{}{#6{#3}}%
}
\def\hi@cparse@jrnart@text#1{%
    \find@in{, }{#1}{\hi@cparse@jrnart@author}{%
        \PackageError\hi@pkgname{%
            No commas found in citation `#1'%
        }{You need to enter a citation with author and citation.}%
    }%
}
\make@find@in{, }
\def\hi@cparse@jrnart@author#1#2{%
    \hi@cparse@jrnart@findauthor{#1}%
    \hi@cparse@jrnart@title{#2}%
}
\make@find@in{ & }
\make@find@in{ and }
\def\hi@cparse@jrnart@findauthor#1{%
    \find@try\find@in{%
        { & }{%
            \@tworun\hi@cparse@jrnart@findauthor\hi@cparse@jrnart@findauthor
        }%
        { and }{%
            \@tworun\hi@cparse@jrnart@findauthor\hi@cparse@jrnart@findauthor
        }%
    }{#1}{\KV@hi@author{#1}}%
}
\def\hi@cparse@jrnart@title#1{%
    \find@last{, }{#1}{\hi@cparse@jrnart@cite}{%
        \PackageError\hi@pkgname{%
            No commas found in citation `#1'%
        }{You need to enter the citation with author and citation.}%
    }%
}
\def\hi@cparse@jrnart@cite#1#2{%
    \KV@hi@name{#1}\hi@cparse@jrnart@citemacro{#2}%
}
\def\hi@cparse@url#1#2#3{%
    \KV@hi@url{#1#3}%
    \hi@cparse{#2}%
}
\make@find@in{, http://}
\make@find@in{, https://}
\def\hi@cparse#1{%
    \find@try\find@in{%
        {, http://}{\hi@cparse@url{http://}}%
        {, https://}{\hi@cparse@url{https://}}%
    }{#1}{%
        \@ifundefined{hi@cparse@\hi@kv@kind}{%
            \PackageError\hi@pkgname{No automatic parser for \hi@kv@kind}{%
                No automatic parser for that citation type has been\MessageBreak
                created. You must enter the parameters manually.
            }%
        }{\@nameuse{hi@cparse@\hi@kv@kind}{#1}}%
    }%
}
\def\hi@cparse@case#1{%
    \hi@cp@paren{#1}{\hi@cparse@case@paren}{\hi@cparse@case@text}%
}
\let\hi@cparse@admincase\hi@cparse@case
\make@find@in{, }
\def\hi@cparse@case@text#1{%
    \find@last{, }{#1}{\@tworun\hi@cparse@case@name\hi@cparse@case@cite}{%
        \PackageError\hi@pkgname{%
            No comma found when parsing case parameters%
        }{The provided parameters do not look like a case citation for parsing}%
    }%
}
\make@find@start{No}
\def\hi@cparse@case@cite#1{%
    \find@start{No}{#1}{%
        \KV@hi@slipop{}\KV@hi@docket{#1}\@gobble
    }{\KV@hi@cite{#1}}%
}
\make@find@in{ }
\def\hi@cparse@case@paren#1{%
    \find@in{ }{#1}{%
        \hi@cparse@case@paren@
    }{\KV@hi@year{#1}}%
}
\def\hi@cparse@case@paren@#1#2{%
    \@ifundefined{hi@month@#1}{%
        \hi@cparse@case@paren@@{#1}{#2}%
    }{\KV@hi@year{#1 #2}}%
}
\def\hi@cparse@case@paren@@#1#2{%
    \find@in{ }{#2}{%
        \hi@cparse@case@paren@@@{#1}%
    }{\KV@hi@court{#1}\KV@hi@year{#2}}%
}
\def\hi@cparse@case@paren@@@#1#2#3{%
    \@ifundefined{hi@dtmac@#2}{%
        \hi@cparse@case@paren@@{#1 #2}{#3}%
    }{\KV@hi@court{#1}\KV@hi@year{#2 #3}}%
}
\make@find@in{ v. }
\def\hi@cparse@case@name#1{%
    \find@in{ v. }{#1}{\hi@cparse@case@parties}{\KV@hi@name{#1}}%
}
\def\hi@cparse@case@parties#1#2{%
    \KV@hi@p{#1}\KV@hi@d{#2}%
}
\def\hi@cparse@statcode#1{\KV@hi@cite{#1}}
\let\hi@cparse@regcode\hi@cparse@statcode
\def\hi@cparse@procart{\hi@cparse@jrnart}
\def\hi@cparse@jrnart#1{%
    \let\hi@cparse@jrnart@citemacro\KV@hi@cite
    \hi@cp@paren{#1}{\KV@hi@year}{\hi@cparse@jrnart@text}%
}
\def\hi@cparse@website#1{%
    \let\hi@cparse@jrnart@citemacro\KV@hi@rep
    \hi@cp@paren{#1}{\KV@hi@year}{\hi@cparse@jrnart@text}%
}
\def\hi@cparse@magart#1{%
    \let\hi@cparse@jrnart@citemacro\hi@cparse@magart@cite
    \hi@cp@paren{#1}{\KV@hi@year}{\hi@cparse@jrnart@text}%
}
\def\hi@cparse@magart@cite#1{%
    \KV@hi@cite{X #1}%
    \hi@undefine\hi@kv@vol
}
\def\hi@cparse@book#1{%
    \hi@cp@paren{#1}{\KV@hi@year}{\hi@cparse@book@text}%
}
\def\hi@cparse@book@text#1{%
    \find@in{, }{#1}{\hi@cparse@book@author}{%
        \PackageError\hi@pkgname{%
            No commas found in book citation `#1'%
        }{You need to enter a book citation with author and title.}%
    }%
}
\def\hi@cparse@book@author#1#2{%
    \hi@cparse@jrnart@findauthor{#1}%
    \KV@hi@name{#2}%
}
\def\hi@cparse@courtdoc#1{%
    \hi@cp@paren{#1}{\KV@hi@year}{\KV@hi@name}%
}
\def\hi@cparse@abbrev#1{%
    \hi@cp@paren{#1}{\KV@hi@inline}{\KV@hi@name}%
}
\def\hi@cparse@selfcite#1{}%
%%
%% \iffalse filename: names.dtx \fi
%%
\def\hi@names@pkgname{hinames}
\def\hi@namesplit#1#2{%
    \find@start{parts:}{#1}{\@unbrace{\hi@namesplit@parts{#2}}}{%
        \find@end{ et al.}{#1}{%
            \hi@namesplit@inst{\hi@etal}%
        }{\hi@namesplit@inst{}{#1}}%
        {#2}% Given as an argument no matter what
    }%
}
\make@find@start{parts:}
\def\hi@namesplit@parts#1#2#3#4#5{%
    \ifblank{#5}{%
        \hi@namesplit@desuffix{#3}{#1{#2}}{#4}{}%
    }{%
        \hi@namesplit@desuffix{#3}{#1{#2}}{#4}{\hi@etal}%
    }%
}
\def\hi@namesplit@inst#1#2#3{%
    \find@in{, }{#2}{\hi@namesplit@personal}{%
        \hi@namesplit@personal{#2}{}%
    }{#1}{#3}%
}
\make@find@end{ et al.}
\make@find@end{ and others}
\make@find@in{, }
\def\hi@namesplit@personal#1#2#3#4{%
    \hi@namesplit@groupend{#1}{\hi@namesplit@group}{%
        \hi@namesplit@nogroup{#1}%
    }%
    {#2}{#3}{#4}% Passed no matter what
}
\def\hi@namesplit@group#1#2#3#4#5{%
    \hi@namesplit@desuffix{#2}{#5{#1}}{#3}{#4}%
}
\def\hi@namesplit@nogroup#1#2#3#4{%
    \find@try\find@in{%
        { von }{\hi@namesplit@prefix{von }}%
        { Von }{\hi@namesplit@prefix{Von }}%
        { van }{\hi@namesplit@prefix{van }}%
        { Van }{\hi@namesplit@prefix{Van }}%
        { de }{\hi@namesplit@prefix{de }}%
        { De }{\hi@namesplit@prefix{De }}%
        { du }{\hi@namesplit@prefix{du }}%
        { Du }{\hi@namesplit@prefix{Du }}%
    }{#1}{\hi@namesplit@byspace{#1}}%
    {#2}{#3}{#4}% These are arguments no matter what
}
\make@find@in{ Von }
\make@find@in{ Van }
\make@find@in{ De }
\make@find@in{ Du }
\make@find@in{ von }
\make@find@in{ van }
\make@find@in{ de }
\make@find@in{ du }
\def\hi@namesplit@prefix#1#2#3#4#5#6{%
    \hi@namesplit@desuffix{#1#3}{#6{#2}}{#4}{#5}%
}
\def\hi@namesplit@byspace#1#2#3#4{%
    \hi@namesplit@desuffix{#1}\hi@namesplit@byspace@{#2}{#3}{#4}%
}
\def\hi@namesplit@byspace@#1#2#3#4#5{%
    \find@last{ }{#1}{\hi@namesplit@byspace@@{#2}{#3}{#4}{#5}}{%
        % With no spaces, the desuffixed name is only a given name.
        #5{#1}{}{#2}{#3}{#4}%
    }
}
\make@find@in{ }
\def\hi@namesplit@byspace@@#1#2#3#4#5#6{%
    #4{#5}{#6}{#1}{#2}{#3}%
}
\def\hi@namesplit@desuffix#1#2{%
    \hi@namesplit@groupend{#1}{#2}{%
        \find@try\find@end{%
            { Jr.}{\hi@namesplit@desuffix@{Jr.}}%
            { Sr.}{\hi@namesplit@desuffix@{Sr.}}%
            { I}{\hi@namesplit@desuffix@{I}}%
            { II}{\hi@namesplit@desuffix@{II}}%
            { III}{\hi@namesplit@desuffix@{III}}%
            { IV}{\hi@namesplit@desuffix@{IV}}%
            { V}{\hi@namesplit@desuffix@{V}}%
            { VI}{\hi@namesplit@desuffix@{VI}}%
            { VII}{\hi@namesplit@desuffix@{VII}}%
            { VIII}{\hi@namesplit@desuffix@{VIII}}%
            { IX}{\hi@namesplit@desuffix@{IX}}%
            { X}{\hi@namesplit@desuffix@{X}}%
        }{#1}{\hi@namesplit@desuffix@{}{#1}}{#2}%
    }%
}
\def\hi@namesplit@desuffix@#1#2#3{#3{#2}{#1}}
\make@find@end{ Jr.}
\make@find@end{ Sr.}
\make@find@end{ I}
\make@find@end{ II}
\make@find@end{ III}
\make@find@end{ IV}
\make@find@end{ V}
\make@find@end{ VI}
\make@find@end{ VII}
\make@find@end{ VIII}
\make@find@end{ IX}
\make@find@end{ X}
\def\hi@namesplit@groupend#1#2#3{%
    \find@group@end{#1}{%
        \hi@namesplit@groupend@{#2}{#3}%
    }{#3}%
}
\def\hi@namesplit@groupend@#1#2#3#4{%
    \find@end{ }{#3}{#1}{\@firstoftwo{#2}}{#4}%
}
\make@find@end{ }
\def\hi@nameproc@inst#1#2{%
    \hi@abbrev@name{#1}{#2}%
}
\def\hi@nameproc@person#1{%
    \hi@namesplit{#1}\hi@nameproc@person@split
}
\def\hi@nameproc@person@split#1#2#3#4#5#6{%
    \ifblank{#1}{%
        \PackageWarning\hi@names@pkgname{%
            Name `#1/#2/#3/#4' appears to have no given name.\MessageBreak
            This probably indicates a bug in the name parser.%
        }%
        \def\hi@nameproc@tmp{\ignorespaces}% Hopefully an unnecessary hack
    }{\def\hi@nameproc@tmp{#1}}%
    \notblank{#2}{\appto\hi@nameproc@tmp{ #2}}{}%
    \notblank{#3}{\appto\hi@nameproc@tmp{ #3}}{}%
    \expandafter\hi@nameproc@person@check\expandafter{\hi@nameproc@tmp}%
    %
    % The presence of a suffix also determines whether to put a comma before the
    % et-al.
    %
    \ifblank{#4}{%
        \ifblank{#5}{}{\appto\hi@nameproc@tmp{#5}}%
    }{%
        \appto\hi@nameproc@tmp{, }%
        \hi@nameproc@inst{#4}{\appto\hi@nameproc@tmp}%
        \ifblank{#5}{}{\appto\hi@nameproc@tmp{,#5}}%
    }%
    \ifblank{#2}{%
        \@expand{#6}{\hi@nameproc@tmp}{i}{#1#5}%
    }{%
        \@expand{#6}{\hi@nameproc@tmp}{i}{#2#5}%
    }%
}
\def\hi@nameproc@person@check#1{%
    \find@try\find@in{%
        {Inc.}{\hi@nameproc@person@warn{Inc.}}%
        {Co.}{\hi@nameproc@person@warn{Co.}}%
        {Office}{\hi@nameproc@person@warn{Office}}%
        {Department}{\hi@nameproc@person@warn{Department}}%
        { of }{\hi@nameproc@person@warn{ of }}%
        { to }{\hi@nameproc@person@warn{ to }}%
        { and }{\hi@nameproc@person@warn{ and }}%
    }{#1}{}%
}
\make@find@in{Inc.}
\make@find@in{Co.}
\make@find@in{Office}
\make@find@in{Department}
\make@find@in{ of }
\make@find@in{ to }
\make@find@in{ and }
\def\hi@nameproc@person@warn#1#2#3{%
    \PackageWarning\hi@names@pkgname{%
        The word `#1' was found in the name\MessageBreak
        #2#1#3\MessageBreak
        but was treated as a personal name.\MessageBreak
        You may want to make it an institutional name.\MessageBreak
        This occurred on
    }%
}
\def\hi@namelist@insts{\iffalse\hi@namelist@insts\fi}
\DeclareRobustCommand\hi@namelist@and{%
    \space\if@hi@inline and\else\&\fi\space
}
\def\hi@namelist@comma{\iffalse\hi@namelist@comma\fi,\space}
\DeclareRobustCommand\hi@etal{%
    \space\if@hi@inline and colleagues\else et al.\@hi@dottrue\fi
}
\make@find@start@cs{hi@namelist@insts}{\hi@namelist@insts}
\make@find@in@cs{hi@namelist@insts}{\hi@namelist@insts}
\make@find@in@cs{hi@namelist@commaandinsts}{, \hi@namelist@insts}
\make@find@in@cs{hi@namelist@and}{\hi@namelist@and}
\make@find@in@cs{hi@namelist@comma}{\hi@namelist@comma}
\def\hi@namelist@addtwo#1#2#3#4{%
    \hi@namelist@add{#3}{#1}%
    \ifx#2\relax\else \hi@namelist@add{#4}{#2}\fi
}
\def\hi@namelist@add#1#2{%
    \hi@ifset#2{%
        \expandafter\hi@namelist@add@\expandafter{#2}{#1}{#2}%
    }{\def#2{#1}}%
}
\def\hi@namelist@add@#1#2#3{%
    \find@in@cs{hi@namelist@commaandinsts}{#1}{%
        \hi@namelist@add@withinsts{#2}{#3}%
    }{%
        \find@start@cs{hi@namelist@insts}{#1}{%
            \def#3{#2, #1}\@gobble
        }{%
            \find@in@cs{hi@namelist@and}{#1}{%
                \hi@namelist@andtocomma{#2}{#3}{}%
            }{%
                \def#3{#1\hi@namelist@and#2}%
            }%
        }%
    }%
}
\def\hi@namelist@add@withinsts#1#2#3#4{%
    \hi@namelist@add@{#3}{#1}{#2}%
    \addto@macro#2{, \hi@namelist@insts #4}
}
\def\hi@namelist@andtocomma#1#2#3#4#5{%
    \ifx\hi@param@set@hooks\relax\else
        \hi@param@addhook{%
            \hi@ifset\hi@kv@noetal{}{%
                \PackageWarning\hi@pkgname{%
                    In reference \@this@case, the\MessageBreak
                    list of names for \noexpand#2 contains\MessageBreak
                    3 or more names. You should specify\MessageBreak
                    `noetal' before adding these authors.\MessageBreak
                    This occured on
                }%
            }%
        }%
    \fi
    \def#2{#3#4\hi@namelist@comma#5\hi@namelist@and#1}%
}
\def\hi@namelist@addinst#1#2{%
    \hi@ifset#2{%
        \expandafter\hi@namelist@addinst@\expandafter{#2}{#1}{#2}%
    }{\def#2{\hi@namelist@insts #1}}%
}
\def\hi@namelist@addinst@ln#1#2{%
    \hi@ifset#2{%
        \@expand{\find@start@cs{hi@namelist@insts}}{#2}{i}{%
            \@firstoftwo{\hi@namelist@addinst{#1}{#2}}%
        }{}%
    }{\hi@namelist@addinst{#1}{#2}}%
}
\def\hi@namelist@addinst@#1#2#3{%
    \find@in@cs{hi@namelist@insts}{#1}{%
        \hi@namelist@addinst@more{#2}{#3}%
    }{%
        \def#3{#1, \hi@namelist@insts #2}%
    }%
}
\def\hi@namelist@addinst@more#1#2#3#4{%
    \find@in@cs{hi@namelist@and}{#4}{%
        \hi@namelist@andtocomma{#1}{#2}{#3\hi@namelist@insts}%
    }{%
        \def#2{#3\hi@namelist@insts#4\hi@namelist@and#1}%
    }%
}
\def\hi@namelist@instpart#1#2{%
    \@expand{\find@in@cs{hi@namelist@insts}}{#1}i{%
        \@tworun\@gobble{#2}%
    }{}%
}
\def\hi@namelist@personpart#1#2{%
    \expandafter\hi@namelist@personpart@\expandafter{#1}{#2}%
}
\def\hi@namelist@personpart@#1#2{%
    \find@in@cs{hi@namelist@commaandinsts}{#1}{%
        \hi@namelist@personpart@chompinsts{#2}%
    }{%
        \find@start@cs{hi@namelist@insts}{#1}{}{%
            #2{#1}%
        }%
    }%
}
\def\hi@namelist@personpart@chompinsts#1#2#3{%
    #1{#2}%
}
%%
%% \iffalse filename: dates.dtx \fi
%%
\newcommand*\hi@date@parse[3][]{%
    \find@start{!}{#2}{#3}{%
        \def\hi@date@orig{#2}%
        \let\hi@date@qual\@empty
        \let\hi@date@pre\@empty
        \let\hi@date@day\@empty
        \let\hi@date@month\@empty
        \let\hi@date@year\@empty
        \let\hi@date@post\@empty
        \let\hi@date@last\relax
        \hi@date@readqual{#2}%
        \ifx\hi@date@qual\@empty \def\hi@date@qual{#1}\fi
        \hi@date@assemble{#3}%
    }%
}
\make@find@start{!}
\def\hi@date@set#1#2#3{%
    \@test\ifx#1\@empty\fi{%
        \def#1{#2}\def\hi@date@last{#1}%
    }{%
        #3%
    }%
}
\def\hi@date@readqual#1{%
    \find@word{#1}%
        {\@tworun{\appto\hi@date@qual}{\hi@date@readqual}}% punct
        {\@tworun{\appto\hi@date@qual}{\hi@date@readqual}}% group
        {\hi@date@qualword} % word
        {\hi@date@nodateerr}% end
}
\def\hi@date@nodateerr{%
    \PackageWarning\hi@pkgname{%
        In date `\hi@date@orig', no date was found.\MessageBreak
        The date will not be parsed. If this is \MessageBreak
        correct, include an exclamation point \MessageBreak
        at the start of the date. This occured%
    }%
}
\def\hi@date@qualword#1#2{%
    \hi@date@dateword{#1}{%
        \hi@date@readnoqual{#2}%
    }{%
        \appto\hi@date@qual{#1}%
        \hi@date@readqual{#2}%
    }%
}
\def\hi@date@readnoqual#1{%
    \find@word{#1}%
        {\hi@date@readpunct}% punct
        {\hi@date@worderr}% group
        {\hi@date@noqualword} % word
        {}% end
}
\def\hi@date@readpunct#1#2{%
    \find@eq{-}{#1}{\expandafter\appto\hi@date@last{--}}{}%
    \hi@date@readnoqual{#2}%
}
\make@find@eq{-}
\def\hi@date@noqualword#1#2{%
    \hi@date@dateword{#1}{%
        \hi@date@readnoqual{#2}%
    }{\hi@date@worderr{#1}{#2}}%
}
\def\hi@date@worderr#1#2{%
    \PackageWarning\hi@pkgname{%
        In date `\hi@date@orig', an unexpected word \MessageBreak
        `#1' was found. Use an exclamation point \MessageBreak
        to accept an unparseable date. This occured%
    }%
    \hi@date@readnoqual{#2}%
}
\def\hi@date@dateword#1#2#3{%
    \ifcsdef{hi@dtmac@#1}{%
        \csname hi@dtmac@#1\endcsname #2%
    }{%
        \@ifnumber{#1}{%
            \hi@date@number{#1}#2%
        }{#3}%
    }%
}
\def\hi@date@number#1{%
    \@test\ifx\hi@date@last\relax\fi{%
        % There was no previous number to a range. The number is either a year
        % or a day, which depends on (1) what is left to set and (2) how big
        % the number is.
        \@test\ifnum#1>\hi@date@maxday\fi{%
            % Must be a year
            \hi@date@set\hi@date@year{#1}{\hi@date@numerr{#1}}%
        }{%
            % If it could be a day, assume it is one unless the day was already
            % set
            \hi@date@set\hi@date@day{#1}{%
                \hi@date@set\hi@date@year{#1}{\hi@date@numerr{#1}}%
            }%
        }%
    }{%
        % The number could go at the end of a range. Check to see if whatever is
        % in \hi@date@last ends with a dash.
        \@expand{\find@end{-}}{\hi@date@last}{ii}{%
            \expandafter\appto\hi@date@last{#1}%
            \@gobble
        }{%
            % If it doesn't end with a dash, then unset \hi@date@last and retry
            % parsing.
            \let\hi@date@last\relax
            \hi@date@number{#1}%
        }%
    }%
}
\chardef\hi@date@maxday=31
\make@find@end{-}
\def\hi@date@numerr#1{%
    \PackageWarning\hi@pkgname{%
        Too many date parts were found in `\hi@date@orig', \MessageBreak
        and `#1' was ignored. This occurred%
    }%
}%
\def\hi@date@setmonth#1{%
    \hi@date@set\hi@date@month{#1}{%
        \@expand{\find@end{-}}\hi@date@month{i}{%
            \appto\hi@date@month{#1}\@gobble
        }{\hi@date@numerr{#1}}%
    }%
}
\def\hi@date@assemble#1{%
    \expandafter\chop@space@then@run\expandafter{\hi@date@qual}{%
        \def\hi@date@qual
    }%
    \edef\reserved@a{%
        \ifx\hi@date@qual\@empty\else
            \noexpand\hi@fn@dateprefix{\expandonce\hi@date@qual}\space
        \fi
        \ifx\hi@date@pre\@empty\else \expandonce\hi@date@pre\fi
        \ifx\hi@date@month\@empty\else
            \expandonce\hi@date@month\space
            \ifx\hi@date@day\@empty\else \expandonce\hi@date@day,\space \fi
        \fi
        \expandonce\hi@date@year
        \ifx\hi@date@post\@empty\else \space \expandonce\hi@date@post\fi
    }%
    \@expand{#1}\reserved@a i%
}
\def\hi@setup@month#1#2{%
    \def\do##1{%
        \@namedef{hi@dtmac@##1}{\hi@date@setmonth{#1}}%
    }%
    \docsvlist{#2}%
}
\hi@setup@month{Jan.}{jan, Jan, January, january}
\hi@setup@month{Feb.}{feb, Feb, February, february}
\hi@setup@month{Mar.}{mar, mar, Mar, March, march}
\hi@setup@month{Apr.}{apr, apr, Apr, April, april}
\hi@setup@month{May}{may, May}
\hi@setup@month{June}{june, June, jun, Jun}
\hi@setup@month{July}{july, July, jul, Jul}
\hi@setup@month{Aug.}{aug, Aug, August, august}
\hi@setup@month{Sept.}{sept, Sept, sep, Sep, september, September}
\hi@setup@month{Oct.}{oct, Oct, october, October}
\hi@setup@month{Nov.}{nov, Nov, november, November}
\hi@setup@month{Dec.}{dec, Dec, december, December}
\hi@setup@month{Winter}{winter, win, Win}
\hi@setup@month{Summer}{summer, sum, summ, Sum, Summ}
\hi@setup@month{Fall}{fall, Fall}
\hi@setup@month{Spring}{spring, spr, Spr}
\def\hi@dtmac@c{\appto\hi@date@pre{c.~}}
\def\hi@dtmac@circa{\appto\hi@date@pre{c.~}}
\def\hi@dtmac@nd{\hi@date@set\hi@date@year{n.d\@.}{\hi@date@numerr{n.d.}}}
\def\hi@dtmac@ad{\appto\hi@date@pre{\AD~}}
\def\hi@dtmac@AD{\appto\hi@date@pre{\AD~}}
\def\hi@dtmac@bc{\appto\hi@date@post{\BC}}
\def\hi@dtmac@BC{\appto\hi@date@post{\BC}}
\def\hi@dtmac@ace{\appto\hi@date@post{\ACE}}
\def\hi@dtmac@ACE{\appto\hi@date@post{\ACE}}
\def\hi@dtmac@bce{\appto\hi@date@post{\BCE}}
\def\hi@dtmac@BCE{\appto\hi@date@post{\BCE}}
\def\AD{\textsc{a.d.}}
\def\BC{\textsc{b.c.}\futurelet\@let@token\hi@bc@post}
\def\BCE{\textsc{b.c.e.}\futurelet\@let@token\hi@bc@post}
\def\ACE{\textsc{a.c.e.}\futurelet\@let@token\hi@bc@post}
\def\hi@bc@post{%
    \ifx.\@let@token
        \expandafter\@gobble
    \else
        \@%
        \ifcat a\@let@token \space \fi
    \fi
}
%%
%% \iffalse filename: xref.dtx \fi
%%
\newcommand*\hilabel[2][]{%
    \@bsphack
    \@testcase
        \if@hi@note\fi{\hi@xref@writenote}%
        \ifx\@captype\@undefined\fi{\hi@xref@writetext}%
        \default{\hi@xref@writefloat}%
    {#2}{#1}%
    \@esphack
}
\newcommand*\hiendlabel[1]{%
    \hilabel{end:#1}%
}
\newcommand*\hitanlabel[2][]{%
    \@bsphack
    \hi@xref@writetan{#2}{#1}%
    \@esphack
}
\newcommand*\hiendtanlabel[1]{%
    \hitanlabel{end:#1}%
}
\newcommand*\hiflabel[2][]{%
    \@bsphack
    \hi@xref@writefloat{#2}{#1}%
    \@esphack
}
\newcommand*\hinotelabel[2][]{%
    \@bsphack
    \hi@xref@writenote{#2}{#1}%
    \@esphack
}
\newcommand*\hisectlabel[2][]{%
    \@bsphack
    \hi@xref@writetoaux{#2}{#1}%
        {\hi@xref@sectname\space}{\hi@xref@sectsname\space}%
        {\@currentlabel}{}{}%
    \@esphack
}
\def\hiendsectlabel#1{\hisectlabel{end:#1}}
\def\SectionName#1{%
    \gdef\hi@xref@sectname{#1}%
    \gdef\hi@xref@sectsname{#1s}%
}
\def\SectionsName#1{%
    \gdef\hi@xref@sectsname{#1}%
}
\SectionName{Section}
\def\hi@xref@writetoaux#1#2#3#4#5#6#7{%
    \begingroup
        \find@start{end:}{#1}{%
            \protected@write\@auxout{}{\string\newlabel{#1}{{#4}{#5}}}%
            \hi@xref@checktype{#3}{#6}%
        }{%
            \protected@csxdef{hir@#1}{{#3}{#6}}%
            #7%
            \protected@write\@auxout{}{\string\newlabel{#1}{{#2}{#3}{#5}{#6}}}%
        }%
    \endgroup
}
\make@find@start{end:}
\def\hi@xref@checktype#1#2#3{%
    \protected@edef\reserved@a{{#1}{#2}}%
    \expandafter\ifx\csname hir@#3\endcsname\reserved@a \else
        \hi@xref@checktype@err{#3}%
    \fi
}
\def\hi@xref@checktype@err#1{%
    \PackageError\hi@pkgname{%
        Cross-reference #1 was ended with a different type than it was
        opened with%
    }{%
        Make sure your \string\hilabel\space and \string\hiendlabel\space
        commands are placed in matching contexts (figures, footnotes, etc.)%
    }%
}
\appto\hi@hooks@review{
    \def\hi@xref@writetext#1#2{%
        \hi@xref@writetoaux{#1}{#2}{%
            text accompanying note
        }{%
            text accompanying notes
        }{\thefootnote}{}{\advance\c@footnote\@ne}%
    }
    \def\hi@xref@writetan#1#2{%
        \hi@xref@writetoaux{#1}{#2}{note }{notes }{\thefootnote}{ % space
            and accompanying text%
        }{\advance\c@footnote\@ne}%
    }
}
\appto\hi@hooks@memo{
    \def\hi@xref@writetext#1#2{%
        \hi@xref@writetoaux{#1}{#2}{p. }{pp. }{\thepage}{}{}%
    }
    \def\hi@xref@writetan#1#2{%
        \hi@xref@writetoaux{#1}{#2}{p. }{pp. }{\thepage}{ and notes}{}%
    }
}
\def\hi@xref@writenote#1#2{%
    \hi@xref@writetoaux{#1}{#2}{note }{notes }{\thefootnote}{}{}%
}
\def\hi@xref@writefloat#1#2{%
    \hi@xref@writetoaux{#1}{#2}%
        {\csname \@captype name\endcsname\space}% Both Table and Figure can
        {\csname \@captype name\endcsname s }%    be pluralized with just `s'
        {\@currentlabel}{}{}%
}
\def\fc@this{%
    \ifx\@this@page\relax \hi@xref@nopageerr \else
        \if@hi@inline
            \expandafter\hi@xref@inline\@this@page
        \else
            \expandafter\hi@xref@cite\@this@page
        \fi
    \fi
}
\def\hi@xref@nopageerr{%
    \PackageError\hi@pkgname{No page number given for cross-reference}{%
        Give the name of the cross-reference label as the page number%
    }%
}
\def\hi@xref@inline#1#2#3{%
    \ifblank{#1}{#3}{#1}%
}
\def\hi@xref@cite#1#2#3{%
    \ifx\@this@opt\relax
        \hi@name@only{\ifblank{#1}{}{#1 }}%
    \else
        \@this@opt\space
    \fi
    #2 #3%
}
\let\idc@this\fc@this
\def\pc@this#1{%
    \@ifundefined{r@#1}{%
        \G@refundefinedtrue
        \PackageWarning\hi@pkgname{Reference `#1' undefined}%
        \def\@this@page{{}{}{\textbf{??#1}}}%
    }{%
        \@ifundefined{r@end:#1}{%
            \@expand{%
                \@unbrace{\hi@xref@noend{#1}}%
            }{\csname r@#1\endcsname}{ii}%
        }{%
            \@expand{%
                \@unbrace{%
                    \@expand{%
                        \@unbrace{\hi@xref@withend{#1}}%
                    }{\csname r@#1\endcsname}{ii}%
                }%
            }{\csname r@end:#1\endcsname}{ii}%
        }%
    }%
}
\def\hi@xref@noend#1#2#3#4#5{%
    \hi@xref@withend{#1}{#2}{#3}{#4}{#5}{#3}{#4}%
}
\def\hi@xref@withend#1#2#3#4#5#6#7{%
    \def\@this@page{{#2}}%
    \@ifundefined{hir@#1}{%
        \appto\@this@page{{\hi@fn@sig{infra}}}%
    }{%
        \appto\@this@page{{\hi@fn@sig{supra}}}%
    }%
    \def\reserved@a{#4}\def\reserved@b{#7}%
    \ifx\reserved@a\reserved@b
        \appto\@this@page{{#3#4#5}}%
    \else
        \appto\@this@page{{#6#4--#7#5}}%
    \fi
}
%%
%% \iffalse filename: urls.dtx \fi
%%
\def\url#1{%
    \hi@parseurl{#1}\reserved@a\reserved@a
}%
\def\hi@parseurl#1#2{%
    \hi@parseurl@forlink{#1}%
    \def#2{\leavevmode\hi@parseurl@use}%
    \expandafter\addto@macro\expandafter#2\expandafter{\expandafter{%
        \the\hi@url@count
    }}%
    \hi@parseurl@{#1}{#2}%
    \if@endswithdot{#1}{\addto@macro#2{\protect\@hi@dottrue}}%
    \addto@macro#2{\hi@parseurl@enduse}%
}
\DeclareRobustCommand\hi@parseurl@use[1]{%
    \@ifundefined{hi@pdfurl@#1}{%
        \edef\reserved@a{%
            \noexpand\special{%
                pdf:object @HIURL#1 <<
                    /S /URI
                    /URI (\csname hi@linkurl@#1\endcsname)
                >>
            }%
        }\reserved@a
    }{}%
    \edef\hi@parseurl@insert##1{%
        \noexpand\special{pdf:bann <<
            /Type /Annot
            /Subtype /Link
            /Border [0 0 0]
            /A @HIURL#1
        >>}##1\noexpand\special{pdf:eann}%
    }%
}
\DeclareRobustCommand\hi@parseurl@insertbox[1]{%
    \hbox{\hi@parseurl@insert{#1}}%
}
\let\hi@parseurl@insert\@firstofone
\DeclareRobustCommand\hi@parseurl@enduse{}
\newcount\hi@url@count
\make@find@start{http://}
\make@find@start{https://}
\make@find@start{ftp://}
\make@find@start{mailto:}
\def\hi@parseurl@forlink#1{%
    \let\reserved@a\@empty
    % Force the link to start with https:// unless it has a protocol already
    \find@try\find@start{%
        {http://}\@gobble{https://}\@gobble{ftp://}\@gobble{mailto:}\@gobble
    }{#1}{\def\reserved@a{https://}}%
    \hi@parseurl@forlink@{#1}%
    \global\advance\hi@url@count\@ne
    \global\expandafter\let\csname hi@linkurl@\the\hi@url@count\endcsname \reserved@a
}
\def\hi@parseurl@forlink@#1{%
    \find@word{#1}%
        \hi@parseurl@forlink@chars
        \hi@parseurl@forlink@groups
        \hi@parseurl@forlink@words
        \relax
}
\def\hi@parseurl@forlink@words#1#2{%
    \addto@macro\reserved@a{#1}%
    \hi@parseurl@forlink@{#2}%
}
\def\hi@parseurl@forlink@groups#1#2{%
    \hi@parseurl@forlink@{\{#1\}#2}%
}
\def\hi@parseurl@forlink@chars#1#2{%
    \@test \ifcat\relax\noexpand#1\fi{%
        \@ifundefined{hi@url@\string#1}{%
            \expandafter\addto@macro\expandafter\reserved@a\expandafter{%
                \string#1%
            }%
        }{%
            \@expand{\addto@macro\reserved@a}{%
                \expandafter\@gobble\string#1%
            }{ii}%
        }%
    }{%
        \addto@macro\reserved@a{#1}%
    }%
    \hi@parseurl@forlink@{#2}%
}
\def\hi@parseurl@#1#2{%
    \find@word{#1}{%
        \hi@parseurl@chars{#2}%
    }{%
        \hi@parseurl@groups{#2}%
    }{%
        \hi@parseurl@words{#2}%
    }{}%
}
\def\hi@parseurl@words#1#2#3{%
    \addto@macro#1{\hi@parseurl@insertbox{#2}}%
    \hi@parseurl@{#3}{#1}%
}
\def\hi@parseurl@groups#1#2#3{%
    \hi@parseurl@{\{#2\}#3}{#1}%
}
\def\hi@parseurl@chars#1#2#3{%
    \@test \ifcat\relax\noexpand#2\fi{%
        \@ifundefined{hi@url@\string#2}{%
            \expandafter\hi@parseurl@\expandafter{\string#2#3}{#1}%
        }{%
            \csname hi@url@\string#2\endcsname{#1}{#3}%
            \hi@parseurl@{#3}{#1}%
        }%
    }{%
        \@ifundefined{hi@url@\hi@url@bslash\string#2}{%
            \addto@macro#1{\hi@parseurl@insertbox #2}%
        }{%
            \csname hi@url@\hi@url@bslash\string#2\endcsname{#1}{#3}%
        }%
        \hi@parseurl@{#3}{#1}%
    }%
}
\edef\hi@url@bslash{\expandafter\@gobble\string\\}
\def\UrlBreaks{\do\.\do\@\do\!\do\;\do\]\do\)\do\,\do\+%
\do\=\do\#\do\:}
\def\UrlBigBreaks{\do\/\do\?\do\&\do\-}
\def\UrlNobreaks{\do\^\do\$}
\def\UrlSpecials{%
    \do\<{$\protect\langle$}%
    % There's some bug in doc.sty that requires this
    \expandafter\do\csname|\endcsname{$\protect\mid$}%
    \do\{{$\protect\lbrace$}%
    \do\\{$\protect\backslash$}%
    \do\ {}%
    \do\_{\_}%
}
\def\UrlNobreakSpecials{%
    \do\>{$\protect\rangle$}\do\}{$\protect\rbrace$}\do\~{\char`\~}%
    \do\%{\hi@url@spacebreak\%}%
}
\DeclareRobustCommand\hi@url@break{%
    \penalty\exhyphenpenalty
}
\DeclareRobustCommand\hi@url@spacenobreak{%
    \unskip\unpenalty\nobreak
    \hskip\urlbreakskip
}
\DeclareRobustCommand\hi@url@spacebreak{%
    \penalty\exhyphenpenalty\hskip\urlbreakskip
}
\def\do#1{%
    \@namedef{hi@url@\string #1}##1##2{%
        \addto@macro##1{\hi@parseurl@insertbox}%
        \@expand{\addto@macro##1}{\expandafter\@gobble\string #1}{ii}%
        \find@word{##2}\@gobbletwo\@gobbletwo{%
            \addto@macro##1{\hi@url@break}\@gobbletwo
        }{}%
    }%
}
\UrlBreaks
\@namedef{hi@url@\string\ }#1#2{%
    \ifstrempty{#2}{}{\addto@macro#1{\hi@url@break}}%
}
\@namedef{hi@url@\string\^^M}#1#2{%
    \ifstrempty{#2}{}{\addto@macro#1{\hi@url@break}}%
}
\newskip\urlbreakskip \urlbreakskip=0pt plus .4pt
\def\do#1{%
    \@namedef{hi@url@\string #1}##1##2{%
        \addto@macro##1{\hi@url@spacenobreak\hi@parseurl@insertbox}%
        \@expand{\addto@macro##1}{\expandafter\@gobble\string #1}{ii}%
        \find@word{##2}{%
            \addto@macro##1{\hi@url@spacenobreak}\@gobbletwo
        }{%
            \addto@macro##1{\hi@url@spacenobreak}\@gobbletwo
        }{%
            \addto@macro##1{\hi@url@spacebreak}\@gobbletwo
        }{}%
    }%
}
\UrlBigBreaks
\def\do#1{%
    \@namedef{hi@url@\string #1}##1##2{%
        \addto@macro##1{\hi@parseurl@insertbox}%
        \@expand{\addto@macro##1}{\expandafter\@gobble\string #1}{ii}%
    }%
}
\UrlNobreaks
\def\do#1#2{%
    \@namedef{hi@url@\string #1}##1##2{%
        \addto@macro##1{\hi@parseurl@insertbox{#2}}%
        \find@word{##2}\@gobbletwo\@gobbletwo{%
            \addto@macro##1{\hi@url@break}\@gobbletwo
        }{}%
    }%
}
\UrlSpecials
\def\do#1#2{%
    \@namedef{hi@url@\string #1}##1##2{%
        \addto@macro##1{\hi@parseurl@insertbox{#2}}%
    }%
}
\UrlNobreakSpecials
\def\hi@urlstyle@full{%
    \def\hi@showurl##1{##1}%
}
\def\hi@urlstyle@toa{%
    \def\hi@showurl##1{%
        \if@hi@in@toa
            ##1%
        \else
            \ToaUrlMark
            \hi@showurl@toatext
        \fi
    }
    \def\hi@showurl@toatext{%
        \hi@defer@content{\ToaUrlText}%
        \global\let\hi@showurl@toatext\@empty
    }
    \def\ToaUrlText{%
        Locations of authorities available online are shown in the Table of
        Authorities.
    }
    \def\ToaUrlMark{\emph{available online}}
}
\def\hi@urlstyle@link{%
    \def\hi@parseurl##1##2{%
        \hi@parseurl@forlink{##1}%
        \edef##2{%
            \noexpand\leavevmode
            \noexpand\special{%
                pdf:object @HIURL\the\hi@url@count <<
                    /S /URI
                    /URI (\csname hi@linkurl@\the\hi@url@count\endcsname)
                >>
            }%
            \noexpand\special{pdf:bann <<
                /Type /Annot
                /Subtype /Link
                /Border [0 0 0]
                /A @HIURL\the\hi@url@count
            >>}\noexpand\LinkText\noexpand\special{pdf:eann}%
        }%
    }
    \def\LinkText{\emph{link}}
}
%%
%% \iffalse filename: struct.dtx \fi
%%
\def\hi@pstruct@initialize#1{%
    \hi@ifset\hi@kv@struct{%
        \noexpand\hi@pstruct@execute
            \expandafter\noexpand\hi@kv@struct % The macro containing the struct
            \noexpand#1% The testing macro
    }{}%
}
\DeclareRobustCommand\hi@pstruct@execute[2]{%
    \let\hi@pstruct@tmp\relax
    \expandafter\hi@pstruct@execute@\expandafter#2\expandafter{#1}%
}%
\make@find@in{,}
\make@find@in{=}
\def\hi@pstruct@execute@#1#2{%
    \find@in{=}{#2}{\hi@pstruct@execute@test{#1}}{}%
}%
\def\hi@pstruct@execute@test#1#2#3{%
    \chop@space@then@run{#2}{\def\reserved@a}%
    \@test \ifx#1\reserved@a \fi{%
        \find@in{,}{#3}{\@tworun\hi@pstruct@execute@use\@gobble}{%
            \hi@pstruct@execute@use{#3}%
        }%
    }{%
        % If there's a comma, ignore everything before it and continue parsing
        % the struct thereafter.
        \find@in{,}{#3}{\@tworun\@gobble{\hi@pstruct@execute@{#1}}}{}%
    }%
}
\def\hi@pstruct@execute@use#1{\@unbrace\hi@pstruct@execute@use@#1\@stop}%
\def\hi@pstruct@execute@use@#1\@stop{\def\hi@pstruct@tmp{#1}}%
\def\hi@pstruct@call#1#2{%
    \hi@ifset\hi@kv@struct{%
        \noexpand\hi@pstruct@try{#1}{\csname hi@kv@#1\endcsname}{#2}%
    }{#2{\csname hi@kv@#1\endcsname}}%
}
\def\hi@pstruct@use#1{\hi@pstruct@call{#1}{\noexpand\@iden}}%
\def\hi@pstruct@use@font#1#2{\hi@pstruct@call{#1}{\noexpand#2}}%
\DeclareRobustCommand\hi@pstruct@try[3]{%
    \@test \ifx\hi@pstruct@tmp\relax \fi{%
        #3{#2}%
    }{%
        \begingroup
        % Set parameters as usual
        \@expand{\setkeys{hi}}\hi@pstruct@tmp{i}%
        \expandafter\hi@ifset\csname hi@kv@#1\endcsname{%
            \@expand\hi@pstruct@try@use{\csname hi@kv@#1\endcsname}{ii}{#3}%
        }{%
            \endgroup
            #3{#2}%
        }%
    }%
}
\def\hi@pstruct@try@use#1#2{%
    \endgroup #2{#1}%
}
%%
%% \iffalse filename: anonymous.dtx \fi
%%
\newcount\hi@anonrefno
\make@find@in{: }
\def\hi@anonref#1#2{%
    \find@in{: }{#1}{\hi@anonref@{#2}}{#2{#1}}
}
\def\hi@anonref@#1#2#3{%
    \global\advance\hi@anonrefno\@ne
    \edef\reserved@a{anon@cite@\the\hi@anonrefno}%
    \begingroup
        \hi@param@clear
        \chop@space@then@run{#3}{%
            \@expand{\csname def#2\endcsname}{\reserved@a}i%
        }%
    \endgroup
    \@expand{#1}\reserved@a i%
}
\make@find@in{ (}%
\make@find@end{)}%
%%
%% \iffalse filename: iface.dtx \fi
%%
\newif\if@hi@inline \@hi@inlinefalse
\newif\if@hi@sent
\newif\if@hi@name \@hi@nametrue
\newif\if@hi@adjective
\appto\hi@hooks@review{
    \def\sentence#1{%
        \@test\if@hi@note\fi{%
            \hi@sentence{#1}%
        }{%
            \ifhmode\else
                \hi@sentence@review@warn
                \leavevmode
            \fi
            \unskip
            \footnote{\sentence{#1}.}%
            \@gobble@dot
        }%
    }
    \def\hi@sentence@review@warn{%
        \PackageWarning\hi@pkgname{%
            A sentence citation was used in text, at the beginning\MessageBreak
            of a paragraph; it needs to be moved to the end of the\MessageBreak
            previous paragraph.\MessageBreak
            This occurred after footnote \the\c@footnote%
        }%
    }
}
\appto\hi@hooks@memo{
    \def\sentence{\hi@sentence}%
}
\def\hi@sentence#1{%
    \hi@pse@parse{#1}{\hi@draw@citation{\@hi@captrue\@hi@senttrue}{}}%
    \futurelet\@let@token\hi@end@sentence
}
\def\hi@end@sentence{%
    \ifdim\lastkern>\z@ \unkern \fi
    \@test \ifx\@let@token.\fi{%
        \if@hi@dot
            \@re@dot@space
        \else
            .%
        \fi
        \hi@deferred@note@endstring
        \@gobble
    }{%
        \PackageWarning\hi@pkgname{%
            Sentence citation did not end with period.\MessageBreak
            This occurred%
        }%
        % Add the period
        .\hi@deferred@note@endstring\space
        \expandafter\ignorespaces
    }%
}
\appto\hi@hooks@review{
    \def\clause#1{%
        \@test\if@hi@note\fi{%
            \hi@clause{#1}%
        }{%
            \unskip
            \footnote{\sentence{#1}.}%
            \futurelet\@let@token\hi@clause@review@end
        }%
    }
    \def\hi@clause@review@end{%
        \ifx\@let@token,
            \expandafter\@gobble
        \else
            \hi@clause@review@warn
        \fi
    }%
    \def\hi@clause@review@warn{%
        \PackageWarning\hi@pkgname{%
            A clause citation was used in text, but its ending\MessageBreak
            punctuation could not be reconciled automatically.\MessageBreak
            This occurred at footnote \the\c@footnote%
        }%
    }
}
\appto\hi@hooks@memo{
    \def\clause{\hi@clause}
}
\def\hi@clause#1{%
    \hi@pse@parse{#1}{\hi@draw@citation{\@hi@capfalse\@hi@sentfalse}{}}%
    \futurelet\@let@token\hi@end@clause
}
\def\hi@clause@endflag{\iffalse\hi@clause@endflag\fi}
\def\hi@end@clause{%
    \if@hi@dot
        \ifx\@let@token\hi@clause@endflag \else
            \ifx\@let@token.\else
                \@hi@dotfalse
            \fi
        \fi
    \fi
    \@testcase
    \ifx\@let@token,\fi{%
        \ifdim\lastkern>\z@ \unkern \fi
        ,\hi@deferred@note@endstring\@gobble
    }%
    \expandafter\ifx\space\@let@token\fi{%
        \PackageWarning\hi@pkgname{%
            \string\clause\space not terminated with punctuation%
        }%
        \hi@deferred@note@endstring
    }%
    \ifx\@let@token.\fi{%
        \ifdim\lastkern>\z@ \unkern \fi
        \if@hi@dot
            \@hi@dotfalse % For parenthetical endings
            \@re@dot@space
        \else
            .%
        \fi
        \hi@deferred@note@endstring\@gobble
    }%
    \ifx\@let@token\hi@clause@endflag\fi{\hi@deferred@note@endstring\@gobble}%
    \ifx\@let@token;\fi{\@let@token\hi@deferred@note@endstring\@gobble}%
    \ifx\@let@token:\fi{\@let@token\hi@deferred@note@endstring\@gobble}%
    \ifx\@let@token!\fi{\@let@token\hi@deferred@note@endstring\@gobble}%
    \ifx\@let@token?\fi{\@let@token\hi@deferred@note@endstring\@gobble}%
    \ifx\@let@token-\fi{\hi@deferred@note@endstring}%
    \ifx\@let@token)\fi{\hi@deferred@note@endstring}%
    \default{%
        \PackageWarning\hi@pkgname{%
            \string\clause\space not terminated with punctuation%
        }%
        \hi@deferred@note@endstring
    }%
}
\def\inline#1{\hi@inline{#1}{\@hi@capfalse\@hi@sentfalse}}
\def\Inline#1{\hi@inline{#1}{\@hi@captrue\@hi@senttrue}}
\def\adjective#1{\hi@inline{#1}{\@hi@capfalse\@hi@sentfalse\@hi@adjectivetrue}}
\def\Adjective#1{\hi@inline{#1}{\@hi@captrue\@hi@senttrue\@hi@adjectivetrue}}
\newif\if@hi@invis@inline
\DeclareRobustCommand\hi@invis@inline{\if@hi@inline \@hi@invis@inlinetrue \fi}
\def\hi@inline#1#2{%
    \let\hi@inline@lastcase\@last@case
    \hi@state@save\hi@inline@restorestate
    \@hi@invis@inlinefalse
    \@hi@inlinetrue
    \hi@pse@parse{#1}{\hi@draw@citation{#2}{}}%
    \@hi@inlinefalse
    \@hi@adjectivefalse
    \if@hi@invis@inline
        \hi@inline@restorestate
    \else
        \def\hi@inline@setlast{\def\@last@inline}%
        \expandafter\addto@macro\expandafter\hi@inline@setlast\expandafter{%
            \expandafter{\@last@case}%
        }%
        \hi@inline@post
        \hi@inline@setlast
    \fi
    \futurelet\@let@token\hi@end@inline
}
\appto\hi@hooks@review{
    \def\hi@inline@post{%
        \if@hi@note
            \ifx\hi@inline@lastcase\@last@case
                \hi@inline@restorestate
            \else
                \hi@state@reset
            \fi
        \else
            \hi@inline@restorestate
        \fi
    }
}
\appto\hi@hooks@memo{
    \def\hi@inline@post{%
        \ifx\hi@inline@lastcase\@last@case
            \hi@inline@restorestate
        \else
            \hi@state@reset
        \fi
    }
}
\def\hi@end@inline{%
    \@testcase
    \ifx\@let@token.\fi{%
        \unkern
        %
        % Set \@hi@dotfalse only after determining whether to gobble the dot.
        %
        \expandafter\@hi@dotfalse
        \if@hi@dot
            \@re@dot@space\expandafter\@gobble
        \fi
    }%
    \ifx\@let@token,\fi{\@hi@dotfalse\unkern}%
    \ifx\@let@token\hi@clause@endflag\fi{}% Leave \@hi@dottrue alone
    \default{\@hi@dotfalse}%
}
\def\hi@noname@sometimes{
    \def\hi@noname{%
        \if@hi@note
            \ifnum\hi@note@cites>\z@ \@hi@namefalse \fi
        \else
            \@hi@namefalse
        \fi
    }
}
\def\hi@noname@always{
    \def\hi@noname{\@hi@namefalse}
}
\def\note#1{%
    \if@hi@note
        \PackageWarning\hi@pkgname{%
            Cannot create footnote citation inside a footnote%
        }%
        \sentence{#1}.\space\expandafter\ignorespaces
    \else
        \unskip
        \def\hi@note@content{\sentence{#1}.}\expandafter\hi@note@post
    \fi
}%
\def\hi@note@post{\futurelet\hi@note@token\hi@note@post@}
\def\hi@note@post@switch{%
    {\hiendnotelabel}{}%
    {\hinotelabel}{}%
    {\egroup}{}%
    { }{}%
    {-}{}%
    {)}{}%
    {,}{\hi@note@post@warn \spacefactor\sfcode`\,\relax \@gobble}%
    {.}{\hi@note@post@warn \spacefactor\sfcode`\.\relax \@gobble}%
}
\def\hi@note@post@warn{%
    \PackageWarning\hi@pkgname{%
        Unexpected character after \string\note: \meaning\hi@note@token
    }%
}
\def\hi@note@post@{%
    \@test\ifx\hi@note@token\bgroup\fi{%
        \hi@note@post@more
    }{%
        \expandafter\footnote\expandafter{\hi@note@content}%
        \expandafter\hi@note@post@@\hi@note@post@switch\@stop
    }%
}
\def\hi@note@post@more#1{%
    \addto@macro\hi@note@content{ #1}%
    \hi@note@post
}
\def\hi@note@post@@#1#2#3\@stop{%
    \@test\ifx\hi@note@token#1\fi{%
        #2%
    }{%
        \ifstrempty{#3}{%
            \hi@note@post@warn
        }{%
            \hi@note@post@@#3\@stop
        }%
    }%
}

\appto\hi@hooks@review{
    \def\optclause{%
        \@test\if@hi@note\fi{%
            \hi@optclause@memo
        }{%
            \hi@record@choose@cite{\@last@inline}{%
                \futurelet\@let@token\hi@optclause@with
            }{%
                \futurelet\@let@token\hi@optclause@without
            }%
        }%
    }
    \def\hi@optclause@without{%
        \ifcat a\@let@token\space \fi
    }
    \def\hi@optclause@with{%
        \@test\ifx\ \@let@token\fi{%
            \footnote{\sentence{*}.}\ %
        }{%
            \@test\ifcat\space\@let@token\fi{%
                \footnote{\sentence{*}.}%
            }{%
                \@test\ifcat a\@let@token\fi{%
                    \footnote{\sentence{*}.}\space
                }{%
                    \hi@optclause@hop
                }%
            }%
        }%
    }
    \def\hi@optclause@hop#1{%
        #1\futurelet\@let@token\hi@optclause@with
    }
}
\appto\hi@hooks@memo{
    %
    % Adds a clause for *, with no pin cite, unless the case is being
    % short-cited.
    \def\optclause{\hi@optclause@memo}
}
\def\hi@optclause@memo{%
    \hi@record@choose@cite{\@last@inline}{%
        \unkern, \clause{*}\hi@clause@endflag
        \futurelet\@let@token\hi@optclause@endwith
    }{\futurelet\@let@token\hi@optclause@endwithout}%
}
\def\hi@optclause@endwith{%
    \ifx\ \@let@token,\else
        \ifcat a\@let@token,\space \fi
    \fi
}
\def\hi@optclause@endwithout{%
    \ifx\@let@token,\unkern\else
        \ifx\@let@token.\unkern\else
            \ifcat a\@let@token\space \fi
        \fi
    \fi
}
\AtBeginDocument{%
    \def\textellipsis{%
        \ifhmode\unskip\@\hi@ellipsis@kern\fi
        .\hi@ellipsis@kern
        .\hi@ellipsis@kern
        .\hbox{\vrule \@width 0pt}% Looks better with microtype
        \futurelet\@let@token\hi@ellipsis@end
    }%
}
\@ifpackageloaded{times}{%
    \def\hi@ellipsis@kern{\kern\fontdimen3\font}%
    \def\hi@ellipsis@space{\hskip\fontdimen3\font\relax}%
}{%
    \let\hi@ellipsis@kern~%
    \let\hi@ellipsis@space\space
}
\def\hi@ellipsis@end{%
    \ifx\@let@token\fi
        \@eatafi{\@skipafi{\@skipafi{\futurelet\@let@token\hi@ellipsis@end}}}%
    \else
        \ifcat A\noexpand\@let@token
            \@\hi@ellipsis@space
        \else
            \hi@ellipsis@kern
            \spacefactor999\relax
        \fi
    \fi
}
\def\sic!{[\emph{sic}]}
\def\hi@noid{%
    \let\@last@case\relax\let\@last@page\relax\let\@last@vol\relax
    \let\@last@title\relax
}
\let\noid\hi@noid
\def\fullcite#1{%
    \expandafter\let\csname dfc@#1\endcsname\relax
    \expandafter\let\csname dfi@#1\endcsname\relax
    \noid
}
\def\nofullcite#1{\hi@record@cite{#1}}
\def\fulltitle{\let\@this@title\relax}
\def\addtotoa#1#2{\@bsphack\hi@addtotoa{#1}{#2}\@esphack}
\newcommand\Ct{\sentence}
\newcommand\ct{\clause}
\newcommand\Ci{\Inline}
\newcommand\ci{\inline}
\newcommand\cn{\note}
\newcommand\cx{\addtotoa}
%%
%% \iffalse filename: parse.dtx \fi
%%
\def\hi@pse@sigvolref#1#2{%
    \expandafter\find@try\expandafter\find@start\expandafter{%
        \hi@pse@findlist
    }{#1}{\hi@pse@sigvolref@withsig{}{#1}}{#2}%
}
\def\hi@pse@sigvolref@withsig#1#2#3{%
    \find@in{ }{#2}{%
        #3{#1}%
        % The two remaining arguments from \find@in will go to the callback
    }{%
        #3{#1}{}{#2}% No volume found; run the callback with blank and #2
    }%
}
\def\hi@pse@read#1{%
    %\hi@pse@debug{Reading #1}%
    \find@word{#1}%
        \hi@pse@read@char\hi@pse@read@grp\hi@pse@read@do@wd\hi@pse@read@eof
}
\def\hi@pse@read@char#1#2{%
    %\hi@pse@debug{Read char: #1}%
    \find@eq{;}{#1}{\hi@pse@read@do@sc}{%
        \find@eq{ }{#1}{\hi@pse@read@do@spc}{\hi@pse@read@do@punct}%
    }{#1}{#2}%
}
\def\hi@pse@read@grp#1#2{%
    %\hi@pse@debug{Read group: #1}%
    \hi@pse@read@do@wd{{#1}}{#2}%
}%
\def\hi@pse@read@eof#1#2#3#4#5{%
    %\hi@pse@debug{Read EOF}%
    #5%
}
\def\hi@pse@read@do@wd   #1#2#3#4#5#6#7{%
    %\hi@pse@debug{Read word: #1}%
    #3{#1}{#2}%
}
\def\hi@pse@read@do@spc  #1#2#3#4#5#6#7{%
    %\hi@pse@debug{Read space}%
    #4{#1}{#2}%
}
\def\hi@pse@read@do@sc   #1#2#3#4#5#6#7{%
    %\hi@pse@debug{Read semicolon}%
    #5{#1}{#2}%
}
\def\hi@pse@read@do@punct#1#2#3#4#5#6#7{%
    %\hi@pse@debug{Read punct: #1}%
    #6{#1}{#2}%
}
\def\hi@pse@acc@reset{%
    \let\hi@pse@acc@all\@empty
    \let\hi@pse@acc@cite\@empty
    \let\hi@pse@acc@work\@empty
}
\def\hi@pse@acc@savework#1{%
    \@expand{\hi@pse@acc@saveparam{#1}}\hi@pse@acc@work i%
}
\def\hi@pse@acc@saveparam#1#2{%
    \addto@macro\hi@pse@acc@cite{#1{#2}}%
    \let\hi@pse@acc@work\@empty
}
\def\hi@pse@acc@savecite{%
    \expandafter\addto@macro\expandafter\hi@pse@acc@all\expandafter{%
        \expandafter\hi@pse@cite\expandafter{%
            \hi@pse@acc@cite
        }%
    }%
    \let\hi@pse@acc@work\@empty
    \let\hi@pse@acc@cite\@empty
}
\def\hi@pse@acc@add#1#2#3{\addto@macro\hi@pse@acc@work{#2}#1{#3}}
\def\hi@pse@acc@addspc{\addto@macro\hi@pse@acc@work{ }}
\def\hi@pse@acc@addnonblank#1#2#3{%
    \ifx\hi@pse@acc@work\@empty
        \find@eq{ }{#2}{}{\addto@macro\hi@pse@acc@work{#2}}%
    \else
        \addto@macro\hi@pse@acc@work{#2}%
    \fi
    #1{#3}%
}
\def\hi@pse@acc@ignore#1#2#3{#1{#3}}%
\def\hi@pse@acc@addnext#1#2#3{\def\hi@pse@acc@work{#2}#1{#3}}
\def\hi@pse@acc@setparam#1#2#3#4{%
    \hi@pse@acc@savework{#1}%
    #2{#4}%
}
\def\hi@pse@acc@setcite#1#2{%
    \hi@pse@acc@savecite
    \hi@pse@state@nextcite{#2}%
}
\def\hi@pse@acc@setparamcite#1#2#3{%
    \hi@pse@acc@savework{#1}%
    \hi@pse@acc@setcite{#1}{#3}%
}
\def\hi@pse@error#1#2{%
    \def\reserved@a{>>>#1<<<#2}%
    \PackageError\hi@pkgname{Citation parse error:
    \expandafter\strip@prefix\meaning\reserved@a
    }{Fix the erroneous citation}%
    \hi@acc@savecite
    \addto@macro\hi@pse@acc@all{\hi@pse@cite{\hi@pse@svr{???}}}%
}
\def\hi@pse@parse#1#2{%
    %\hi@pse@debug{Starting parse: #1}%
    \hi@pse@acc@reset
    \hi@pse@state@nextcite{#1}%
    \@expand{#2}\hi@pse@acc@all i%
}
\def\hi@pse@state@nextcite#1{%
    %\hi@pse@debug{State nextcite; reading #1}%
    \hi@pse@read{#1}%
        {\hi@pse@acc@addnext\hi@pse@state@svr}% word
        {\hi@pse@acc@ignore\hi@pse@state@nextcite}% space
        {\hi@pse@acc@ignore\hi@pse@state@nextcite}% semicolon
        {\hi@pse@acc@addnext\hi@pse@state@svr}% other punctuation
        {}% EOF--do nothing; all done
}
\def\hi@pse@state@svr#1{%
    %\hi@pse@debug{State svr; reading #1}%
    \hi@pse@read{#1}%
        {\hi@pse@acc@add\hi@pse@state@svr}% word
        {\hi@pse@acc@ignore\hi@pse@state@svrspc}% space
        {\hi@pse@acc@setparamcite\hi@pse@svr}% ;
        {\hi@pse@state@svr@testpunct{}}% punct
        {\hi@pse@acc@setparamcite\hi@pse@svr{}{}}% eof
}
\def\hi@pse@state@svrspc#1{%
    %\hi@pse@debug{State svrspc; reading #1}%
    \find@start{at }{#1}{%
        % The trailing argument of the \find@start callback is the remaining
        % text to be parsed. Thus, \hi@pse@acc@setparam receives four arguments
        % as expected.
        \hi@pse@acc@setparam\hi@pse@svr\hi@pse@state@page{}%
    }{%
        \hi@pse@read{#1}%
            {\hi@pse@acc@addspc\hi@pse@acc@add\hi@pse@state@svr}% Word
            {\hi@pse@acc@ignore\hi@pse@state@svrspc}% space
            {\hi@pse@acc@setparamcite\hi@pse@svr}% ;
            {\hi@pse@state@svr@testpunct{ }}% punct
            {\hi@pse@acc@setparamcite\hi@pse@svr{}{}}% eof
    }%
}
\def\hi@pse@state@svr@testpunct#1#2#3{%
    %\hi@pse@debug{svr@testpunct{#1}{#2}{#3}}%
    \find@try\find@eq{%
        {[}{\hi@pse@acc@setparam\hi@pse@svr\hi@pse@state@opt{#2}{#3}}%
        {(}{\hi@pse@acc@setparam\hi@pse@svr\hi@pse@state@paren{#2}{#3}}%
    }{#2}{\hi@pse@acc@add\hi@pse@state@svr{#1#2}{#3}}%
}
\def\hi@pse@state@opt#1{%
    %\hi@pse@debug{State opt; reading #1}%
    \find@in{]}{#1}\hi@pse@state@opt@set{%
        \hi@pse@error{EOF}{ before option parsing finished}%
    }%
}
\def\hi@pse@state@opt@set#1#2{%
    \hi@pse@acc@saveparam\hi@pse@opt{#1}%
    \hi@pse@state@afteropt{#2}%
}
\def\hi@pse@state@afteropt#1{%
    %\hi@pse@debug{State afteropt; reading #1}%
    \find@try\find@start{%
        % The trailing argument of the \find@start callback is the remaining
        % text to be parsed, thus passed to the next state. Accumulators were
        % cleared at state@opt so they are in the right status.
        {at }{\hi@pse@state@page}%
        { }{\hi@pse@state@afteropt}%
        {;}{\hi@pse@acc@setcite{}}% Extra arg needed for acc@setcite
        {(}{\hi@pse@state@paren}%
    }{#1}{%
        \ifstrempty{#1}{\hi@pse@acc@setcite{}{}}{%
            \hi@pse@error{Invalid text after optional arg}{#1}%
        }%
    }%
}
\def\hi@pse@state@page#1{%
    %\hi@pse@debug{State page; reading #1}%
    \hi@pse@read{#1}%
        {\hi@pse@acc@add\hi@pse@state@page}% word
        {\hi@pse@acc@ignore\hi@pse@state@pagespc}% Space
        {\hi@pse@acc@setparamcite\hi@pse@page}% semicolon
        {\hi@pse@acc@add\hi@pse@state@page}%
        {\hi@pse@acc@setparamcite\hi@pse@page{}{}}%
}
\def\hi@pse@state@pagespc#1{%
    %\hi@pse@debug{State pagespc; reading #1}%
    \find@try\find@start{%
        {;}{\hi@pse@acc@setparamcite\hi@pse@page{}}%
        {(}{\hi@pse@acc@setparam\hi@pse@page\hi@pse@state@paren{}}%
    }{#1}{%
        \ifstrempty{#1}{\hi@pse@acc@setparamcite\hi@pse@page{}{}}{%
            \hi@pse@acc@addspc\hi@pse@state@page{#1}%
        }%
    }%
}
\def\hi@pse@state@paren{\hi@pse@state@paren@count{i}{}}%
\def\hi@pse@state@paren@count#1#2#3{%
    %\hi@pse@debug{State paren@count; reading #3}%
    \find@next{#3}%
        \hi@pse@state@paren@add
        \hi@pse@state@paren@addgrp
        \hi@pse@state@paren@test
        {\hi@pse@error{EOF}{ before parenthetical parsing finished}}%
    {#1}{#2}%
}
\def\hi@pse@state@paren@add#1#2#3#4{%
    \hi@pse@state@paren@count{#3}{#4#1}{#2}%
}
\def\hi@pse@state@paren@addgrp#1#2#3#4{%
    \hi@pse@state@paren@count{#3}{#4{#1}}{#2}%
}
\def\hi@pse@state@paren@test#1#2#3#4{%
    \find@try\find@eq{%
        {(}{\hi@pse@state@paren@add{#1}{#2}{#3i}{#4}}%
        {)}{\hi@pse@state@paren@dec{#1}{#2}{#4}#3\@stop}%
    }{#1}{\hi@pse@state@paren@add{#1}{#2}{#3}{#4}}%
}
\def\hi@pse@state@paren@dec#1#2#3#4#5\@stop{%
    \ifstrempty{#5}{%
        \hi@pse@acc@saveparam\hi@pse@paren{#3}%
        \hi@pse@state@afterparen{#2}%
    }{%
        \hi@pse@state@paren@add{#1}{#2}{#5}{#3}%
    }%
}
\def\hi@pse@state@afterparen#1{%
    %\hi@pse@debug{State afterparen; reading #1}%
    \ifstrempty{#1}{%
        \hi@pse@acc@setcite{}{}% EOF; treat like a semicolon
    }{%
        \find@try\find@start{%
            {(}{\hi@pse@state@paren}%
            {;}{\hi@pse@acc@setcite{}}%
            { }{\hi@pse@state@afterparen}%
        }{#1}{\hi@pse@error{Invalid text after parenthetical}{#1}}%
    }%
}
\make@find@in{ }
\make@find@in{]}
\make@find@start{at }
\make@find@start{(}
\make@find@start{;}
\make@find@start{ }
\make@find@eq{[}
\make@find@eq{(}
\make@find@eq{)}
\make@find@eq{;}
\make@find@eq{ }
\def\hi@pse@debug#1{\immediate\write16{\detokenize{#1}}}
%%
%% \iffalse filename: signals.dtx \fi
%%
\let\hi@pse@findlist\@empty
\def\AddSignal#1#2{%
    \prepend@macro\hi@pse@findlist{%
        {#1 }{\hi@pse@sigvolref@withsig{#1}}%
    }%
    \make@find@start{#1 }%
    \@namedef{hi@sig@#1}{#2}%
}
\def\hi@sig@{s}
\AddSignal{see}{s}
\AddSignal{see, e.g.,}{s}
\AddSignal{see also}{s}
\AddSignal{see also, e.g.,}{s}
\AddSignal{e.g.,}{s}
\AddSignal{accord}{s}
\AddSignal{accord, e.g.,}{s}
\AddSignal{cf.}{s}
\AddSignal{compare}{p}
\AddSignal{and}{p}
\AddSignal{with}{p}
\AddSignal{contra}{c}
\AddSignal{but see}{c}
\AddSignal{but see, e.g.,}{c}
\AddSignal{but cf.}{c}
\AddSignal{see generally}{b}
\def\hi@signals@init{%
    \let\hi@signals@last\relax
}
\def\hi@signals@set#1#2{%
    \def\hi@signals@this{#1}%
    \@test\ifx\hi@signals@last\relax\fi{%
        %
        % If this is the first signal.
        \expandafter\hi@signals@drawfirst\expandafter{\hi@signals@this}%
    }{%
        %
        % If this is not the first signal. If the signal is empty, it defaults
        % to the last signal.
        \ifx\hi@signals@this\@empty
            \let\hi@signals@this\hi@signals@last
        \fi
        \@expand{%
            \@expand{\hi@signals@drawmid}{%
                \csname hi@sig@\hi@signals@this\endcsname
            }{i}%
        }{\csname hi@sig@\hi@signals@last\endcsname}{i}%
    }{%
        %
        % We tack on, before the callback, an update to the signal state that
        % should happen right before we give control to the callback.
        %
        \let\hi@signals@last\hi@signals@this#2%
    }%
}
\def\hi@signals@drawfirst#1#2{%
    \ifstrempty{#1}{#2{}{}}{#2{}{\hi@fn@sig{#1}\ }}%
}
\def\hi@signals@drawmid#1#2#3{%
    \@test\ifx\hi@signals@last\hi@signals@this\fi{%
        % For identical signals, no text given
        \hi@signals@punct{}% See extra args later
    }{%
        \@test\ifx#2\hi@sig@contra\fi{%
            % If the previous citation signal was negative, drop any "but" from
            % this citation signal.
            \@expand{\find@start{but }}{\hi@signals@this}{i}{%
                % One arg comes from \find@start; the rest are below
                \hi@signals@fmt
            }{\expandafter\hi@signals@fmt\expandafter{\hi@signals@this}}%
        }{%
            \expandafter\hi@signals@fmt\expandafter{\hi@signals@this}%
        }%
    }{#1}{#2}{#3}% These args get tacked on no matter what
}
\make@find@start{but }
\def\hi@signals@fmt#1{\hi@signals@punct{\hi@fn@sig{#1}\ }}
\def\hi@signals@punct#1#2#3#4{%
    \@test\ifx#2#3\fi{%
        %
        % Same signal class. Use semicolon or comma depending on if it's
        % compare.
        %
        \@test\ifx#2\hi@sig@compare\fi{#4{,}{#1}}{#4{;}{#1}}%
    }{%
        % Different signal class. Depending on whether this is a sentence or
        % clause, choose punctuation.
        \@test\if@hi@sent\fi{%
            #4{\if@hi@dot\@re@dot@space\else.\fi\@hi@captrue}{#1}%
        }{%
            \@test\ifx#2\hi@sig@compare\fi{#4{,}{#1}}{#4{;}{#1}}%
        }%
    }%
}
%%
%% \iffalse filename: pages.dtx \fi
%%
\def\PageNumber#1{\@format@pageno{#1}}
\def\@format@page@macro#1{\expandafter\@format@pageno\expandafter{#1}}%
\def\@format@pageno#1{%
    \find@in{ ::}{#1}{%
        \@tworun\hi@fpg@onesegment\@gobble
    }{\hi@fpg@onesegment{#1}}%
}
\def\hi@fpg@segment#1#2#3#4{%
    \find@in{ ::#2: }{#1}{#3\@tworun\@gobble\@format@pageno}{#4}%
}
\def\hi@fpg@defsegment#1{%
    \make@find@in{ ::#1: }%
}
\make@find@in{ ::}
\make@find@in{ to }
\def\hi@fpg@onesegment#1{%
    \find@in{ to }{#1}{\hi@fpg@to}{%
        \ifstrempty{#1}{}{\hi@fpg@split#1,\@stop{\hi@fpg@pagenumber{}{}}}%
    }%
}
\def\hi@fpg@to#1#2{%
    \@format@pageno{#1} to \@format@pageno{#2}%
}
\def\hi@fpg@split#1,#2\@stop#3{%
    %
    % In both of these branches of the conditional, we take advantage of the
    % fact that both |\hi@fpg@emitstate| and |\hi@fpg@split| receive the
    % state as the last argument, and \hi@fpg@one runs its callback with the
    % state as the last argument.
    %
    \ifblank{#1}{%
        % Ignore blank entries
        \ifblank{#2}{\hi@fpg@emitstate}{\hi@fpg@split#2\@stop}{#3}%
    }{%
        \hi@fpg@one#1\@stop{#3}{%
            \ifblank{#2}{\hi@fpg@emitstate}{\hi@fpg@split#2\@stop}%
        }%
    }%
    \hi@fpg@done
}

\def\hi@fpg@emitstate#1{%
    \@secondofthree#1%
}
\def\hi@fpg@one#1#2\@stop#3#4{%
    \find@start{at }{#1#2}{\hi@fpg@at}{%
        \@ifletter{#1}{\hi@fpg@letter{#1#2}}{%
            \@ifdigit{#1}{\hi@fpg@number{#1#2}}{%
                \hi@fpg@symbol{#1}{#2}%
            }%
        }%
    }{#3}{#4}% Arguments to all macros
}
\make@find@start{at }
\make@find@in{ }
\def\hi@fpg@at#1#2#3{%
    \hi@fpg@emitstate{#2}%
    at % space
    \hi@fpg@pagenumber{#1}{#3}%
}
\def\hi@fpg@number#1#2#3{%
    \hi@fpg@number@#2\@stop{#1}{#3}%
}%
\def\hi@fpg@number@#1#2\@stop#3#4{%
    \@secondoftwo#2%
    #1{#3}{#4}%
}
\def\hi@fpg@letter#1#2#3{%
    \hi@fpg@emitstate{#2}%
    \hi@fpg@division{#1}{\hi@fpg@nextdivision}{#3}%
}
\def\hi@fpg@symbol#1#2#3#4{%
    \find@eq{/}{#1}{\hi@fpg@subsection{#2}{#3}{#4}}{%
        \find@try\find@eq{%
            {-}{\hi@fpg@letter{ #2}{#3}{#4}}%
            {!}{\hi@fpg@number{\hi@pgnum@raw#2}{#3}{#4}}%
            {*}{\hi@fpg@emitstate{#3}*\hi@fpg@pagenumber{#2}{#4}}%
            {?}{%
                \hi@pgnum@raw % so atorsect works
                \protect\hi@fpg@missingpg{#1#2}\hi@fpg@plain{#1#2}{#3}{#4}%
            }%
        }{#1}{%
            % None of the tests succeeded
            \protect\hi@fpg@unexpectedchar{#1#2}%
            \hi@fpg@plain{#1#2}{#3}{#4}%
        }%
    }%
}
\make@find@eq{-}
\make@find@eq{/}
\make@find@eq{*}
\make@find@eq{!}
\make@find@eq{?}
\def\hi@pgnum@raw{\noexpand\hi@pgnum@raw}
\def\hi@fpg@unexpectedchar#1{%
    \PackageWarning\hi@pkgname{%
        Page number `#1' starts with an unexpected character.\MessageBreak
        If it is meant to be a page number, then precede it\MessageBreak
        with the `!' symbol. It appeared%
    }%
}
\def\hi@fpg@missingpg#1{%
    \@expandarg\hi@missing@page{\@this@case}%
}
\def\hi@fpg@done{\iffalse\hi@fpg@done\fi}
\def\hi@fpg@comma#1{\ifx\hi@fpg@done#1\else, \fi#1}
\def\hi@fpg@singlenum#1{%
    \find@in@cs{/-}{#1}{\hi@fpg@singlenum@dash}{#1}%
}
\def\hi@fpg@singlenum@dash#1#2{%
    #1-\hi@fpg@singlenum{#2}%
}
\def\hi@fpg@plain#1#2#3{%
    \hi@fpg@emitstate{#2}%
    #1% Output the page number as specified
    #3{\hi@fpg@pagenumber{}{}\hi@fpg@comma}%
}
\def\hi@fpg@pagenumber#1#2{%
    \find@in{ & }{#1}{%
        \hi@fpg@pgno@withdivision{ \& }%
    }{%
        \find@in{ }{#1}{%
            \hi@fpg@pgno@withdivision{ }%
        }{\hi@fpg@pgno@nosuffix{#1}}%
    }{#2}%
}
\make@find@in{ }
\make@find@in{ & }
\def\hi@fpg@pgno@withdivision#1#2#3#4{%
    \chop@space@then@run{#2}\hi@fpg@pgrange
    #1%
    \hi@fpg@division{#3}{\hi@fpg@nextdivisionamp}{#4}%
}
\def\hi@fpg@pgno@nosuffix#1#2{%
    \chop@space@then@run{#1}\hi@fpg@pgrange
    #2{\hi@fpg@pagenumber{}{}\hi@fpg@comma}%
}
\def\hi@fpg@pgrange#1{%
    \find@in{-}{#1}\hi@fpg@pgrange@withdash{\hi@fpg@singlenum{#1}}%
}
\make@find@in{-}
\def\hi@fpg@pgrange@withdash#1#2{%
    \hi@fpg@singlenum{#1}%
    \find@in@cs{/-}{#1#2}{ to \@gobbletwo}{--}%
    \hi@fpg@toend#1\@mark\@mark#2\@mark\@mark\@stop
}
\def\hi@fpg@toend#1#2\@mark#3\@mark#4#5\@mark#6\@mark#7\@stop{%
    \ifstrempty{#2}{% If we're done traversing the first number
        \ifstrempty{#5}{% If we're done traversing the second number
            \ifstrempty{#3}{#7}{}% If #3 is empty, throw in #7
            \hi@fpg@singlenum{#3#4}%
        }{\hi@fpg@singlenum{#6#7#3#4#5}}% Print the numbers in full
    }{% We're not done traversing the first number
        % If we're done traversing the second number, print them in full
        \ifstrempty{#5}{\hi@fpg@singlenum{#6#7#3#4#5}}{%
            % We're not done with either number
            \ifstrempty{#3}{% If there's no dissimilar stuff
                \ifx#1#4% If the first digits are the same
                    \expandafter\@firstoftwo\else\expandafter\@secondoftwo\fi
                {\hi@fpg@toend#2\@mark\@mark#5\@mark#6#7\@mark#4\@stop}%
                    % First two digits are different
                {\hi@fpg@toend#2\@mark#4\@mark#5\@mark#6#7\@mark\@stop}%
            }{% There is some dissimilar stuff
                \hi@fpg@toend#2\@mark#3#4\@mark#5\@mark#6#7\@mark\@stop
            }%
        }%
    }%
}
\def\hi@fpg@division#1#2#3{%
    \find@in{ }{#1}{%
        \hi@fpg@division@numbered{#2}{#3}%
    }{%
        \hi@fpg@divname{#1}{}%
        #3{\hi@fpg@pagenumber{}{}\hi@fpg@comma}%
    }%
}
\def\hi@fpg@division@numbered#1#2#3#4{%
    \hi@fpg@ifrange{#4}{%
        %
        % For a range, output the plural division name (it must be plural) and
        % the division number, and proceed to the next chunk. No comma is put
        % into the plural form state because we don't know if it should be an
        % ampersand.
        %
        \hi@fpg@divname{#3}\hi@fpg@plural
        \hi@fpg@divno{#4}%
        #2{#1{\hi@fpg@comma}{}}%
    }{%
        % If it's not a range, then we don't know if it will be singular or
        % plural. Update the state to include the singular and plural values and
        % then proceed to the next chunk.
        #2{#1{%
                \hi@fpg@divname{#3}\hi@fpg@singular
                \hi@fpg@divno{#4}\hi@fpg@comma
            }{%
                \hi@fpg@divname{#3}\hi@fpg@plural
                \hi@fpg@divno{#4}%
            }%
        }%
    }%
}
\make@find@in{-}
\make@find@in{-/}
\def\hi@fpg@ifrange#1#2#3{%
    \find@in{-/}{#1}{\@firstofthree{#3}}{%
        \find@in{-}{#1}{\@firstofthree{#2}}{#3}%
    }%
}
\def\hi@fpg@divname#1#2{%
    \@ifundefined{hi@div@#1}{%
        \ifstrempty{#1}{}{%
            \protect\hi@fpg@warngraph{#1}%
            #1\space
        }%
    }{%
        \ifstrempty{#2}{%
            \@expand\chop@space{\csname hi@div@#1\endcsname}{iii}%
        }{%
            \@expand{\hi@fpg@handlespc#2}{\csname hi@div@#1\endcsname}{ii}%
        }%
    }%
}
\def\hi@fpg@handlespc#1#2{%
    \@expand\hi@fpg@handlespc@{#1{#2}}{ii}%
}
\def\hi@fpg@handlespc@#1{%
    \find@end{ }{#1}{\@unbrace}{#1\@gobble}{~}%
}
\def\hi@fpg@plural#1{\@thirdofthree#1}
\def\hi@fpg@singular#1{\@secondofthree#1}
\def\hi@fpg@warngraph#1{%
    \PackageWarning\hi@pkgname{%
        Word `#1' is not a defined division name.\MessageBreak
        Consider placing an exclamation mark before the\MessageBreak
        page number to avoid this message.\MessageBreak
        It appeared}%
}
\def\hi@fpg@nextdivision#1#2{%
    , \hi@fpg@divno{#1}%
    #2{\hi@fpg@nextdivision{\hi@fpg@comma}{}}%
}
\def\hi@fpg@nextdivisionamp#1#2{%
    #2{\hi@fpg@nextdivisionamp{%
            \space\&\space
            \hi@fpg@divno{#1}\hi@fpg@comma
        }{%
            , \hi@fpg@divno{#1}%
        }%
    }%
}
\def\hi@fpg@divno#1{%
    \find@in{-}{#1}{\hi@fpg@divno@dash}{\hi@fpg@divno@single{#1}}%
}
\make@find@in{-}
\def\hi@fpg@divno@dash#1#2{%
    \hi@fpg@divno@single{#1}%
    \find@in@cs{/-}{#1#2}{ to \@gobbletwo}{--}%
    \hi@fpg@divno@single{#2}%
}
\make@find@in@cs{/-}{\-}
\def\hi@fpg@divno@single#1{%
    \find@in{/}{#1}{%
        \@tworun\hi@fpg@singlenum\hi@parenize
    }{\hi@fpg@singlenum{#1}}%
}
\def\hi@fpg@subsection#1#2#3{%
    \hi@fpg@subsection@alterstate{#1}{#3}#2\@stop
}
\def\hi@fpg@subsection@alterstate#1#2#3#4#5#6\@stop{%
    #2{%
        {#3}%
        {#4\hi@parenize{#1}\hi@fpg@comma}%
        {#5\hi@fpg@comma\hi@parenize{#1}}%
        #6%
    }%
}
\def\hi@parenize#1{%
    \ifstrempty{#1}{}{%
        \hi@psize#1\@stop s%
    }%
}
\def\hi@psize#1#2\@stop#3{%
    \@ifonechar{#1}{%
        \@testcase
        \ifx#1(\fi {% )
            \hi@psize@close#3\hi@psize@paren#2\@stop
        }%
        \ifx#1[\fi {% ]
            \hi@psize@close#3\hi@psize@bracket#2\@stop
        }%
        \default{%
            \@ifletter{#1}{%
                \hi@psize@close#3(\hi@psize@ltr{#1})%
                \ifstrempty{#2}{}{\hi@psize#2\@stop o}%
            }{%
                \hi@psize@noopen#3#1%
                \ifstrempty{#2}{)}{\hi@psize#2\@stop n}%
            }%
        }%
    }{%
        \hi@psize@close#3#1\ifstrempty{#2}{}{\hi@psize#2\@stop o}%
    }%
}
\def\hi@psize@paren#1)#2\@stop{(#1)\ifstrempty{#2}{}{\hi@psize#2\@stop o}}
\def\hi@psize@bracket#1]#2\@stop{[#1]\ifstrempty{#2}{}{\hi@psize#2\@stop o}}
\mathchardef\hi@psize@penaltysize=9999
\def\hi@psize@penalty{\penalty\hi@psize@penaltysize}
\def\hi@psize@close#1{\ifx#1n)\fi\ifx#1s\else\hi@psize@penalty\fi}
\def\hi@psize@noopen#1{\ifx#1n\else\ifx#1s\else\hi@psize@penalty\fi(\fi}
\def\hi@psize@ltr#1{\ifx#1l\hi@fn@ell{l}\else#1\fi}
\def\hi@abbrev#1#2#3#4{%
    \@namedef{hi@div@#1}{\@firstoftwo{#2}{#4}}%
    \@namedef{hi@div@#3}{\@secondoftwo{#2}{#4}}%
    \csletcs{hi@div@\chop@space{#4}}{hi@div@#3}%
    \csletcs{hi@div@\chop@space{#2}}{hi@div@#1}%
}
\input hi-divisions
\def\reserved@a#1#2{%
    \@namedef{hi@div@#1}{\@firstoftwo{#2 }{#2#2 }}%
    \@namedef{hi@div@#1#1}{\@secondoftwo{#2 }{#2#2 }}%
}
\reserved@a S\textsection
\reserved@a P\textparagraph
\def\hi@pages@join#1#2{%
    \find@start{/}{#2}{%
        \find@in{/}{#1}%
            {\hi@pages@join@bothslash}%
            {\def\@this@orig@page{#1#2}\@gobble}%
    }{%
        \ifstrempty{#2}{\def\@this@orig@page{#1}}{\def\@this@orig@page{#2}}%
    }%
    \protected@edef\@this@page{\@format@page@macro\@this@orig@page}%
}
\make@find@start{/}
\make@find@in{/}
\def\hi@pages@join@bothslash#1#2#3{%
    \def\@this@orig@page{#1/#2#3}%
}
\def\TestJoinDivisions#1#2{%
    \begingroup
        \hi@pages@join{#1}{#2}%
        \@this@page
    \endgroup
}
\DeclareRobustCommand\hi@page@atorsect{%
    \expandafter\hi@atorsect@\@this@page.\@stop
}
\def\hi@atorsect#1{\hi@atorsect@#1.\@stop}
\def\hi@atorsect@withpage#1{\hi@atorsect{#1}#1}%
\make@find@eq{*}
\make@find@eq{?}
\def\hi@atorsect@#1#2\@stop{%
    \@ifdigit{#1}\@iden{%
        \find@try\find@eq{{*}\@iden{?}\@iden}{#1}{%
            \@test\ifx\hi@pgnum@raw#1\fi{\@iden}{\@gobble}%
        }%
    }{at }%
}
\def\hi@page@space#1{%
    \expandafter\hi@page@space@\expandafter{#1}%
}
\def\hi@page@space@#1{%
    \@ifendswithdigit{#1}{, \hi@page@atorsect}{%
        \find@eq{R.}{#1}{ at }{\space}%
    }%
}
\make@find@eq{R.}
\def\@ifendswithdigit#1{%
    \find@try\find@end{%
        0\@secondofthree 1\@secondofthree 2\@secondofthree 3\@secondofthree
        4\@secondofthree 5\@secondofthree 6\@secondofthree 7\@secondofthree
        8\@secondofthree 9\@secondofthree
    }{#1}\@secondoftwo
}
\make@find@end{0} \make@find@end{1} \make@find@end{2} \make@find@end{3}
\make@find@end{4} \make@find@end{5} \make@find@end{6} \make@find@end{7}
\make@find@end{8} \make@find@end{9}
\DeclareRobustCommand\hi@expand@symbols{\hi@expand@symbols@}
\def\hi@expand@symbols@#1#2{%
    \find@try\find@start@cs{%
        {SS}{\hi@expand@symbols@@{#2}{sections}{SS}}%
        {PP}{\hi@expand@symbols@@{#2}{paragraphs}{PP}}%
        {S}{\hi@expand@symbols@@{#2}{section}{S}}%
        {P}{\hi@expand@symbols@@{#2}{paragraph}{P}}%
    }{#1}{#2{#1}}%
}
\def\hi@expand@symbols@@#1#2#3#4{%
    #1{#2#4}%
}
\make@find@start@cs{S}{\textsection}
\make@find@start@cs{SS}{\textsection\textsection}
\make@find@start@cs{P}{\textparagraph}
\make@find@start@cs{PP}{\textparagraph\textparagraph}

\DeclareRobustCommand\hi@maybepage[1]{%
    \@test\ifx\@this@page\relax\fi{}{%
        \ifstrempty{#1}{\expandafter\@capnext}{#1\hi@dot@set{#1}}\@this@page
        \hi@dot@set@page
    }%
}
\DeclareRobustCommand\hi@ifpage{%
    \ifx\@this@page\relax
        \expandafter\@secondoftwo \else
        \expandafter\@firstoftwo\fi
}
\DeclareRobustCommand\hi@pageordefault[2]{%
    \@test\ifx\@this@page\relax\fi{%
        \ifstrempty{#2}{}{\@capnext#2\hi@dot@set{#2}}%
    }{%
        \ifstrempty{#1}{\expandafter\@capnext}{#1\hi@dot@set{#1}}\@this@page
        \hi@dot@set@page
    }%
}
\DeclareRobustCommand\hi@expandedpageordefault[2]{%
    \@test\ifx\@this@page\relax\fi{%
        \ifstrempty{#2}{}{\@capnext#2\hi@dot@set{#2}}%
    }{%
        \ifstrempty{#1}{%
            \expandafter\hi@expand@symbols\expandafter{\@this@page}{%
                \expandafter\@capnext\@iden
            }%
        }{%
            #1\expandafter\hi@expand@symbols\expandafter{\@this@page}\@iden
        }%
        \hi@dot@set@page
    }%
}
%%
%% \iffalse filename: parens.dtx \fi
%%
\def\hi@parens@reset{\let\hi@parens\@empty}
\DeclareRobustCommand\hi@parens@add[2]{%
    \expandafter\hi@parens@add@iterate\expandafter{\hi@parens}{}{#1}{#2}%
}
\def\hi@parens@add@iterate#1#2#3#4{%
    \ifstrempty{#1}{%
        \def\hi@parens{#2\@paren{#3}{#4}}%
    }{%
        \hi@parens@add@test#1\@stop{#2}{#3}{#4}%
    }%
}
\def\hi@parens@add@test#1#2#3#4\@stop#5#6#7{%
    \@test\ifnum#2>#6\fi{%
        % The currently tested parenthetical should follow this one.
        \def\hi@parens{#5\@paren{#6}{#7}\@paren{#2}{#3}#4}%
    }{%
        % The currently tested parenthetical should precede this one. Add it to
        % the list of already tested parentheticals and do the next iteration.
        \hi@parens@add@iterate{#4}{#5\@paren{#2}{#3}}{#6}{#7}%
    }%
}
\chardef\hi@paren@parallel=1             % Parallel citation
\chardef\hi@paren@date=2                 % Date parenthetical
\chardef\hi@paren@origdate=4             % Original date parenthetical
\chardef\hi@paren@docno=10               % Document number for court docs
\chardef\hi@paren@country=20             % Country name parenthetical
\chardef\hi@paren@casedocdocket=20       % Docket number for case document
\chardef\hi@paren@hia=30                 % Hereinafter
\chardef\hi@paren@casealt=40             % Alternate case name
\chardef\hi@paren@bookreview=50          % Book review citation
\chardef\hi@paren@opinion=60             % Opinion disposition (en banc, etc.)
\chardef\hi@paren@preparedby=70          % "prepared by" (R. 21.7.3)
\chardef\hi@paren@codified=80            % "to be codified at" for Fed. Reg.
\chardef\hi@paren@forthcomingms=80       % Page number for forthcoming article
\chardef\hi@paren@manuscript=90          % "unpublished manuscript"
\chardef\hi@paren@doc=100                % Document-level parenthetical
\chardef\hi@paren@url=111                % URL parenthetical
\chardef\hi@paren@accessdate=112         % URL access date
\def\reserved@a{link}\ifx\hi@urlstyle\reserved@a
    \chardef\hi@paren@url=110
    \def\hi@paren@showone#1#2{%
        \ifnum#1=\hi@paren@url
            ~\chop@space{#2}%
        \else
            \space(\chop@space{#2})%
        \fi
    }%
\fi
\chardef\hi@paren@cite=120               % Citation-level parenthetical
\chardef\hi@paren@prior=131              % Prior history of case
\chardef\hi@paren@subseq=133             % Subsequent history of case
\chardef\hi@paren@comment=205            % Commentary
\chardef\hi@paren@reprint=207            % "Reprinted in" parenthetical
\def\hi@paren@parse#1{%
    \find@try\find@in{%
        {ing: }{\hi@parens@parse@ing}%
        {codified at: }{\hi@parens@parse@codified{codified at}}%
        {codified as amended at: }{%
            \hi@parens@parse@codified{codified as amended at}%
        }%
        { in: }{\hi@parens@parse@cmt{ in}}%
        { by: }{\hi@parens@parse@cmt{ by}}%
        { at: }{\hi@parens@parse@cmt{ at}}%
        {footnote: }{\hi@parens@parse@fn}%
    }{#1}{\hi@parens@add\hi@paren@cite{#1}}%
}
\make@find@in{ing: }
\make@find@in{ in: }
\make@find@in{ by: }
\make@find@in{ at: }
\make@find@in{codified at: }
\make@find@in{codified as amended at: }
\make@find@in{footnote: }
\def\hi@parens@parse@ing#1#2{%
    \hi@parens@add\hi@paren@cite{#1ing \clause{#2}}%
}
\def\hi@parens@parse@codified#1#2#3{%
    \hi@parens@add\hi@paren@codified{#2#1 \clause{#3}}%
}
\def\hi@parens@parse@cmt#1#2#3{%
    \hi@parens@add\hi@paren@comment{\hi@fn@sig{#2#1} \clause{#3}}%
}
\def\hi@parens@parse@fn#1#2{%
    \ifstrempty{#1}{%
        \hi@defer@content{#2}%
    }{%
        \hi@parens@add\hi@paren@cite{#1footnote: #2}%
    }%
}
\let\hi@deferred@note@content\relax
\let\hi@deferred@note@endcontent\relax
\def\hi@defer@content#1{%
    \ifblank{#1}{}{%
        \ifx\hi@deferred@note@content\relax
            \gdef\hi@deferred@note@content{#1}%
        \else
            \gappto\hi@deferred@note@content{ #1}%
        \fi
    }%
}
\def\hi@deferred@note@enditem{%
    \ifx\hi@deferred@note@content\relax\else
        \if@hi@note\else
            \@expand{%
                \global\let\hi@deferred@note@content\relax
                \footnote
            }\hi@deferred@note@content i%
        \fi
    \fi
}
\def\hi@deferred@note@endstring{%
    \ifx\hi@deferred@note@content\relax\else
        \if@hi@note
            \ifx\hi@deferred@note@endcontent\relax
                \global\let\hi@deferred@note@endcontent\hi@deferred@note@content
            \else
                \xdef\hi@deferred@note@endcontent{%
                    \expandonce\hi@deferred@note@endcontent
                    \space
                    \expandonce\hi@deferred@note@content
                }%
            \fi
            \global\let\hi@deferred@note@content\relax
        \else
            \@expand{%
                \global\let\hi@deferred@note@content\relax
                \footnote
            }\hi@deferred@note@content i%
        \fi
    \fi
}
\def\hi@deferred@note@endnote{%
    \ifx\hi@deferred@note@endcontent\relax\else
        \unskip\space\hi@deferred@note@endcontent
        \global\let\hi@deferred@note@endcontent\relax
    \fi
}
\def\hi@parens@show{%
    \begingroup
    \def\@paren##1##2{%
        \@test \ifodd##1\fi{%
            ,
            \@hi@dotfalse
            ##2\hi@clause@endflag
            \if@endswithdot{##2}{\@hi@dottrue}%
        }{%
            \ifnum##1=\hi@paren@hia
                \if@hi@in@toa\else      % Not in TOA
                    \hi@short@maybeshow\@this@case{%
                        \space[hereinafter ##2]%
                    }%
                \fi
            \else
                \hi@parens@showone{##1}{##2}%
            \fi
            \@hi@dotfalse
        }%
    }%
    \@no@dot@space % This is because of the abbreviations in dates and such.
    \hi@parens
    \hi@dot@after@group
    \endgroup
}
\def\hi@parens@showone#1#2{%
    \space(\chop@space{#2})%
}
%%
%% \iffalse filename: toa.dtx \fi
%%
\newif\if@hi@in@toa
\newif\if@hi@toa@disabled
\let\disabletoa\@hi@toa@disabledtrue
\let\enabletoa\@hi@toa@disabledfalse
\def\hi@addtotoa#1#2{%
    \expandafter\hi@addtotoa@\csname tc@#1\endcsname{#1}{#2}%
}
\def\hi@addtotoa@#1#2#3{%
    \if@hi@in@toa\else \if@hi@toa@disabled\else
        \ifx#1\relax\else \ifx#1\@empty\else
            \addtocontents{toa}{%
                \protect\contentsline{hi@toa}{%
                    #2\@ifundefined{tcpg@#2}{}{\ifstrempty{#3}{}{ at #3}}%
                }{%
                    \thepage
                }{%
                    \noexpand\the\noexpand\c@page
                }{%
                    % We want this to run at the time the |\write| is executed.
                    \noexpand\expandonce\thepage
                }{%
                    #1%
                    \ifx\hi@toa@locationtag\relax\else ,\hi@toa@locationtag \fi
                }%
            }%
        \fi\fi
    \fi\fi
}
\def\hi@include@page@in@toa#1{%
    \global\@namedef{tcpg@#1}{}%
}
\def\hi@setuptoa{%
    \@hi@in@toatrue
    \global\let\@last@toatitle\relax
    \hi@toa@counter\z@
    \@input{\jobname.toa}%
    \@hi@in@toafalse
    \if@filesw
        \newwrite\tf@toa
        \immediate\openout\tf@toa \jobname.toa\relax
    \fi
    \global\let\hi@setuptoa\relax
}
\def\l@hi@toa#1#2#3#4#5{%
    \expandafter\hi@toa@addpg\csname hi@pg@#1\endcsname{#2}{#3}{#4}%
    \@for\hi@toa@tmp:=\@empty#5\do{%
        \@expand{\find@in{:}}\hi@toa@tmp{i}{\hi@toa@addtolist{#1}}{%
            \hi@toa@addtolist{#1}\hi@toa@tmp\hi@toa@tmp
        }%
    }%
}
\make@find@in{:}
\newcount\hi@toa@counter
\def\hi@toa@addtolist#1#2#3{%
    \IfKnownList{hi@toa@#2}{}{%
        \NewSortedList{hi@toa@#2}\SortEasyAlpha{%
            \hi@toa@makesortable{##1}{\def##2}%
        }%
        \ListElementsMustBeUnique{hi@toa@#1}%
    }%
    \IfListContains{hi@toa@#2}{#1}{}{%
        \AddToList{hi@toa@#2}{#1}%
        \hi@toa@sublist@add{#2}{#3}%
        \advance\hi@toa@counter\@ne
        \message{(\the\hi@toa@counter)}%
    }%
}
\def\hi@toa@makesortable#1#2{%
    \find@in{ at }{#1}{\hi@toa@makesortable@}{\hi@toa@makesortable@{#1}{}}{#2}%
}
\def\hi@toa@makesortable@#1#2#3{%
    \@expand\hi@toa@makesortable@@{%
        \csname\@ifundefined{lc@#1}{fc@#1}{lc@#1}\endcsname
    }{ii}{#2}{#3}%
}
\def\hi@toa@makesortable@@#1#2#3{%
    \uppercase{\StripForAlpha{#1#2}}{#3}%
}
\make@find@in{ at }
\def\hi@toa@sublist@add#1#2{%
    \expandafter\hi@toa@sublist@add@\csname hi@sublist@#1\endcsname{#2}%
}
\def\hi@toa@sublist@add@#1#2{%
    \ifx#1\relax
        \def#1{\hi@toa@sublist@singular{#2}}%
    \else
        \def\reserved@a{#2}
        \expandafter\hi@toa@sublist@update#1\@stop{}#1%
    \fi
}
\def\hi@toa@sublist@update#1#2#3\@stop#4#5{%
    \def\reserved@b{#2}%
    \@test \ifx\reserved@a\reserved@b\fi {%
        \def#5{#4\hi@toa@sublist@plural{#2}#3}%
    }{%
        \ifblank{#3}{%
            \edef#5{%
                \unexpanded{#4#1{#2}\hi@toa@sublist@singular}%
                {\expandonce\reserved@a}%
            }%
        }{%
            \hi@toa@sublist@update#3\@stop{#4#1{#2}}{#5}%
        }%
    }
}
\def\hi@toa@sublist@singular#1{%
    \find@in{/}{#1}{\hi@toa@sublist@choose\@firstoftwo}{#1}%
    \hi@toa@sublist@lookahead
}
\def\hi@toa@sublist@plural#1{%
    \find@in{/}{#1}{\hi@toa@sublist@choose\@secondoftwo}{#1}%
    \hi@toa@sublist@lookahead
}
\make@find@in{/}
\def\hi@toa@sublist@lookahead#1{%
    \ifx#1\@empty\else
        \expandafter\hi@toa@sublist@lookahead@\expandafter#1%
    \fi
}
\def\hi@toa@sublist@lookahead@#1#2#3{%
    \@test \ifx#3\@empty \fi{%
        \space and\space #1{#2}#3%
    }{%
        ,\space#1{#2}#3%
    }%
}
\def\hi@toa@sublist@choose#1#2#3{%
    #2\find@in{/}{#3}{#1}{#1{}{#3}}%
}
\DeclareRobustCommand\hi@toa@sublist@show[1]{%
    \csname hi@sublist@#1\endcsname\@empty
}
\def\AuthorityTag#1{%
    \def\hi@toa@locationtag{#1}%
}
\let\hi@toa@locationtag\relax
\def\hi@toa@addpg#1#2#3#4{%
    \@test \ifx#1\relax\fi {%
        \def#1{{}{#3}{#4}{*:#2}}%
    }{%
        \expandafter\hi@toa@addpg@#1#1{#2}{#3}{#4}%
    }%
}
\def\hi@toa@addpg@#1#2#3#4#5#6#7#8{%
    \def\reserved@a{#3}\def\reserved@b{#8}%
    \ifx\reserved@a\reserved@b
        \@tempcnta=#2\relax
        \ifnum#7=\@tempcnta
            \def#5{{#1}{#2}{#3}{*#4}}%
        \else
            \advance\@tempcnta\@ne
            \ifnum#7=\@tempcnta
                \ifblank{#1}{%
                    \def#5{{#6}{#7}{#8}{*#4--}}%
                }{%
                    \def#5{{#6}{#7}{#8}{*#4}}%
                }%
            \else
                \def#5{{}{#7}{#8}{*#4#1, #6}}%
            \fi
        \fi
    \else
        \def#5{{}{#7}{#8}{*#4#1, #6}}%
    \fi
}
\def\hi@toa@usepg#1#2{%
    \@expand{\@unbrace\hi@toa@usepg@}{\csname hi@pg@#1\endcsname}{ii}{#2}%
}
\def\hi@toa@usepg@#1#2#3#4#5{%
    \find@in{:}{#4#1}{%
        \@tworun\@gobble\hi@toa@usepg@passim
    }{\ThisShouldNeverBeReached}{#5}%
}
\make@find@in{:}
\def\hi@toa@usepg@passim#1#2{%
    \@test \ifnum\c@passimnum>\z@ \fi{%
        \hi@toa@usepg@passim@{1}#1, \@stop{#1}{#2}%
    }{#2{#1}}%
}
\def\hi@toa@usepg@passim@#1#2, #3\@stop#4#5{%
    \@test \ifnum#1<\c@passimnum \fi{%
        \ifstrempty{#3}{#5{#4}}{%
            \@expandarg\hi@toa@usepg@passim@{%
                \number\numexpr#1+1\relax
            }#3\@stop{#4}{#5}%
        }%
    }{#5{\PassimText}}%
}
\def\hi@toa@refcount#1#2{%
    \@expand{\@unbrace\hi@toa@refcount@}{\csname hi@pg@#1\endcsname}{ii}{#2}%
}
\def\hi@toa@refcount@#1#2#3#4#5{%
    \find@in{:}{#4}{\hi@toa@refcount@@}{\ThisShouldNeverBeReached}{#5}%
}
\def\hi@toa@refcount@@#1#2#3{\hi@toa@refcount@@@{1}#1\@stop{#3}}%
\def\hi@toa@refcount@@@#1#2#3\@stop#4{%
    \ifstrempty{#3}{#4{#1}}{%
        \@expandarg\hi@toa@refcount@@@{\number\numexpr#1+1\relax}#3\@stop{#4}%
    }%
}
\newcount\hi@toa@starcount
\def\hi@toa@star#1{%
    \ifnum\hi@toa@starcount>\z@
        \ifnum\hi@toa@refcount{#1}\@iden<\hi@toa@starcount\else
            \everypar{\StarMark\everypar{}}%
        \fi
    \fi
}
\def\StarCount#1{\hi@toa@starcount=#1\relax}
\def\StarText{%
    Authorities upon which this brief primarily relies are indicated with
    asterisks in the margin.\par
}
\def\StarMark{\llap{* }}
\def\tableofauthorities{%
    \ifnum\hi@toa@starcount>\z@
        \StarText
    \fi
    \begingroup
        \def\do##1{%
            \AuthorityTable[%
                \toaheading{\hi@toa@sublist@show{##1}}\par
                \ifdim\lastskip<\toaskip
                    \vskip-\lastskip
                \else
                    \vskip-\toaskip
                \fi
                \parindent\z@
                \parskip=\toaskip
            ]{##1}%
        }%
        \hi@type@doforall
    \endgroup
}
\def\toaheading{\section*}
\newcommand\AuthorityTable[2][]{%
    \hi@setuptoa
    \@hi@in@toatrue
    \noid
    \IfKnownList{hi@toa@#2}{\IfEmptyList{hi@toa@#2}{}{%
        #1%
        \ShowList{hi@toa@#2}{%
            \global\let\@this@toatitle\relax
            \hi@toa@usepg{##1}{\@toaline{\hi@toa@star{##1}\toacite{##1}}}%
            \global\let\@last@toatitle\@this@toatitle
        }%
    }}{}%
    \@hi@in@toafalse
}
\def\@toaline#1#2{%
    {\hi@toa@par@settings
    #1\nobreak
    \TOALeader
    \nobreak
    {\normalfont \normalcolor \hi@toa@brkpg{#2}}%
    \par}%
}
\def\hi@toa@par@settings{%
    \leftskip\z@\rightskip \@tocrmarg
    % Make the right margin ragged. This is necessary because the ditto spacing
    % gets messed up on occasion due to space stretching.
    \rightskip=1\rightskip plus .1\hsize
    \parfillskip -\rightskip
    \hangindent\toahangindentlen\relax
    \parindent \z@\@afterindenttrue
    \interlinepenalty\@M
}
\def\TOALeader{%
    \leaders\hbox{%
        $\m@th \mkern \@dotsep mu\hbox{.}\mkern \@dotsep mu$%
    }\hskip 2em \@plus 1fill
}
\def\toacite#1{%
    \begingroup
    \let\clause\hi@clause
    \let\sentence\hi@sentence
    \hi@pse@parse{#1}{\hi@draw@citation{\@hi@captrue\@hi@senttrue}{}}%
    \endgroup
}
\def\hi@toa@brkpg#1{%
    \@tempcnta=9999\relax
    \@tempskipb=\hsize\@minus\hsize\relax
    \@tempskipa=\glueexpr \@tempskipb * -1 + 1\rightskip\relax
    \find@in{, }{#1}\hi@toa@brkpg@{\hbox{#1}}%
}
\make@find@in{, }
\def\hi@toa@brkpg@#1#2{%
    \hbox{#1,}%
    % Pull the page number to the right margin
    \nobreak\hskip-\rightskip
    % Now permit a line break. If the break is not accepted, nix the
    % right-margin glue above, insert a -1fil glue to counteract the |\hfil| to
    % come, and insert a space to separate the commas.
    \penalty\@tempcnta\hskip \@tempskipa\relax
    % Insert an |\hbox| and then an |\hfil|. If the line is broken, then the
    % |\hfil| will show up, pushing this page number to the right side of the
    % page. If the line is not broken here, then the -1fil glue from above will
    % counteract this glue, and nothing will result.
    \hbox{ }\nobreak\hskip\@tempskipb\relax
    % Reduce the penalty, to encourage later line breaks rather than earlier
    % ones
    \advance\@tempcnta\m@ne
    \find@in{, }{#2}\hi@toa@brkpg@{\hbox{#2}}%
}
\DeclareRobustCommand\hi@toa@dupauthor[2]{%
    \if@hi@in@toa
        \global\def\@this@toatitle{#2}%
        \hi@nocap
        \ifx\@this@toatitle\@last@toatitle
            \toaditto, % space
        \else
            #1{#2}, % space
        \fi
    \else
        #1{#2}, % space
    \fi
}
\DeclareRobustCommand\hi@toa@dupnone{\global\let\@this@toatitle\relax}%
\def\hi@toa@duptitle#1#2#3#4{%
    \global\def\@this@toatitle{#1#2}%
    \ifx\@this@toatitle\@last@toatitle
        \ifhmode \immediate\write16{BAD!!!!}\fi
        \penalty\z@
        \@tempdima=\pagegoal \advance\@tempdima-\pagetotal
        \advance\@tempdima-\pageshrink
        \ifdim\@tempdima<\baselineskip
            \ifvmode \break \fi
            \hi@citeguts{#1#2#3}%
        \else
            \setbox\@tempboxa=\hbox{#2}%
            \@tempdima=\wd\@tempboxa
            \ifstrempty{#1}{}{\advance\@tempdima\toahangindentlen\relax}%
            \ifdim 6em<\@tempdima \@tempdima=6em\relax\fi
            \setbox\@tempboxa=\hbox{\toaditto}%
            \ifdim\@tempdima<\wd\@tempboxa \@tempdima=\wd\@tempboxa \fi
            \hi@citeguts{%
                \leavevmode\hb@xt@\@tempdima{\hss \box\@tempboxa}%
                \hi@nocap
                #4%
            }%
        \fi
    \else
        \hi@citeguts{#1#2#3}%
    \fi
}
\newskip\toaskip
\toaskip=1\baselineskip \@plus .1\baselineskip \@minus .1\baselineskip
\newcounter{passimnum} \c@passimnum=\z@
\def\PassimText{\emph{passim}}
\def\toaditto{---\kern-.1em---\kern-.1em---}
\def\toahangindentlen{1.5em}
%%
%% \iffalse filename: endnotes.dtx \fi
%%
\let\EndnoteText\@gobble
\let\SectionNote\relax
\def\hi@useendnotes{%
    \newbox\hi@endnotes
    \long\def\@footnotetext##1{%
        \EndnoteText{%
            \reset@font\normalsize
            \parskip\z@
            \EndnoteFont
            \protected@edef\@currentlabel{%
               \csname p@footnote\endcsname\@thefnmark
            }%
            \color@begingroup
            \@makefntext{\ignorespaces##1}%
            \color@endgroup
        }%
    }%
    \long\def\EndnoteText##1{%
        \global\setbox\hi@endnotes\vbox{%
            \ifvoid\hi@endnotes\else
                \prevdepth\dp\hi@endnotes
                \unvbox\hi@endnotes
            \fi
            ##1%
        }%
    }
    \def\SectionNote{%
        \EndnoteText{%
            \vskip .7\baselineskip
            {\noindent\large\textbf{%
                \expandafter\@capnext\SectionName\space \@currentlabel
            }\par}%
            \penalty\@M
            \vskip .3\baselineskip
        }%
    }
    \def\EndnoteFont{}%
    \def\theendnotes{%
        \setbox\hi@endnotes\vtop{\unvbox\hi@endnotes}%
        \@tempskipa\baselineskip
        \multiply\@tempskipa\m@ne
        \advance\@tempskipa\prevdepth
        \advance\@tempskipa\ht\hi@endnotes
        \multiply\@tempskipa\m@ne
        \ifdim\@tempskipa>\z@ \vskip\@tempskipa \fi
        \unvbox\hi@endnotes
    }
    \AtEndDocument{%
        \ifvoid\hi@endnotes\else
            \PackageWarning\hi@pkgname{%
                Endnotes not displayed;\MessageBreak inserting them%
            }%
            \vskip\baselineskip
            \footnoterule
            \theendnotes
        \fi
    }%
}% End of |\hi@useendnotes|
%%
%% \iffalse filename: short.dtx \fi
%%
\def\hi@short@register#1#2#3{%
    \@ifundefined{hi@short@cite@#1}{%
        \StripForAlpha{#2}{\hi@short@register@duplicate{#1}}%
        \find@eq{y}{#3}{%
            \global\addto@macro\hi@short@user@list{#1,}%
            \global\expandafter\addto@list\csname hi@short@cite@#1\endcsname{%
                \hi@short@userdel{#1}%
            }%
        }{}%
    }{}%
}
\DeclareRobustCommand\hi@short@maybeshow[2]{%
    \@ifundefined{hi@short@nouser@#1}{#2}{}%
}
\DeclareRobustCommand\hi@short@use[1]{%
    %
    % Run the short citation instructions
    %
    \csname hi@short@cite@#1\endcsname
    %
    % Ensure that the instructions are only ever run once
    %
    \global\expandafter\let\csname hi@short@cite@#1\endcsname\relax
    \@ifundefined{hi@short@nouser@#1}{}{%
        \PackageWarning\hi@pkgname{%
            The user-defined short form for #1\MessageBreak
            was suppressed in the full citation but\MessageBreak
            was later used. Recompile (possibly twice)\MessageBreak
            to correct the full citation form.\MessageBreak
            This occurred%
        }%
    }%
}
\def\hi@short@register@duplicate#1#2{%
    \global\@namedef{hi@short@cite@#1}{\hi@short@testdup{#1}{#2}}%
}
\make@find@eq{y}%
\def\hi@short@testdup#1#2{%
    \@ifundefined{hi@short@name@#2}{%
        \global\@namedef{hi@short@name@#2}{#1}%
    }{%
        \@expand\hi@short@warnambig{%
            \csname hi@short@name@#2\endcsname
        }{ii}{#1}{#2}%
    }%
}
\def\hi@short@warnambig#1#2#3{%
    \def\reserved@a{#3}%
    \PackageWarning\hi@pkgname{%
        A short citation for reference `#2' is\MessageBreak
        ambiguous with a previously used short citation\MessageBreak
        for `#1'. The citation looks like:\MessageBreak
        \expandafter\strip@prefix\meaning\reserved@a\MessageBreak
        Please use a hereinafter form.\MessageBreak
        This occurred%
    }%
}
\def\hi@short@user@list{,}
\def\hi@short@userdel#1{%
    \def\reserved@a##1,#1,##2\@mark##3\@stop{%
        \ifstrempty{##3}{}{\gdef\hi@short@user@list{##1,##2}}%
    }%
    \expandafter\reserved@a\hi@short@user@list\@mark,#1,\@mark\@stop
}
\def\hi@short@nouser#1{%
    \global\@namedef{hi@short@nouser@#1}{}%
}
\def\hi@short@final{%
    \let\reserved@b\@empty
    \@for\reserved@a:=\hi@short@user@list\do{%
        \ifx\reserved@a\@empty\else
            \begingroup
                \let\protect\@unexpandable@protect
                \immediate\write\@auxout{%
                    \noexpand\hi@short@nouser{\reserved@a}%
                }%
            \endgroup
            \@ifundefined{hi@short@nouser@\reserved@a}{%
                \addto@macro\reserved@b{\@spaces}%
                \add@macro@to@macro\reserved@b\reserved@a
                \addto@macro\reserved@b{\MessageBreak}%
            }{}%
        \fi
    }%
    \ifx\reserved@b\@empty\else
        \PackageWarning\hi@pkgname{%
            The following short cite forms went unused:\MessageBreak
            \reserved@b
            They will be removed upon next compilation.\MessageBreak
        }%
    \fi
}
\AtEndDocument{\hi@short@final}
%%
%% \iffalse filename: draw.dtx \fi
%%
\def\hi@draw@citation#1#2#3{%
    %
    % Set up the environment
    \ifnum\hi@citelevel>\z@ \begingroup\fi
    \advance\hi@citelevel\@ne
    \hi@state@startstring
    \@hi@dotfalse
    \hi@signals@init
    %
    % The TOA sometimes needs to be in vertical mode.
    \if@hi@in@toa\else \leavevmode \fi
    %
    % Allow pre-citation hooks from the caller.
    #1%
    %
    % Execute the citation.
    #3%
    %
    % Execute post-citation hooks.
    #2%
    %
    % Clean up
    \hi@state@endstring
    \advance\hi@citelevel\m@ne
    \ifnum\hi@citelevel>\z@
        \if@hi@dot \aftergroup\@hi@dottrue \fi
        \endgroup
    \fi
}
\newcount\hi@citelevel
\def\hi@pse@cite#1{%
    \hi@state@startelt % Resets all the \@this@[x] macros to \relax
    \hi@parens@reset
    #1%
    \@ifundefined{mc@\@this@case}{}{\@nameuse{mc@\@this@case}}%
    \hi@draw@choosecite{\def\hi@draw@this@type}%
    \@testcase
        \ifx\hi@draw@this@type\hi@draw@idname\fi{\hi@note@advance@id}%
        \if@hi@name\fi{\hi@note@advance}%
        \default{\hi@note@advance@id}%
    \hi@draw@addtotoa
    \hi@draw@this@punct
    \@test\ifx\hi@draw@this@punct\@empty\fi{}{\hi@deferred@note@enditem\space}%
    \@hi@dotfalse
    \hi@draw@this@fmtsig
    \hi@draw@cite
    \hi@record@cite\@this@case
    \hi@state@endelt
    \hi@parens@show
    \hi@nocap
    \@hi@nametrue
}
\def\hi@draw@addtotoa{%
    \ifx\@this@page\relax
        \hi@addtotoa{\@this@case}{}%
    \else
        \hi@addtotoa{\@this@case}{\@this@orig@page}%
    \fi
}
\def\hi@draw@cite{%
    \@test\ifx\hi@draw@this@type\hi@draw@idname\fi{%
        \@ifundefined{\hi@draw@this@type @\@this@case}{%
            \hi@draw@id
        }{%
            \@nameuse{\hi@draw@this@type @\@this@case}%
        }%
    }{%
        \@ifundefined{\hi@draw@this@type @\@this@case}{%
            \hi@draw@cite@undefined
        }{%
            \@nameuse{\hi@draw@this@type @\@this@case}%
        }%
    }%
}
\def\hi@draw@cite@undefined{%
    \expandafter\hi@missing@cite\expandafter{\@this@case}%
    \textbf{\hi@usevol{}\@this@case\hi@maybepage{ at }}\hi@nocap
}
\def\hi@id{\hi@fn@latin{id.}\protect\@hi@dottrue}%
\def\hi@draw@idname{idc}
\def\hi@draw@id{%
    \hi@citeguts{%
        \@testcase
            \ifx\@this@vol\relax\fi{}%
            \ifx\@this@vol\@last@vol\fi{}%
            \default{\@this@vol\hi@nocap\space}%
        \hi@id
        \@test\ifx\@this@page\@last@page\fi{}{%
            \hi@pageordefault{%
                ~\hi@page@atorsect
            }{}%
        }%
    }%
}
\def\hi@pse@opt#1{\def\@this@opt{#1}}
\def\hi@pse@svr#1{\hi@pse@sigvolref{#1}\hi@draw@sigvolref}
\def\hi@draw@sigvolref#1#2#3{%
    %
    % Set the next signal, and receive the punctuation and formatted signal to
    % draw in the two given macros.
    %
    \hi@signals@set{#1}{\@twodef\hi@draw@this@punct\hi@draw@this@fmtsig}%
    %
    % Set the remaining state variables.
    \ifstrempty{#2}{}{\def\@this@vol{#2}}%
    \def\@this@case{#3}%
}
\def\hi@pse@page#1{%
    \def\@this@orig@page{#1}%
    \@ifundefined{pc@\@this@case}{%
        \protected@edef\@this@page{\@format@pageno{#1}}%
    }{%
        \@nameuse{pc@\@this@case}{#1}%
    }%
}
\def\hi@pse@paren#1{%
    \hi@paren@parse{#1}%
}
\def\hi@draw@choosecite#1{%
    \@testcase
        \if@hi@inline\fi{\hi@draw@choosecite@{#1}}%
        \ifx\@last@case\@this@case\fi{#1{idc}}%
        \default{%
            \ifx\@last@inline\@this@case \hi@noname \fi
            \hi@draw@choosecite@{#1}%
        }%
}
\def\hi@draw@choosecite@#1{%
    \@test\if@hi@in@toa\fi{%
        \@test \ifnum\hi@citelevel=\@ne\fi{%
            \hi@draw@choosecite@thatexists{lc}{fc}{#1}%
        }{#1{fc}}%
    }{%
        \hi@record@choose{\@this@case}{%
            #1{fc}%
        }{%
            \hi@draw@choosecite@thatexists{sc}{fc}{#1}%
        }%
    }%
}%

\def\hi@draw@choosecite@thatexists#1#2#3{%
    \@ifundefined{#1@\@this@case}{#3{#2}}{#3{#1}}%
}
\@namedef{mc@*}{%
    \ifx\@last@inline\relax
        \PackageError\hi@pkgname{Star citation must follow an inline
        citation}{Probably change the star citation out}%
        \def\@this@case{???}%
    \else
        % \hi@noname -- See \hi@draw@choosecite
        \let\@this@case\@last@inline
    \fi
}
\def\hi@missing@cites{}
\def\hi@missing@pages{}
\def\hi@missing@cite#1{%
    \expandafter\hi@missing@cite@\expandafter{\the\inputlineno}{#1}%
}
\def\hi@missing@cite@#1#2{%
    \@ifundefined{hi@miss@cite@#2}{%
        \g@addto@macro\hi@missing@cites{\hi@missing@display{#2}{l. #1}}%
        \expandafter\let\csname hi@miss@cite@#2\endcsname\@empty
    }{}%
}
\def\hi@missing@page#1{%
    \expandafter\hi@missing@page@\expandafter{\the\inputlineno}{#1}%
}
\def\hi@missing@page@#1#2{%
    \g@addto@macro\hi@missing@pages{\hi@missing@display{#2}{l. #1}}%
}
\def\hi@missing@display#1#2{%
    \space\space\space\space\pad@string{#1}{iiiiiiiiiiiiiiiiiiiiiiii} #2%
    \MessageBreak
}
\AtEndDocument{%
    \ifx\hi@missing@cites\@empty\else
        \PackageWarning\hi@pkgname{%
            The following citations were undefined:\MessageBreak
            \hi@missing@cites
        }%
    \fi
    \ifx\hi@missing@pages\@empty\else
        \PackageWarning\hi@pkgname{%
            The following citations were missing page numbers:\MessageBreak
            \hi@missing@pages
        }%
    \fi
}
%%
%% \iffalse filename: abbrevs.dtx \fi
%%
\def\AbbreviateFor#1#2{%
    \@nameuse{hi@abbrev@#1}{#2}{\@iden}%
}
\abb@new{cases}
\def\NotMainParty#1{\expandafter\let\csname nocite@#1\endcsname\NotMainParty}
\def\hi@abbrev#1#2{%
    \abb@add{cases}{#1}{#2}%
    \expandafter\let\csname hi@noabb@#1\endcsname\@empty
    \NotMainParty{#1}%
}
\input hi-places
\NotMainParty{People}
\NotMainParty{United States}
\NotMainParty{Commonwealth}
\NotMainParty{State}
\def\hi@abbrev#1#2{%
    \abb@add{cases}{#1}{#2}%
    \expandafter\let\csname hi@noabb@#1\endcsname\@empty
}
\input hi-names
\def\hi@abbrev@name#1#2{%
    \def\reserved@a{#1}%
    \@ifundefined{hi@noabb@\expandafter\strip@prefix\meaning\reserved@a}{%
        \abb@abbrev{cases}{#1}{\abb@initialdots}{.}{#2}%
    }{#2{#1}}%
}
\def\hi@abbrev@inlcase#1#2{%
    \abb@abbrev{inlcases}{#1}{\abb@initialdots}{.}{#2}%
}
\abb@new{inlcases}
\abb@add{inlcases}{and}{\&}
\abb@add{inlcases}{&}{\&}
\abb@add{inlcases}{Association}{Ass'n}
\abb@add{inlcases}{Brothers}{Bros.}
\abb@add{inlcases}{Company}{Co.}
\abb@add{inlcases}{Corporation}{Corp.}
\abb@add{inlcases}{Incorporated}{Inc.}
\abb@add{inlcases}{Limited}{Ltd.}
\abb@add{inlcases}{Number}{No.}
\def\hi@abbrev@leg#1#2{%
    \@ifundefined{hi@abbrev@leg@noabbrev@#1}{%
        \abb@abbrev{legis}{#1}{\abb@initialdots}{.}{#2}%
    }{#2{#1}}%
}
\abb@new{legis}
\def\hi@abbrev#1#2{%
    \abb@add{legis}{#1}{#2}%
}
\let\hi@abbrev@leg@noabbrev@Senate\@empty
\let\hi@abbrev@leg@noabbrev@House\@empty
\cslet{hi@abbrev@leg@noabbrev@House of Representatives}\@empty
\input hi-legis
\def\hi@abbrev@cdoc#1#2{%
    \abb@abbrev{cdoc}{#1}{\abb@initialdots}{.}{#2}%
}
\abb@new{cdoc}
\def\hi@abbrev#1#2{%
    \abb@add{cdoc}{#1}{#2}%
}
\input hi-courtdocs
\def\hi@abbrev@journal@check{%
    \hi@ifset\hi@kv@noabbrevjrn{}{%
        \expandafter\hi@abbrev@journal@check@\expandafter{\hi@kv@rep}%
    }%
}
\def\hi@abbrev@journal@check@#1{%
    \find@in{.}{#1}{%
        \hi@abbrev@journal@check@warn{#1}\@gobbletwo
    }{}%
    \hi@abbrev@journal{#1}{\def\hi@kv@rep}%
}
\make@find@in{.}
\def\hi@abbrev@journal@check@warn#1{%
    \PackageWarning\hi@pkgname{%
        Journal name `#1'\MessageBreak
        should be entered unabbreviated.\MessageBreak
        If this is okay, add the parameter\MessageBreak
        `noabbrevjrn'. This occurred%
    }%
}
\def\hi@abbrev@journal#1#2{%
    \find@start{The }{#1}{%
        \hi@abbrev@journal@word{The }%
    }{%
        \hi@abbrev@journal@word{}{#1}%
    }{#2}%
}
\def\hi@abbrev@journal@word#1#2#3{%
    \find@in{ }{#2}{%
        \@firstofthree{%
            \abb@abbrev{jab}{#2}{\abb@initialdots}{.}%
                    {\abb@initialdots}{\abb@dot}{#3}%
        }%
    }{#3{#1#2}}%
}
\make@find@start{The }
\make@find@in{ }
\let\hi@jrnabb@inferlvl\tw@
\abb@new{jab}
\def\hi@abbrev#1#2{%
    \abb@add{jab}{#1}{#2}
}
\input hi-places
\input hi-jrnplaces
\input hi-jrnwords
\hi@abbrev{The}{}
\hi@abbrev{the}{}
\hi@abbrev{of}{}
\hi@abbrev{at}{}
\hi@abbrev{de}{}
\hi@abbrev{in}{}
\hi@abbrev{,}{}
\def\ExplanatoryPhrase#1{%
    \find@end{,}{#1}{\hi@explanatoryphrase{,}}{\hi@explanatoryphrase{}{#1}}%
}
\make@find@end{,}
\def\hi@explanatoryphrase#1#2{%
    \abb@abbrev{expl}{#2}{\hi@explanatoryphrase@{#1}{#2}}%
}
\def\hi@explanatoryphrase@#1#2#3{%
    \@namedef{hi@exp@#2}{#3#1}%
    \@namedef{hi@exp@#3}{#3#1}%
    \@namedef{hi@exp@#2,}{#3#1}%
    \@namedef{hi@exp@#3,}{#3#1}%
}
\abb@new{expl}
\def\hi@abbrev#1#2{\abb@add{expl}{#1}{#2}}
\let\hi@multi@abbrev\ExplanatoryPhrase
\input hi-explanatory
\def\hi@abbrev@expl#1#2{%
    \@ifundefined{hi@exp@#1}{%
        \hi@abbrev@expl@warn{#1}%
        \abb@abbrev{expl}{#1}{#2}%
    }{%
        \@expand{#2}{\csname hi@exp@#1\endcsname}{ii}%
    }%
}
\def\hi@abbrev@expl@warn#1{%
    \PackageWarning\hi@pkgname{%
        In defining reference \@this@case, the explanatory\MessageBreak
        phrase `#1' was not previously\MessageBreak
        known. Use \string\ExplanatoryPhrase{#1} to\MessageBreak
        define it. Also, make sure your comma usage conforms\MessageBreak
        to T.9. This occurred%
    }%
}
%%
%% \iffalse filename: fonts.dtx \fi
%%
\let\hi@font@context@list\@empty
\def\hi@font@context@add#1#2{%
    \listadd\hi@font@context@list{#1}%
}
\hi@font@context@add{bookauthor}{Author of a book}
\hi@font@context@add{booktitle}{Title of a book}
\hi@font@context@add{congdoc}{Congressional document number}
\hi@font@context@add{hearing}{Hearing title}
\hi@font@context@add{arttitle}{Journal article title}
\hi@font@context@add{webtitle}{Website page title}
\hi@font@context@add{jrntitle}{Journal title}
\hi@font@context@add{caseproc}{Procedural phrase in a case}
\hi@font@context@add{casefc}{Case full name}
\hi@font@context@add{casesc}{Case short name}
\hi@font@context@add{const}{Constitution name}
\hi@font@context@add{statute}{Codified statute}
\hi@font@context@add{sig}{Signal}
\hi@font@context@add{comment}{Signal before commentary}
\hi@font@context@add{ell}{The letter (l) in subsections}
\hi@font@context@add{dateprefix}{The qualifier words before a date}
\hi@font@context@add{latin}{Latin words that are typically italicized}
\DeclareRobustCommand\@capemph[1]{%
    \emph{\@hi@emphtrue\@capnext#1}\hi@nocap
}
\newif\if@hi@emph
\DeclareRobustCommand\@capempht[1]{%
    \@test\if@hi@emph\fi{%
        \@caprm{#1}%
    }{%
        \emph{\@hi@emphtrue\let\eminnershape\relax\@capnext#1}\hi@nocap
    }%
}
\DeclareRobustCommand\hi@maybeemph{%
    \if@hi@emph\expandafter\@iden\else\expandafter\@capemph\fi
}
\DeclareRobustCommand\@capsc{\@capfont\textsc}
\DeclareRobustCommand\@caprm{\@capfont\@iden}
\def\MakeFontPack#1#2{%
    \csgdef{hi@fontpack@#1}{\forcsvlist\hi@font@dopack{#2}}%
}
\def\UseFontPack#1{\csname hi@fontpack@#1\endcsname}
\def\hi@font@dopack#1{\ifblank{#1}{}{\hi@font@dopack@#1\par}}
\def\hi@font@dopack@#1: #2/#3\par{%
    \edef\reserved@a{%
        \noexpand\hi@font@dopack@elt
            \expandonce{\csname hi@fn@#1\endcsname}%
            \expandonce{\csname @cap#2\endcsname}%
            \expandonce{\csname @cap#3\endcsname}%
    }\reserved@a
}
\def\hi@font@dopack@elt#1#2#3{%
    \DeclareRobustCommand#1{\@test \if@hi@inline \fi{#3}{#2}}%
}
\MakeFontPack{review}{%
    bookauthor: sc/rm,
    booktitle: sc/rm,
    congdoc: sc/empht,
    hearing: empht/empht,
    arttitle: empht/empht,
    webtitle: empht/empht,
    jrntitle: sc/empht,
    caseproc: empht/empht,
    casefc: rm/empht,
    casesc: empht/empht,
    const: sc/rm,
    statute: sc/rm,
    sig: emph/rm,
    comment: emph/rm,
    ell: emph/emph,
    dateprefix: rm/rm,
    latin: emph/emph%
}
\MakeFontPack{memo}{%
    bookauthor: rm/rm,
    booktitle: empht/empht,
    congdoc: empht/empht,
    hearing: empht/empht,
    arttitle: empht/empht,
    webtitle: empht/empht,
    jrntitle: rm/empht,
    caseproc: empht/empht,
    casefc: empht/empht,
    casesc: empht/empht,
    const: rm/rm,
    statute: rm/rm,
    sig: emph/rm,
    comment: emph/rm,
    ell: emph/emph,
    dateprefix: rm/rm,
    latin: emph/emph%
}
\MakeFontPack{italcase}{%
    caseproc: empht/empht,
    casefc: empht/empht,
    casesc: empht/empht,
}
\MakeFontPack{italdateprefix}{%
    dateprefix: empht/empht,
}
\UseFontPack{memo}
\appto\hi@hooks@review{\UseFontPack{review}}
\appto\hi@hooks@memo{\UseFontPack{memo}}
\DeclareRobustCommand\hi@italdateprefix[1]{%
    \begingroup
        \UseFontPack{italdateprefix}#1%
    \endgroup
}
\DeclareRobustCommand\UseFontFor[2]{%
    \ifinlist{#1}{\hi@font@context@list}{%
        \csname hi@fn@#1\endcsname{#2}%
    }{%
        \PackageWarning\hi@pkgname{Font context `#1' is unknown}%
        #2%
    }%
}
%%
%% \iffalse filename: state.dtx \fi
%%
\def\hi@allfullcites{}
\def\hi@addfullcite#1{\gappto\hi@allfullcites{\let#1\relax}}
\def\resetcitationforms{%
    \hi@allfullcites
    \gdef\hi@allfullcites{}%
    \def\do##1{%
        \@cslet\csname @last@##1\endcsname\relax
    }%
    \hi@state@list
}
\def\ShowCitationState#1{%
    \immediate\write16{For citation reference `#1',
        \@ifundefined{dfi@#1}{the full inline form will be used}{%
            \ifcase\csname dfi@#1\endcsname
                an illegal inline state was encountered%
                \or the short inline form will be used in footnotes only%
                \or the short inline form will be used%
                \else an illegal inline state was encountered%
            \fi
        }, and
        \@ifundefined{dfc@#1}{the full citation form will be used}{%
            \ifnum\csname dfc@#1\endcsname>\z@
                the full citation was used in footnote
                \csname dfc@#1\endcsname
            \else
                the full citation was used in text so the short form will be
                used%
            \fi
        }.%
    }%
}
\DeclareRobustCommand\hi@record@cite[1]{%
    \if@hi@in@toa\else
        \expandafter\hi@addfullcite\csname dfc@#1\endcsname
        \expandafter\hi@addfullcite\csname dfi@#1\endcsname
        \ifnum\hi@citelevel<\tw@
            \expandafter\hi@record@cite@inline\csname dfi@#1\endcsname
        \fi
        \if@hi@inline\else
            \expandafter\hi@record@cite@\csname dfc@#1\endcsname{#1}%
        \fi
    \fi
}
\def\hi@record@cite@inline#1{%
    \ifx#1\relax \let#1\z@ \fi
    \ifnum#1<\tw@
        \if@hi@note
            \if@hi@inline\else \expandafter\global \fi
            \let#1\@ne
        \else
            \global\let#1\tw@
        \fi
    \fi
}
\def\hi@record@cite@#1#2{%
    \ifx#1\relax
        \xdef#1{\if@hi@note \the\c@footnote \else 0\fi}%
    \else
        \if@hi@note
            \ifnum#1=\z@
                \xdef#1{-\the\c@footnote}%
            \else
                \@ifundefined{sc@#2@supra}{%
                    \xdef#1{\ifnum#1<\z@ -\fi\the\c@footnote}%
                }{}%
            \fi
        \else
            % In text, where this citation was previously used. Just make sure
            % the value is negative.
            \xdef#1{\ifnum#1>\z@ -\fi#1}%
        \fi
    \fi
}
\def\hi@record@choose#1{%
    \@test \if@hi@inline \fi{%
        \hi@record@choose@inline{#1}%
    }{%
        \hi@record@choose@cite{#1}%
    }%
}
\DeclareRobustCommand\hi@record@choose@inline[1]{%
    \@ifundefined{dfi@#1}{\@firstoftwo}{%
        \@test \ifnum\csname dfi@#1\endcsname=\tw@ \fi{\@secondoftwo}{%
            \@test \if@hi@note \fi{\@secondoftwo}{\@firstoftwo}%
        }%
    }%
}
\DeclareRobustCommand\hi@record@choose@cite[1]{%
    \expandafter\hi@record@choose@cite@\csname dfc@#1\endcsname{#1}%
}
\def\hi@record@choose@cite@#1#2{%
    \@test \ifx#1\relax \fi{\@firstoftwo}{%
        \@test \if@hi@note \fi{%
            \@test \ifnum #1>\z@ \fi{%
                \@ifundefined{sc@#2@supra}{%
                    \@tempcnta=\c@footnote
                    \advance\@tempcnta-5\relax
                    \@test \ifnum #1<\@tempcnta \fi
                }{\@secondoftwo}%
            }{\@secondoftwo}%
        }{%
            \@test \ifnum#1>\z@ \fi
        }%
    }%
}
\def\hi@record@firstfullcite#1{%
    \@ifundefined{dfc@#1}%
}
\def\hi@state@list{}
\def\hi@state@var#1{%
    \expandafter\ifx\csname hi@sv@inv@#1\endcsname\relax\else
        \PackageError\hi@pkgname{%
            State variable #1 already defined.\MessageBreak
            Redefining it
        }{}%
    \fi
    \addto@macro\hi@state@list{\do{#1}}%
    \@cslet \csname @this@#1\endcsname \relax
    \@cslet \csname @last@#1\endcsname \relax
    \@cslet \csname hi@sv@st@#1\endcsname \z@
    \@cslet \csname hi@sv@inv@#1\endcsname \@empty
    \hi@state@setinv{#1}{#1}%
}
\def\hi@state@setinv#1#2{%
    \edef\reserved@a{%
        \noexpand\let
        \expandafter\noexpand\csname hi@sv@st@#2\endcsname
        \noexpand\tw@
    }%
    \expandafter\add@macro@to@macro \csname hi@sv@inv@#1\endcsname\reserved@a
}
\hi@state@var{case}
\hi@state@var{orig@page}
\hi@state@var{page}
\hi@state@var{inline}
\hi@state@var{opt}
\hi@state@var{vol}
\hi@state@var{title}
\hi@state@setinv{page}{orig@page}
\hi@state@setinv{case}{page}
\hi@state@setinv{case}{orig@page}
\hi@state@setinv{case}{inline}
\hi@state@setinv{case}{opt}
\hi@state@setinv{case}{vol}
\hi@state@setinv{case}{title}
\hi@state@setinv{title}{vol}
\hi@state@setinv{title}{page}
\hi@state@setinv{title}{orig@page}
\hi@state@setinv{title}{opt}
\hi@state@setinv{vol}{title}
\hi@state@setinv{vol}{page}
\hi@state@setinv{vol}{orig@page}
\hi@state@setinv{vol}{opt}
\def\hi@state@startstring{%
    \def\do##1{\@cslet\csname hi@sv@st@##1\endcsname\z@}\hi@state@list
}
\def\hi@state@startelt{%
    \def\do##1{\@cslet\csname @this@##1\endcsname\relax}\hi@state@list
}
\def\hi@state@endelt{%
    \def\do##1{%
        \expandafter\ifcase\csname hi@sv@st@##1\endcsname
            % Unset
            \@cslet \csname hi@sv@st@##1\endcsname \@ne
        \or
            % Set
            \hi@state@test{##1}{}{\csname hi@sv@inv@##1\endcsname}%
        \fi
        \@cslet \csname @last@##1\endcsname \csname @this@##1\endcsname
    }\hi@state@list
}
\def\hi@state@test#1{%
    \@expand{\expandafter\hi@state@test@\csname @this@#1\endcsname}{%
        \csname @last@#1\endcsname
    }{i}%
}
\def\hi@state@test@#1#2{%
    \ifx#1#2\expandafter\@firstoftwo\else\expandafter\@secondoftwo\fi
}
\def\hi@state@endstring{%
    \def\do##1{%
        \expandafter\ifnum\csname hi@sv@st@##1\endcsname=\tw@
            \@cslet \csname @last@##1\endcsname \relax
        \fi
        \@cslet\csname @this@##1\endcsname\relax % Unnecessary but prophylactic
    }\hi@state@list
}
\def\hi@state@endnote{%
    \ifnum\hi@note@cites=\@ne
        \def\do##1{%
            \expandafter\hi@state@endnote@\csname @last@##1\endcsname
        }\hi@state@list
    \else
        \def\do##1{%
            \global\expandafter\let\csname @last@##1\endcsname\relax
        }\hi@state@list
    \fi
}
\def\hi@state@endnote@#1{%
    \global\let#1#1%
}
\def\hi@state@save#1{%
    \let#1\@empty
    \def\do##1{%
        \expandafter\hi@state@save@one\csname @last@##1\endcsname#1%
    }\hi@state@list
}
\def\hi@state@save@one#1#2{%
    \ifx#1\relax
        \addto@macro#2{\let#1\relax}%
    \else
        \addto@macro#2{\def#1}%
        \expandafter\addto@macro\expandafter#2\expandafter{%
            \expandafter{#1}%
        }%
    \fi
}
\def\hi@state@reset{%
    \def\do##1{\expandafter\let\csname @last@##1\endcsname\relax}\hi@state@list
}
\AtBeginDocument{%
    \let\hi@footnotetext\@footnotetext
    \long\def\@footnotetext#1{%
        \hi@footnotetext{\hi@footnote@pre#1\hi@footnote@post}%
    }%
}%
\newcount\hi@note@cites
\appto\hi@hooks@review{
    \def\hi@note@advance{\advance\hi@note@cites\@ne}
    \def\hi@note@advance@id{\ifnum\hi@note@cites=\z@\hi@note@advance\fi}
    \def\hi@footnote@pre{%
        \@hi@notetrue
        \hi@note@cites\z@
    }
    \def\hi@footnote@post{%
        \hi@deferred@note@endnote
        \hi@state@endnote
        \global\let\@last@inline\relax
    }
}
\appto\hi@hooks@memo{
    \let\hi@note@advance\@empty
    \let\hi@note@advance@id\@empty
    \def\hi@footnote@pre{%
        \@hi@notetrue
        \hi@noid
    }%
    \def\hi@footnote@post{%
        \hi@deferred@note@endnote
    }%
}
\newif\if@hi@note \@hi@notefalse
%%
%% \iffalse filename: supra.dtx \fi
%%
\def\hi@supra@form#1#2{%
    \hi@short@register{#1}{#2}{n}%
    \hi@newcite@form{sc}{#1}{%
        \hi@short@use{#1}%
        \hi@inline@only{%
            \hi@citeguts{%
                \unexpanded{#2}%
            }%
        }%
        \hi@inline@never{%
            \hi@citeguts{%
                \noexpand\hi@usevol{}%
                \unexpanded{#2}%
                \noexpand\hi@supra@word{#1}%
                \hi@maybepage{, \hi@page@atorsect}%
            }%
        }%
    }%
    \global\@cslet\csname sc@#1@supra\endcsname\@empty
}
\def\hi@supra@word#1{%
    \hi@font@comma \hi@nocap \hi@fn@latin{supra}%
    \hi@notepos{#1}%
    \@hi@dotfalse
}
\def\hi@notepos#1{%
    \ifnum\csname dfc@#1\endcsname=\c@footnote\else
        \ifnum\csname dfc@#1\endcsname>\z@
            \space note~\csname dfc@#1\endcsname
        \fi
    \fi
}%
%%
%% \iffalse filename: format.dtx \fi
%%
\def\hi@numtotxt#1{%
    \ifnum#1<100
        \hi@numtotxt@xx#1\@stop
    \else
        \hi@numtotxt@big#1\@stop
    \fi
    \hi@numtoord{#1}%
}
\def\hi@numtotxt@numeric#1{%
    \hi@numtotxt@big#1\@stop
    \hi@numtoord{#1}%
}
\def\hi@numtoord#1{\hi@numtoord@#1\@stop\@empty}
\def\hi@numtoord@#1#2\@stop{%
    \ifstrempty{#2}{%
        \ifcase#1 th\or st\or d\or d\else th\fi
    }{%
        \@ifonechar{#2}{\ifnum#1=\@ne th\expandafter\hi@eatto@empty\fi}{}%
        \hi@numtoord@#2\@stop
    }%
}
\def\hi@numtotxt@xx#1#2\@stop{%
    \ifstrempty{#2}{%
        \ifcase#1 Zero\or Fir\or Secon\or Thir\or Four\or Fif\or Six\or Seven\or
            Eigh\or Nin\fi
    }{%
        \ifnum #1=\@ne
            \ifnum #2=9 Nineteen\else
                \ifcase #2 Ten\or Eleven\or Twelf%
                \else \hi@numtotxt@xx#2\@stop teen\fi
            \fi
        \else
            \hi@numtotxt@c#1#2\@stop
        \fi
    }%
}
\def\hi@numtotxt@c#1#2\@stop{%
    \hi@numtotxt@tens#1{}%
    \ifnum#2=\z@ ie\else y-\hi@numtotxt@xx#2\@stop\fi
}
\def\hi@numtotxt@tens#1#2{%
    \ifcase #1 \or Ten\or Twent\or Thirt\or Fort\or Fift\or Sixt\or Sevent\or
        Eight\or Ninet\fi
    \ifnum#1=\@ne\else#2\fi
}
\def\hi@numtotxt@ones#1{%
    \ifcase#1 \or One\or Two\or Three\or Four\or Five\or Six\or Seven\or
        Eight\or Nine\fi
}
\def\hi@numtotxt@big#1#2\@stop{%
    \ifnum0#2=\z@
        \@expand{\hi@numtotxt@bigtonum#1{#2}}\hi@numtotxt@One{#2}%
    \else\hi@numtotxt@comma{#1#2}\fi
}
\def\hi@numtotxt@bigtonum#1#2#3{%
    \ifx#3\relax
        \hi@numtotxt@comma{#1#2}%
    \else
        \@ifundefined{\expandafter\@gobble\string#3@prn}{%
            \hi@numtotxt@ones#1 \expandafter\hi@numtotxt@gobble\string#3\@stop
        }{%
            \@nameuse{\expandafter\@gobble\string#3@prn}{#1}%
        }%
    \fi
}
\edef\act{%
    \noexpand\def
    \noexpand\hi@numtotxt@gobble\string\hi@numtotxt@##1\noexpand\@stop{##1}%
}\act
\def\hi@numtotxt@One{\hi@numtotxt@Ten}
\def\hi@numtotxt@Ten{\hi@numtotxt@Hundred}
\def\hi@numtotxt@Hundred{\hi@numtotxt@Thousand}
\def\hi@numtotxt@Thousand{\hi@numtotxt@tthousand}
\def\hi@numtotxt@tthousand@prn#1{\hi@numtotxt@tens#1{y} Thousand}
\@expand{\def\hi@numtotxt@tthousand}{\csname hi@numtotxt@Hundred
    Thousand\endcsname}{i}
\@namedef{hi@numtotxt@Hundred Thousand}{\hi@numtotxt@Million}
\def\hi@numtotxt@Million{\relax}
\def\hi@numtotxt@comma#1{%
    \ifnum#1<\@M #1%
    \else\@expand{\hi@numtotxt@comma@{#1}}\hi@numtotxt@commaiii{#1}\fi
}
\def\hi@numtotxt@comma@#1#2{%
    \@nameuse{\expandafter\@gobble\string#2@do}#1\@stop
}
\def\hi@numtotxt@commai{\hi@numtotxt@commaii}
\def\hi@numtotxt@commaii{\hi@numtotxt@commaiii}
\def\hi@numtotxt@commaiii{\hi@numtotxt@commai}
\def\hi@numtotxt@commai@do#1#2\@stop{#1,\hi@numtotxt@commaiii@do#2\@stop}
\def\hi@numtotxt@commaii@do#1#2#3\@stop{#1#2,\hi@numtotxt@commaiii@do#3\@stop}
\def\hi@numtotxt@commaiii@do#1#2#3#4\@stop{%
    #1#2#3\ifstrempty{#4}{}{,\hi@numtotxt@commaiii@do#4\@stop}%
}
\newif\if@hi@dot
\def\hi@dot@after@group{%
    \if@hi@dot\aftergroup\@hi@dottrue\else\aftergroup\@hi@dotfalse\fi
}
\def\@no@dot@space{\sfcode`\.\@m\sfcode`\:\@m\sfcode`\?\@m\sfcode`\!\@m}
\def\@re@dot@space{\spacefactor\sfcode`\.\relax}
\def\@gobble@dot{\futurelet\@dot@check\@@gobble@dot}
\def\@@gobble@dot{%
    \ifx\@dot@check.%
        \@re@dot@space
        \expandafter\@gobble
    \fi
}
\make@find@end{.}
\def\if@endswithdot#1#2{\find@end{.}{#1}{\@firstoftwo{#2}}{}}%
\def\hi@dot@set#1{%
    \find@end{.}{#1}{\@hi@dottrue\@gobble}{\ifstrempty{#1}{}{\@hi@dotfalse}}%
}
\def\hi@dot@set@page{%
    \expandafter\hi@dot@set\expandafter{\@this@page}%
}
\def\hi@testfordot#1{%
    \expandafter\if@endswithdot\expandafter{#1}{\protect\@hi@dottrue}%
}
\newif\if@hi@cap
\DeclareRobustCommand\hi@nocap{\@hi@capfalse}
\def\@capfont#1#2{%
    \@test\if@hi@cap\fi{\hi@nocap#1{\@@capnext#2}}{#1{#2}}%
}
\DeclareRobustCommand\@capnext{\if@hi@cap\hi@nocap\expandafter\@@capnext\fi}
\def\@@capnext#1{%
    \@ifonechar{#1}{%
        % Save the first character in \hi@capnext@char, and then collect the
        % subsequent character in \@let@token. Then run \@@@capnext.
        \def\hi@capnext@char{#1}%
        \futurelet\@let@token\@@@capnext
    }{%
        {\@@capnext #1}%
    }%
}
\def\@@@capnext{%
    \@ifundefined{hi@cncs@\expandafter\string\hi@capnext@char}{%
        \@test \ifcat\relax\expandafter\noexpand\hi@capnext@char \fi
            \hi@capnext@macro
            \hi@capnext@letter
    }{%
        \@nameuse{hi@cncs@\expandafter\string\hi@capnext@char}%
    }%
}
\def\hi@capnext@macro{%
    \@test\ifcat\noexpand\@let@token\bgroup\fi{%
        \hi@capnext@macro@group
    }{%
        \hi@capnext@char\@@capnext
    }%
}
\def\hi@capnext@macro@group#1{%
    \hi@capnext@char{\@@capnext #1}%
}
\def\hi@capnext@letter{%
    \@ifletter{\@let@token}{%
        \hi@capnext@letter@next
    }{%
        \MakeUppercase{\hi@capnext@char}%
    }%
}
\def\hi@capnext@letter@next#1{%
    \@test \ifnum\uccode`#1=`#1\relax\fi {\hi@capnext@char}{%
        \MakeUppercase{\hi@capnext@char}%
    }#1%
}
\def\hi@capnext@makecs#1#2{%
    \@namedef{hi@cncs@\string #1}{#2}%
    \@namedef{hi@cncs@\string #1 }{#2}%
}
\hi@capnext@makecs{\protect}{\hi@capnext@protect}
\def\hi@capnext@protect#1{%
    \@ifundefined{hi@cncs@\string#1}{%
        \def\hi@capnext@char{\protect#1}%
        \futurelet\@let@token\hi@capnext@macro
    }{%
        \@nameuse{hi@cncs@\string#1}%
    }%
}
\hi@capnext@makecs\hi@inline@the{\@hi@captrue\hi@inline@the}
\def\reserved@a#1#2{%
    \ifx#1\@nnil\else
        \hi@capnext@makecs#1{\hi@capnext@letter}%
        \hi@capnext@makecs#2{#2}%
        \expandafter\reserved@a
    \fi
}
\expandafter\reserved@a\@uclclist\@nnil\@nnil
\def\hi@capnext@sp#1{%
    \@test\if@hi@inline\fi{%
        #1%
        \@test\expandafter\ifx\hi@capnext@char\@let@token\fi{%
            s\@gobble % Gobble the macro otherwise in \@let@token
        }{}%
    }{\hi@capnext@char}% If not inline, then just put the original char back
}
\hi@capnext@makecs\textsection{\hi@capnext@sp{Section}}
\hi@capnext@makecs\textparagraph{\hi@capnext@sp{Paragraph}}
\DeclareRobustCommand\hi@inline@the{%
    \@test\if@hi@inline\fi{%
        \@test\if@hi@adjective\fi{\@capnext}{%
            % Conditional doesn't need to be in |\@test| because |\@capnext| is
            % guaranteed to capitalize a word if run
            \if@hi@emph \emph{\@capnext the }\hi@nocap\else \@capnext the \fi
        }%
    }{\@capnext}%
}
\def\hi@replacethe#1#2#3{%
    \@expand{%
        \find@try\find@start{%
            {The }{\hi@replacethe@{#2}}%
            {the }{\hi@replacethe@{#2}}%
        }%
    }{#1}i{#3}%
}
\def\hi@replacethe@#1#2{%
    #1{\hi@inline@the#2}%
}
\make@find@start{The }
\make@find@start{the }
\def\hi@replaceinlinethe#1#2#3#4{%
    \find@start@cs{/hi@inline@the}{#1}{%
        \hi@replaceinlinethe@{#2}{#3}%
    }{#4}%
}
\def\hi@replaceinlinethe@#1#2#3{#2{#1#3}}
\make@find@start@cs{/hi@inline@the}{\hi@inline@the}
\def\hi@name@comma{\if@hi@name\hi@font@comma\fi}
\DeclareRobustCommand\hi@font@comma{%
    \ifdim\lastkern>\z@\unkern\fi, \@hi@dotfalse
}
\def\hi@param@optspc#1#2{%
    \hi@ifset#1{%
        \hi@ifset#2{%
            #1\space#2
        }{#1}%
    }{\hi@ifset#2{#2}{}}%
}
\DeclareRobustCommand*\hi@citeguts[1]{%
    \begingroup
        \@no@dot@space
        #1%
        \hi@dot@after@group
    \endgroup
    \hi@nocap
}
\def\hi@maybeusedefaultopt{%
    \hi@ifset\hi@kv@defaultopt{%
        \noexpand\hi@maybeusedefaultopt@{\hi@kv@defaultopt}%
    }{}%
}
\def\hi@maybeusedefaultopt@#1{%
    \ifx\@this@opt\relax \def\@this@opt{#1}\fi
}
\DeclareRobustCommand\hi@ifinopt[2]{%
    \@test \ifx\@this@opt\relax\fi {%
        \find@in{#1}{#2}{\expandafter\@firstoftwo\@gobbletwo}{\@secondoftwo}%
    }{%
        \@expand{\find@in{#1}}\@this@opt i
            {\expandafter\@firstoftwo\@gobbletwo}{\@secondoftwo}%
    }%
}
\def\push@toks#1#2{%
    \long\edef\push@toks@##1{\noexpand#1{\the#1##1}}\push@toks@{#2}%
}
\def\hi@eatto@empty#1\@empty{}
\def\@secondofthree#1#2#3{#2}%
\def\hi@usevol#1{\ifx\@this@vol\relax#1\else\@this@vol\space\fi}
\def\hi@set@title#1{\def\@this@title{#1}}
\def\hi@if@title#1{%
    \def\@this@title{#1}%
    \ifx\@this@title\@last@title  \expandafter\@firstoftwo
    \else                         \expandafter\@secondoftwo  \fi
}
\DeclareRobustCommand\hi@inline@only[1]{%
    \if@hi@inline#1\fi
}
\DeclareRobustCommand\hi@inline@never[1]{%
    \if@hi@inline\else #1\fi
}
\DeclareRobustCommand\hi@toa@never[1]{%
    \if@hi@in@toa\else #1\fi
}
\DeclareRobustCommand\hi@name@only[1]{%
    \if@hi@name #1\fi
}
%%
%% \iffalse filename: caseref.dtx \fi
%%
\def\hi@case@def#1{%
    \hi@case@setparties{#1}%
    \hi@case@updaterep
    \hi@case@history
    \hi@ifset\hi@kv@inline{%
        \@expand{\hi@short@register{#1}}\hi@kv@inline i{y}%
    }{}%
    \hi@case@proc
    \@expand{\hi@short@register{#1}}\hi@kv@inline i{n}%
    \hi@ifset\hi@kv@slip{\def\hi@kv@slip{slip op. }}{\def\hi@kv@slip{}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@only{\hi@citeguts{\hi@kv@name}}%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@name@only{\hi@kv@aname\hi@font@comma}%
                \hi@ifset\hi@kv@rep{%
                    \hi@kv@vol\space \hi@kv@rep\space
                    \@format@page@macro\hi@kv@page
                    \hi@maybepage{, }%
                }{%
                    \hi@kv@docket % Docket number
                    \hi@ifset{\hi@kv@dbid}{, \hi@kv@dbid}{}%
                    \hi@maybepage{, \hi@kv@slip\hi@page@atorsect}%
                }%
            }%
            \the\hi@param@parens
            \hi@case@dateparen{%
                \hi@ifeitherset\hi@kv@year\hi@kv@court{%
                    \hi@parens@add{\hi@paren@date}{%
                        \hi@param@optspc\hi@kv@court\hi@kv@year
                    }%
                }{}%
            }y%
        }%
    }%
    \hi@newcite@form{lc}{#1}{%
        \hi@citeguts{%
            \hi@name@only{\@capnext\hi@kv@lname\unkern,\hfill\break}%
            \hi@ifset\hi@kv@rep{%
                \hi@kv@vol\space\hi@kv@rep\space
                \@format@page@macro\hi@kv@page
                \hi@maybepage{, }%
            }{%
                \hi@kv@docket % Docket number
                \hi@ifset{\hi@kv@dbid}{, \hi@kv@dbid}{}%
                \hi@maybepage{, \hi@kv@slip\hi@page@atorsect}%
            }%
        }%
        \hi@case@dateparen{%
            \hi@parens@add{\hi@paren@date}{%
                \hi@param@optspc\hi@kv@court\hi@kv@year
            }%
        }y%
        \the\hi@param@parens
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@short@use{#1}%
        \hi@citeguts{%
            \hi@inline@only{\hi@citeguts{\hi@kv@inline}}%
            \hi@inline@never{%
                \hi@name@only{%
                    \hi@kv@ainline
                    \hi@font@comma
                }%
                \hi@ifset\hi@kv@rep{%
                    \hi@kv@vol\space\hi@kv@rep\space %
                    \hi@ifpage{\hi@maybepage{\hi@page@atorsect}}{%
                        \@format@page@macro\hi@kv@page
                    }%
                }{%
                    \hi@ifset{\hi@kv@dbid}{\hi@kv@dbid}{\hi@kv@docket}%
                    \hi@maybepage{, \hi@kv@slip\hi@page@atorsect}%
                }%
            }%
        }%
        \hi@case@dateparen{}n%
    }%
}
\def\hi@case@setparties#1{%
    \hi@ifset\hi@kv@p{%
        \global\cslet{case@#1@p}\hi@kv@p
    }{%
        \global\cslet{case@#1@p}\relax
    }%
    \hi@ifset\hi@kv@d{%
        \global\cslet{case@#1@d}\hi@kv@d
    }{%
        \global\cslet{case@#1@d}\relax
    }%
    \hi@ifset\hi@kv@name{%
        \global\cslet{case@#1@name}\hi@kv@name
    }{%
        \global\cslet{case@#1@name}\relax
    }%
}
\def\hi@case@proc{%
    \begingroup
        % For finding the best party for inline citations
        \let\hi@tmp@allnames\@empty
        % Scores will always be positive other than for impossible party names,
        % so setting this to -1 guarantees a party name will be selected
        \let\hi@tmp@bestscore\m@ne
        \hi@ifset\hi@kv@name{\@expand\hi@case@procname\hi@kv@name i}{}%
        \hi@ifset\hi@kv@p{\hi@case@procparties}{}%
        % Make the full-cite names, both inline and abbreviated
        \hi@case@proc@fullnames
        %
        % Set up the short-cite names
        \hi@case@proc@shortnames
        %
        % Now we need to get all the defined names out of the group. We do so by
        % creating |\reserved@a| to end the group and redefine all the name
        % macros.
        %
        \def\reserved@a{\endgroup}%
        \hi@ifset\hi@kv@name{\hi@redef@macro\reserved@a\hi@kv@name}{}%
        \hi@ifset\hi@kv@lname{\hi@redef@macro\reserved@a\hi@kv@lname}{}%
        \hi@ifset\hi@kv@aname{\hi@redef@macro\reserved@a\hi@kv@aname}{}%
        \hi@ifset\hi@kv@ainline{\hi@redef@macro\reserved@a\hi@kv@ainline}{}%
        \hi@ifset\hi@kv@inline{\hi@redef@macro\reserved@a\hi@kv@inline}{}%
    \reserved@a
}
\hi@undefine\hi@kv@lname
\def\hi@redef@macro#1#2{%
    \add@macro@to@macro#1{\expandafter\def\expandafter#2\expandafter{#2}}%
}
\def\hi@case@procparty#1#2#3{%
    \hi@abbrev@inlcase{#1}{\hi@case@procparty@}{#2}{#3}%
}
\def\hi@case@procparty@#1#2#3{%
    \find@in{ ex rel. }{#1}{\hi@case@procparty@parts}{%
        \hi@case@procparty@parts{#1}{}%
    }{#2}{#3}%
}
\make@find@in{ ex rel. }
\def\hi@case@procparty@parts#1#2#3#4{%
    \hi@case@cmpname{#1}{#3+10}%
    \ifblank{#2}{%
        % No ex-rel. Just run the callback
        \hi@abbrev@name{#1}{#4{#1}}%
    }{%
        % With an ex-rel.
        \hi@case@cmpname{#2}{#3}%
        \hi@abbrev@name{#1\hi@case@exrel#2}{#4{#1\hi@case@exrel#2}}%
    }%
}
\DeclareRobustCommand\hi@case@exrel{ \hi@fn@caseproc{ex rel.} }
\def\hi@case@procparties{%
    \hi@ifset\hi@kv@inlinedefendant{%
        \@expandarg\hi@case@procparty\hi@kv@p{-20000}{%
            \@twodef\hi@tmp@p\hi@tmp@pa
        }%
    }{%
        \@expandarg\hi@case@procparty\hi@kv@p{5}{\@twodef\hi@tmp@p\hi@tmp@pa}%
    }%
    \@expandarg\hi@case@procparty\hi@kv@d{3}{\@twodef\hi@tmp@d\hi@tmp@da}%
}
\def\hi@case@procname#1{%
    \let\hi@tmp@npre\@empty
    \@expand{\find@try\find@start{%
        {In re }{\def\hi@tmp@npre{\hi@fn@caseproc{In re} }\def\hi@kv@name}%
        {Ex parte }{%
            \def\hi@tmp@npre{\hi@fn@caseproc{Ex parte} }\def\hi@kv@name
        }%
    }}\hi@kv@name i{}%
    %
    % We use |\hi@inline@the| only if there is no other prefix. In such cases,
    % the word ``The'' seems more integrally part of the party name (In re The
    % Party), as opposed to when there is no other prefix and ``The'' is part of
    % a description of the litigation (The Slaughter-House Cases).
    %
    \ifx\hi@tmp@npre\@empty
        \hi@replacethe\hi@kv@name{\def\hi@kv@name}{}%
    \fi
    \@expandarg\hi@case@procparty\hi@kv@name{7}{\@twodef\hi@tmp@n\hi@tmp@na}%
    % The abbreviated full name always takes ``The'' if present
    \@expandarg\hi@replaceinlinethe\hi@tmp@na{The }{\def\hi@tmp@na}{}%
}
\make@find@start{In re }
\make@find@start{Ex parte }
\def\hi@case@proc@fullnames{%
    \hi@ifset\hi@kv@p{\hi@case@proc@fullnames@parties}{%
        \hi@case@proc@fullnames@nameonly
    }%
}
\def\hi@case@proc@fullnames@parties{%
    %
    % Create the parenthetical if a name was given. We have to do this up here
    % because we overwrite |\hi@kv@name| later.
    %
    \hi@ifset\hi@kv@name{%
        % Unabbreviated name will always use ``The''
        \@expandarg\hi@replaceinlinethe\hi@tmp@n{The }{\def\hi@tmp@n}{}%
        \edef\hi@kv@name{ (\hi@case@namefmt\hi@tmp@n)}%
        \edef\hi@kv@aname{ (\hi@case@namefmt\hi@tmp@na)}%
    }{%
        % If no name was given, then there's a possibility we need to do dot
        % management if |\hi@tmp@d| ends with a dot.
        \edef\hi@kv@name{\hi@case@testdot\hi@tmp@d}%
        \let\hi@kv@aname\@empty
    }%
    \epreto\hi@kv@name{%
        \noexpand\hi@fn@casefc{%
            \expandonce\hi@tmp@p \noexpand\hi@versus \expandonce\hi@tmp@d
        }%
        \hi@ifset\hi@kv@name{}{\hi@case@testdot\hi@tmp@d}%
    }%
    \epreto\hi@kv@aname{%
        \noexpand\hi@fn@casefc{%
            \expandonce\hi@tmp@pa \noexpand\hi@versus \expandonce\hi@tmp@da
        }%
    }%
    \let\hi@kv@lname\hi@kv@name
}
\def\hi@case@proc@fullnames@nameonly{%
    \hi@ifset\hi@kv@name{}{%
        \PackageError\hi@pkgname{%
            Case citation requires either parties or a common name%
        }{Please use the p, d, or name parameters}%
    }%
    % The TOA name should put ``The'' and any prefix at the end, so we have to
    % search for a leading |\hi@inline@the|.
    \@expandarg\hi@replaceinlinethe\hi@tmp@n{}{%
        \hi@case@proc@toaname{The}%
    }{\hi@case@proc@toaname{}{\expandonce\hi@tmp@n}}%
    % For the full inline name, ``The'' will always be used if there is a prefix
    % like In re.
    \ifx\hi@tmp@npre\@empty\else
        \@expandarg\hi@replaceinlinethe\hi@tmp@n{The }{\def\hi@tmp@n}{}%
    \fi
    \edef\hi@kv@name{\hi@case@namefmt\hi@tmp@n \hi@case@testdot\hi@tmp@n}%
    \edef\hi@kv@aname{\hi@case@namefmt\hi@tmp@na}%
}
\def\hi@case@proc@toaname#1#2{%
    \edef\hi@kv@lname{%
        \noexpand\hi@fn@casefc{#2}%
        \@expandarg\ifblank{\hi@tmp@npre#1}{}{%
            ,\hi@case@proc@toaname@npre
            \ifblank{#1}{}{ \noexpand\hi@fn@casefc{#1}}%
        }%
    }%
}
\def\hi@case@proc@toaname@npre{%
    \ifx\hi@tmp@npre\@empty\else
        \space
        \@expand{\find@end{ }}\hi@tmp@npre i{\unexpanded}{\meaning\hi@tmp@npre}%
    \fi
}
\make@find@end{ }
\def\hi@case@namefmt#1{%
    \expandonce\hi@tmp@npre \noexpand\hi@fn@casefc{\expandonce#1}%
}
\def\hi@case@testdot#1{%
    \@expandarg\if@endswithdot{#1}{\unexpanded{\protect\@hi@dottrue}}%
}
\DeclareRobustCommand\hi@versus{%
    \if@hi@in@toa
        \ifnum\hi@citelevel=\@ne
            \hfill\penalty\m@ne\space\hskip\z@\@plus-1fill\relax
        \else
            ~%
        \fi
    \else
        ~%
    \fi
    v.\@\space
}
\def\hi@case@cmpname#1#2{%
    \appto\hi@tmp@allnames{#1;}%
    \hi@case@scorename{#1}{\hi@case@cmpname@{#1}{#2}}%
}
\def\hi@case@cmpname@#1#2#3{%
    \ifnumcomp{#2+#3}>{\hi@tmp@bestscore}{%
        \def\hi@tmp@bestname{#1}%
        \def\hi@tmp@bestscore{#2+#3}%
    }{}%
}
\def\hi@case@scorename#1#2{%
    % Empty name
    \ifblank{#1}{#2{-10000}}{%
        % Name in the nocite list
        \ifcsdef{nocite@\detokenize{#1}}{#2{1000}}{%
            % Capitalized first word
            \hi@iffirstwordcaps{#1}{#2{2000}}{%
            % Name with the word ``of''
                \find@in{ of }{#1}{\@firstofthree{#2{3000}}}{%
                    #2{4000}%
                }%
            }%
        }%
    }%
}
\make@find@in{ of }
\def\hi@iffirstwordcaps#1{%
    \find@in{ }{#1}{\hi@iffirstwordcaps@}{\hi@iffirstwordcaps@{#1}{}}%
}
\make@find@in{ }
\def\hi@iffirstwordcaps@#1#2{%
    \uppercase{\def\reserved@a{#1}}%
    \ifdefstring\reserved@a{#1}%
}
\def\hi@case@proc@shortnames{%
    % If the user gave an inline name, deal with ``the'' at the beginning.
    % Otherwise, it is assumed that leading ``the'' was dealt with, so apply the
    % short name simplification algorithm.
    \hi@ifset\hi@kv@inline{\hi@replacethe\hi@kv@inline{\def\hi@kv@inline}}{%
        \@expandarg\hi@case@shortfmt\hi@tmp@bestname{\def\hi@kv@inline}%
    }%
    % Abbreviate the short name
    \@expandarg\hi@abbrev@name\hi@kv@inline{\def\hi@kv@ainline}%
    % Determine if the inline name chosen requires a parenthetical
    \edef\reserved@a{%
        \noexpand\in@{\expandafter\strip@prefix\meaning\hi@kv@inline}%
            {\expandafter\strip@prefix\meaning\hi@tmp@allnames}%
    }\reserved@a
    \hi@ifset\hi@kv@inlineparen{\in@false}{}%
    % Add formatting to the names. Leading ``the'' should have already been
    % converted to |\hi@inline@the|.
    \edef\hi@kv@inline{%
        \noexpand\hi@fn@casesc{\expandonce\hi@kv@inline}%
        \hi@case@testdot\hi@kv@inline
    }
    \edef\hi@kv@ainline{%
        \noexpand\hi@fn@casesc{\expandonce\hi@kv@ainline}%
    }
    % Add the parenthetical to the full names if needed. This must be done down
    % here, because the fonts for the short names need to be set first.
    \ifin@\else
        \eappto\hi@kv@name{%
            \noexpand\hi@short@maybeshow{\@this@case}{%
                \space(``\expandonce\hi@kv@inline'')%
                \unexpanded{\protect\@hi@dotfalse}%
            }%
        }%
        \edef\hi@kv@aname{%
            \noexpand\hi@case@choosefullorainline{%
                \expandonce\hi@kv@aname
            }{\expandonce\hi@kv@ainline}%
        }%
    \fi
}
\DeclareRobustCommand\hi@case@choosefullorainline[2]{%
    \hi@record@firstfullcite\@this@case{%
        #1\hi@short@maybeshow{\@this@case}{%
            \space(``#2'')\protect\@hi@dotfalse
        }%
    }{%
        #2%
    }%
}
\def\hi@case@shortfmt#1#2{%
    \@expand{\find@try\find@end}\hi@case@shortfmt@words i{#1}{%
        \hi@case@shortfmt@run{#1}%
    }{#2}%
}
\def\hi@case@shortfmt@run#1#2{#2{#1}}
\def\hi@case@shortfmt@words{}
\def\hi@case@shortfmt@add#1{%
    \addto@macro\hi@case@shortfmt@words{%
        {#1}{\hi@case@shortfmt}%
    }%
    \make@find@end{#1}%
}
\hi@case@shortfmt@add{,}
\hi@case@shortfmt@add{ Inc.}
\hi@case@shortfmt@add{ Co.}
\hi@case@shortfmt@add{ Corp.}
\hi@case@shortfmt@add{ LP}
\hi@case@shortfmt@add{ LLP}
\hi@case@shortfmt@add{ LLLP}
\hi@case@shortfmt@add{ P'ship}
\hi@case@shortfmt@add{ Partnership}
\hi@case@shortfmt@add{ LLC}
\hi@case@shortfmt@add{ Ltd.}
\hi@case@shortfmt@add{ America}
\hi@case@shortfmt@add{ Am.}
\hi@case@shortfmt@add{ USA}
\hi@case@shortfmt@add{ International}
\hi@case@shortfmt@add{ Int'l}
\hi@case@shortfmt@add{ of}
\def\hi@case@updaterep{%
    \hi@ifset\hi@kv@vol{%
        \hi@ifset\hi@kv@rep{%
            \@ifundefined{hi@trep@\hi@kv@vol @\hi@kv@rep}{}{%
                \protected@edef\hi@kv@rep{%
                    \hi@kv@rep\space(%
                        \csname hi@trep@\hi@kv@vol @\hi@kv@rep\endcsname
                    )%
                }%
            }%
        }{}%
    }{}%
}
\def\hi@abbrev#1#2#3{%
    \@namedef{hi@trep@#1@#2}{#3}%
}
\input hireps
\def\hi@case@dateparen#1#2{%
    \noexpand\ifx\noexpand\hi@casedoc@docket\relax
        #1%
    \noexpand\else
        \hi@ifset\hi@kv@rep{%
            \hi@parens@add{\hi@paren@casedocdocket}{%
                \hi@ifset\hi@kv@docket{\hi@kv@docket}{%
                    \noexpand\hi@casedoc@docket
                }%
            }%
        }{}%
        \noexpand\ifx\noexpand\hi@casedoc@date\relax\noexpand\else
            \hi@parens@add{\hi@paren@date}{%
                \ifx#2y%
                    \hi@ifset\hi@kv@court{\hi@kv@court\space}{}%
                \fi
                \noexpand\hi@casedoc@date
            }%
        \noexpand\fi
    \noexpand\fi
}
\def\hi@case@history{%
    \hi@ifset\hi@kv@prior{%
        \@expandarg\hi@expl@parse\hi@kv@prior{}\hi@paren@prior
    }\relax
    \hi@ifset\hi@kv@subsequent{%
        \@expandarg\hi@expl@parse
            \hi@kv@subsequent
            { \hi@fn@latin{sub nom.}}%
            \hi@paren@subseq
    }\relax
}
\def\hi@cite@history{%
    \hi@ifset\hi@kv@prior{%
        \@expand\hi@expl@parse\hi@kv@prior{}\hi@paren@prior
    }\relax
    \hi@ifset\hi@kv@subsequent{%
        \@expand\hi@expl@parse\hi@kv@subsequent{}\hi@paren@subseq
    }\relax
}
\def\hi@expl@parse#1#2#3{%
    \find@in{: }{#1}{\hi@expl@abbrev{}}{%
        \find@last{, }{#1}{\hi@expl@abbrev{,}}{%
            \find@last{ }{#1}{\hi@expl@abbrev{}}{%
                \hi@expl@err
                \hi@expl@abbrev{}{}{#1}% Set procedural phrase to nothing
            }%
        }%
    }{#2}{#3}% Parameters passed to |\hi@expl@abbrev| in all cases
}
\make@find@in{: }
\make@find@in{, }
\make@find@in{ }
\def\hi@expl@abbrev#1#2#3#4#5{%
    \hi@abbrev@expl{#2#1}{\hi@expl@addparen}{#3}{#4}{#5}%
}
\def\hi@expl@addparen#1#2#3#4{%
    \push@toks\hi@param@parens{%
        \if@hi@in@toa\else
            \hi@record@firstfullcite\@this@case{%
                \hi@parens@add#4{\hi@expl{#1}{#2}{#3}}%
            }{}%
        \fi
    }%
}
\def\hi@expl@err{%
    \PackageError\hi@pkgname{Explanatory phrase in history missing}{%
        You must include explanatory history phrase and citation.
    }%
}
\def\hi@expl#1#2#3{%
    \find@end{,}{#1}{\hi@expl@{,}}{\hi@expl@{}{#1}}{#2}{#3}%
}
\make@find@end{,}
\def\hi@expl@#1#2#3#4{%
    \ifcsdef{hi@expl@noname@#2}{%
        \hi@fn@sig{#2}#1\space
        \def\@last@inline{#3}%
    }{%
        \ifstrempty{#4}{% No sub-nom text
            \hi@fn@sig{#2}#1\space
            \hi@expl@determinename{#3}{}{\def\@last@inline{#3}}%
        }{%
            \ifstrempty{#1}{% No comma
                \hi@fn@sig{#2}#1\space
                \hi@expl@determinename{#3}{}{\def\@last@inline{#3}}%
            }{%
                \hi@expl@determinename{#3}{%
                    \hi@fn@sig{#2}#1\space
                    \def\@last@inline{#3}%
                }{%
                    \hi@fn@sig{#2}#4\space
                }%
            }%
        }%
    }%
    \clause{#3}%
}
\@namedef{hi@expl@noname@cert. denied}{}
\@namedef{hi@expl@noname@and cert. denied}{}
\@namedef{hi@expl@noname@reh'g denied}{}
\@namedef{hi@expl@noname@and reh'g denied}{}
\def\hi@expl@determinename#1#2#3{%
    \edef\reserved@a{%
        \noexpand\hi@expl@determinename@
            \expandonce{\csname case@#1@p\endcsname}%
            \expandonce{\csname case@#1@d\endcsname}%
            \expandonce{\csname case@#1@name\endcsname}%
            \expandonce{\csname case@\@this@case @p\endcsname}%
            \expandonce{\csname case@\@this@case @d\endcsname}%
            \expandonce{\csname case@\@this@case @name\endcsname}%
    }\reserved@a
    \@test\if@hi@name\fi{#3}{\@hi@nametrue#2}%
}
\def\hi@expl@determinename@#1#2#3#4#5#6{%
    \@hi@nametrue
    \ifx#1\relax\else % Don't do this if it's not a case
        \ifx#1#4\ifx#2#5\@hi@namefalse\fi\fi % (i)
        \ifx#1#5\ifx#2#4\@hi@namefalse\fi\fi
        \hi@ifset#1{}{% (iii)
            \ifx#3#4\@hi@namefalse\fi
            \ifx#3#5\@hi@namefalse\fi
            \ifx#3#6\@hi@namefalse\fi
        }%
        \hi@ifset#4{}{%
            \ifx#6#1\@hi@namefalse\fi
            \ifx#6#2\@hi@namefalse\fi
            \ifx#6#3\@hi@namefalse\fi
        }%
    \fi
}
\hi@newcite\defcase{A case citation}{%
    \hi@citetype{#1}\hi@type@case
    \hi@case@def{#1}%
}
\hi@newcite\defadmincase{An administrative decision}{%
    \hi@citetype{#1}\hi@type@admin
    \hi@case@def{#1}%
}
\hi@newcite\defcasedoc{Document used in a case}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@citation{}{%
        \PackageError\hi@pkgname{%
            Missing citation for casedoc #1
        }{%
            A reference to a case is required for \string\defcasedoc
        }%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\@capnext
            \hi@kv@name
            \hi@maybepage{ at }%
            ,
            \def\noexpand\hi@casedoc@docket{\hi@kv@docket}%
            \def\noexpand\hi@casedoc@date{\hi@kv@year}%
            \noexpand\hi@noid
            \let\noexpand\@last@inline\relax
            \noexpand\clause{\hi@kv@citation}\noexpand\hi@clause@endflag
        }%
        \hi@inline@never{%
            \hi@record@cite{\hi@kv@citation}%
            \hi@ifset\hi@kv@number{%
                \hi@parens@add\hi@paren@docno{Doc.\ No.\ \hi@kv@number}%
            }{}%
            \the\hi@param@parens
        }%
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \hi@kv@name
            \hi@maybepage{ at }%
            ,
            \def\noexpand\hi@casedoc@docket{\hi@kv@docket}%
            \noexpand\hi@noid
            \noexpand\clause{\hi@kv@citation}\noexpand\hi@clause@endflag
        }%
    }%
}
\let\hi@casedoc@docket\relax
\let\hi@casedoc@date\relax
\hi@newcite\defcourtdoc{A document in the docket of current litigation}{
    \@expand\hi@abbrev@cdoc\hi@kv@name i{\def\hi@kv@name}%
    \hi@ifset\hi@kv@inline{%
        \@expand\hi@abbrev@cdoc\hi@kv@inline i{\def\hi@kv@inline}%
    }{%
        \hi@ifset\hi@kv@number{%
            \protected@edef\hi@kv@inline{Doc.\ No.\ \hi@kv@number}%
        }{%
            \let\hi@kv@inline\hi@kv@name
        }%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@name
            \hi@testfordot\hi@kv@name
            \hi@maybepage{\hi@page@space\hi@kv@name}%
            \hi@ifset\hi@kv@year{, \hi@kv@year\noexpand\@hi@dotfalse}{}%
        }%
        \hi@ifset\hi@kv@number{%
            \hi@parens@add\hi@paren@docno{Doc.\ No.\ \hi@kv@number}%
        }{}%
        \the\hi@param@parens
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \hi@kv@inline
            \hi@testfordot\hi@kv@inline
            \hi@maybepage{\hi@page@space\hi@kv@inline}%
        }%
    }%
}
%%
%% \iffalse filename: constrefs.dtx \fi
%%
\hi@newcite\defconst{Citation to a constitution}{%
    \hi@citetype{#1}\hi@type@const
    \hi@ifset\hi@kv@name\relax{%
        \PackageWarning\hi@pkgname{%
            Constitution citation requires "name" argument
        }%
        \let\hi@kv@name\@empty
    }%
    \hi@replacethe\hi@kv@name{\hi@const@part{#1}}{%
        \hi@const@part{#1}{\@capnext\hi@kv@name}%
    }%
}
\hi@newcite\defconstamend{A Constitutional amendment}{%
    \hi@citetype{#1}\hi@type@const
    \edef\hi@kv@page{amendment \expandafter\@Roman\hi@kv@number}%
    \hi@const@part{#1}{%
        \hi@inline@the
        \@expandarg\hi@numtotxt{\hi@kv@number}
        Amendment%
    }%
}
\def\hi@const@part#1#2{%
    \hi@ifset\hi@kv@place{%
        \@expandarg\hi@abbrev@name{\def\hi@kv@place}%
    }{\def\hi@kv@place{U.S.}}%
    \hi@statcode@setup@idpc{#1}% Set up id. and page numbering
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@inline@never{%
                \noexpand\hi@fn@const{%
                    \hi@kv@place\space % State, and space
                    Const.%
                }\noexpand\@hi@dottrue
                \hi@ifset\hi@kv@year{%
                    \noexpand\@hi@dotfalse\space
                    of \hi@kv@year
                }{}%
                \hi@pageordefault{%
                    \noexpand\@hi@dotfalse
                    \hi@ifset\hi@kv@year{,}{}\space
                }{%
                    \hi@ifset\hi@kv@page{%
                        \hi@ifset\hi@kv@year{,}{}\space
                        \noexpand\@hi@dotfalse
                        \@format@page@macro\hi@kv@page
                    }{}%
                }%
            }%
            \hi@inline@only{#2}%
        }%
        \hi@invis@inline
        \the\hi@param@parens
    }%
    \hi@newcite@form{lc}{#1}{%
        \noexpand\hi@toa@duptitle{}{%
            \hi@fn@const{\hi@kv@place\space Const.}%
            \hi@ifset\hi@kv@year{\space of \hi@kv@year}{}%
        }{%
            \hi@pageordefault{%
                \hi@ifset\hi@kv@year{, }{ }%
            }{%
                \hi@ifset\hi@kv@page{%
                    \hi@ifset\hi@kv@year{, }{ }%
                    \@format@page@macro\hi@kv@page
                }{}%
            }%
        }{%
            \hi@pageordefault{%
                \hi@ifset\hi@kv@year{, }{ }%
            }{%
                \hi@ifset\hi@kv@page{%
                    \hi@ifset\hi@kv@year{, }{ }%
                    \@format@page@macro\hi@kv@page
                }{}%
            }%
        }%
        \the\hi@param@parens
    }%
}
\hi@newcite\deffounding{A national founding document}{%
    \hi@citetype{#1}\hi@type@found
    \hi@statcode@setup@idpc{#1}% Set up id. and page numbering
    \hi@include@page@in@toa{#1}
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@fn@const{\hi@kv@name}%
            \hi@pageordefault{ }{%
                \hi@ifset\hi@kv@page{ \@format@page@macro\hi@kv@page}{}%
            }%
        }%
        \the\hi@param@parens
        \hi@ifset\hi@kv@year{%
            \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        }{}%
    }%
    \hi@newcite@form{lc}{#1}{%
        \noexpand\hi@toa@duptitle{}{\hi@fn@const{\hi@kv@name}}{%
            \hi@pageordefault{ }{%
                \hi@ifset\hi@kv@page{ \@format@page@macro\hi@kv@page}{}%
            }%
            \the\hi@param@parens
            \hi@ifset\hi@kv@year{%
                \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
            }{}%
        }{%
            \hi@pageordefault{ }{%
                \hi@ifset\hi@kv@page{ \@format@page@macro\hi@kv@page}{}%
            }%
        }%
        \the\hi@param@parens
        \hi@ifset\hi@kv@year{%
            \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        }{}%
    }%
}
\hi@newcite\deffederalist{A Federalist paper}{%
    \hi@citetype{#1}\hi@type@other
    % TODO: add editor info
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@fn@booktitle{\hi@book@the Federalist No.~\hi@kv@number}%
            \space(\hi@kv@author)%
        }%
    }
    \protected@edef\reserved@a{%
        {\noexpand\hi@fn@booktitle{The Federalist No.~\hi@kv@number}}%
    }
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
%%
%% \iffalse filename: statrefs.dtx \fi
%%
\def\hi@inlinestatname#1{%
    \hi@ifset\hi@kv@inline{%
        %
        % If a user-defined short form is given, strip "the" from it, register
        % it as a short name, and add a parenthetical to the main name.
        %
        \hi@replacethe\hi@kv@inline{\def\hi@kv@inline}{}%
        %
        % Register the short-form name
        \@expand{\hi@short@register{#1}}\hi@kv@inline i{y}%
        %
        % Unless the user has explicitly rejected it, tack on a parenthetical of
        % the short name to the full citation form unless the short name is
        % already within the full name.
        %
        \hi@ifset\hi@kv@noinlineparen{}{%
            % Ensure that there actually is a name. The authority definer may
            % have set it already.
            \hi@ifset\hi@kv@name{}{%
                \PackageError\hi@pkgname{%
                    For statute citation #1, inline given but no full name%
                }{You must provide the name parameter}%
            }%
            \@expandtwo\in@\hi@kv@inline\hi@kv@name
            \ifin@\else
                \addto@macro\hi@kv@name{%
                    \hi@short@maybeshow{#1}{%
                        \hi@inline@only{\space
                            {\protect\@hi@adjectivetrue(``\hi@kv@inline'')}%
                        }%
                        \hi@inline@never{ (\hi@kv@inline)}}%
                }%
            \fi
        }%
    }{%
        %
        % No user-defined short form was given. If a full name is given, then we
        % define the inline form as the full name, stripped of any year.
        %
        \hi@ifset\hi@kv@name{%
            \@expand{\find@last{ of }}\hi@kv@name i{%
                \hi@inlinestatname@stripyear
            }{%
                \expandafter\hi@inlinestatname@addthe\expandafter{\hi@kv@name}%
            }%
            % Register the short-form name
            \@expand{\hi@short@register{#1}}\hi@kv@inline i{n}%
        }{%
            % Where neither is given, there will be no short-form name
            % generated, so \hi@kv@inline will produce an error if it is used.
        }%
        \hi@ifset\hi@kv@inlineparen{%
            \addto@macro\hi@kv@name{ (\hi@kv@inline)}%
        }{}%
    }%
    %
    % Indicate use of the short form in the inline macro.
    %
    \hi@ifset\hi@kv@inline{%
        \addto@macro\hi@kv@inline{\hi@short@use{#1}}%
    }{}%
}
\def\hi@inlinestatname@stripyear#1#2{%
    \edef\reserved@a{\ifnum1000<0#2 \else no\fi}%
    \ifx\reserved@a\@empty
        \hi@inlinestatname@addthe{#1}%
    \else
        \hi@inlinestatname@addthe{#1 of #2}%
    \fi
}
\make@find@in{ of }
\def\hi@inlinestatname@addthe#1{%
    \hi@replacethe{The #1}{\def\hi@kv@inline}{}%
}
\hi@newcite\defstatcode{A statute in a code}{%
    \hi@citetype{#1}\hi@type@statute
    \hi@statcode@setup{#1}%
}
\hi@newcite\defregcode{A regulation in a code}{%
    \hi@citetype{#1}\hi@type@regulation
    \hi@statcode@setup{#1}%
}
\def\hi@statcode@setup#1{%
    \hi@include@page@in@toa{#1}%
    \hi@statcode@setup@idpc{#1}% Set up id. and page numbering
    \hi@inlinestatname{#1}% Set up \hi@kv@inline based on \hi@kv@name
    \hi@statcode@inlinesect{#1}%
    \@expand\hi@abbrev@name{\hi@kv@rep}i{\def\hi@kv@rep}%
    \hi@ifset\hi@kv@author{%
        \hi@ifset\hi@kv@editor{%
            \PackageError\hi@pkgname{%
                Statutory code citation cannot have both an author and editor
            }{%
                Remove either the author or editor.
            }%
        }{%
            \let\hi@kv@edtype{}
            \let\hi@kv@editor\hi@kv@author
        }%
    }{}%
    \hi@book@pubparen
    \hi@newcite@form{fc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@statcode@fmtname
                \hi@statcode@full@title{\hi@kv@vol/\hi@kv@rep}{%
                    \let\noexpand\reserved@a\relax
                }{%
                    \hi@statcode@volandrep\def\noexpand\reserved@a{ }%
                }%
                \hi@ifset\hi@kv@origsect{%
                    \hi@ifset\hi@kv@page{%
                        \noexpand\reserved@a\@format@page@macro\hi@kv@page
                    }{}%
                }{%
                    \hi@pageordefault{\noexpand\reserved@a}{%
                        \hi@ifset\hi@kv@page{%
                            \noexpand\reserved@a
                            \@format@page@macro\hi@kv@page
                        }{}%
                    }%
                }%
            }%
            \hi@book@lcpost
        }%
        \hi@inline@only{%
            \hi@citeguts{\noexpand\@nameuse{ic@#1}{st}}%
            % We will count this as the sufficient full citation if there appear
            % to be no parentheticals to be added to this citation (including no
            % date specified).
            \hi@ifset\hi@kv@name{}{%
                \hi@ifset\hi@kv@year{}{%
                    \@expand\ifstrempty{\the\hi@param@parens}i{%
                        \hi@record@cite{#1}%
                    }{}%
                }%
            }%
        }%
        \hi@ifset\hi@kv@name{%
            \hi@inline@never{%
                \noexpand\hi@set@title{\hi@kv@vol/\hi@kv@rep}%
            }%
        }{%
            \noexpand\hi@set@title{\hi@kv@vol/\hi@kv@rep}%
        }%
        \hi@ifset\hi@kv@origsect{}{\hi@invis@inline}%
    }%
    \hi@newcite@form{lc}{#1}{%
        \noexpand\hi@toa@duptitle{%
            \hi@statcode@fmtname
        }{%
            \hi@statcode@volandrep
        }{%
            \hi@ifset\hi@kv@origsect{%
                \hi@ifset\hi@kv@page{%
                    \space\@format@page@macro\hi@kv@page
                }{}%
            }{%
                \hi@pageordefault{ }{%
                    \hi@ifset\hi@kv@page{%
                        \space\@format@page@macro\hi@kv@page
                    }{}%
                }%
            }%
        }{%
            \hi@ifset\hi@kv@origsect{%
                \hi@pageordefault{ }{%
                    \space\@format@page@macro\hi@kv@origsect
                }%
            }{%
                \hi@pageordefault{ }{%
                    \hi@ifset\hi@kv@page{%
                        \space\@format@page@macro\hi@kv@page
                    }{}%
                }%
            }%
        }%
        \hi@book@lcpost
        \noexpand\hi@set@title{\hi@kv@vol/\hi@kv@rep}%
    }%
    \hi@ifset\hi@kv@origsect{%
        \hi@statcode@sc@origsect{#1}%
    }{%
        \hi@statcode@sc@noorigsect{#1}%
    }%
}
\def\hi@statcode@setup@idpc#1{%
    \global\@namedef{idc@#1}{%
        \@test \ifx\@this@page\@last@page \fi{%
            \let\@this@title\@last@title
            \hi@citeguts{\hi@id}%
        }{%
            \csname sc@#1\endcsname
        }%
    }%
    \hi@newcite@form{pc}{#1}##1{%
        \hi@ifset\hi@kv@origsect{%
            \noexpand\hi@pages@join{\hi@kv@origsect}{##1}%
        }{%
            \hi@ifset\hi@kv@page{%
                \noexpand\hi@pages@join{\hi@kv@page}{##1}%
            }{%
                \noexpand\protected@edef\noexpand\@this@page{%
                    \noexpand\@format@pageno{##1}%
                }%
            }%
        }%
    }%
}
\def\hi@statcode@sc@origsect#1{%
    \hi@newcite@form{sc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@citeguts{%
            \hi@inline@only{\hi@citeguts{\noexpand\@nameuse{ic@#1}{s}}}%
            \hi@inline@never{%
                % \reserved@a holds any space to follow the title
                \def\noexpand\reserved@a{}%
                \hi@name@only{% Suppress name text for * citations
                    %
                    % If the name was previously shown, then use Id. instead.
                    % Otherwise, display the short-form name.
                    %
                    \noexpand\hi@if@title{\hi@kv@inline}{%
                        \hi@id
                    }{%
                        \@capnext\hi@kv@inline
                    }%
                    \def\noexpand\reserved@a{ }%
                }%
                %
                % pc@[ref] will have set \@this@page to join \hi@kv@origsect and
                % any given page descriptor.
                \hi@pageordefault{\noexpand\reserved@a}{%
                    \noexpand\reserved@a
                    \@capnext\@format@page@macro\hi@kv@origsect
                }%
            }%
        }%
        % Set the last title to \hi@kv@inline, which is the title to be
        % suppressed on the next citation.
        \hi@inline@never{%
            \noexpand\hi@set@title{\hi@kv@inline}%
        }%
    }%
}
\def\hi@statcode@sc@noorigsect#1{%
    \hi@newcite@form{sc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@statcode@makeshortname
        \hi@citeguts{%
            \hi@inline@only{\hi@citeguts{\noexpand\@nameuse{ic@#1}{s}}}%
            \hi@inline@never{%
                \def\noexpand\reserved@a{}%
                \hi@name@only{% Suppress name text for * citations
                    \noexpand\@expand\noexpand\hi@if@title{%
                        \noexpand\hi@statcode@shortname
                    }i{%
                        \hi@id
                    }{%
                        \noexpand\hi@statcode@shortname
                    }%
                    \def\noexpand\reserved@a{ }%
                }%
                %
                \hi@pageordefault{\noexpand\reserved@a}{%
                    \hi@ifset\hi@kv@page{%
                        \noexpand\reserved@a
                        \@capnext\@format@page@macro\hi@kv@page
                    }{}%
                }%
            }%
        }%
        \hi@inline@never{%
            \noexpand\@expand\noexpand\hi@set@title{%
                \noexpand\hi@statcode@shortname
            }i%
        }%
        \hi@invis@inline
    }%
}
\def\hi@statcode@makeshortname{%
    \hi@ifset\hi@kv@inline{%
        \noexpand\hi@statcode@choosename\noexpand\hi@statcode@shortname
            {\@capnext\hi@kv@inline}{\hi@statcode@volandrep}%
    }{%
        \def\noexpand\hi@statcode@shortname{\hi@statcode@volandrep}%
    }%
}
\DeclareRobustCommand\hi@statcode@choosename[3]{%
    \hi@ifinopt{t}{t}{%
        \hi@ifinopt{v}{t}{\def#1{#2, #3}}{\def#1{#2}}%
    }{%
        \hi@ifinopt{v}{t}{\def#1{#3}}{\def#1{#2}}%
    }%
}
\make@find@in{v}
\def\hi@statcode@fmtname{%
    \hi@ifset\hi@kv@name{%
        \hi@name@only{%
            \@capnext\hi@kv@name
            \hi@ifset\hi@kv@origsect{%
                \hi@pageordefault{ }{%
                    \space\@format@page@macro\hi@kv@origsect
                }%
            }{}%
            ,\noexpand\if@hi@in@toa \hfil\break
            \noexpand\else \space \noexpand\fi
        }%
    }{}%
}
\def\hi@statcode@full@title#1#2#3{%
    \hi@ifset\hi@kv@name{%
        \noexpand\if@hi@name
            #3%
            \noexpand\hi@set@title{#1}%
        \noexpand\else
            \noexpand\hi@if@title{#1}{#2}{#3}%
        \noexpand\fi
    }{%
        \noexpand\hi@if@title{#1}{#2}{#3}%
    }%
}
\def\hi@statcode@volandrep{%
    \hi@ifset\hi@kv@vol{\@capnext\hi@kv@vol\space}{}%
    \noexpand\hi@fn@statute{\hi@kv@rep}%
}
\make@find@eq{U.S.C.}
\make@find@eq{C.F.R.}
\make@find@in{s}
\make@find@in{t}
\def\hi@statcode@inlinesect#1{%
    %
    % Ensure that if \hi@kv@origsect is given, then there is a name given as
    % well. An original section number doesn't make sense otherwise.
    \hi@ifset\hi@kv@origsect{%
        \hi@ifset\hi@kv@name{}{%
            \PackageError\hi@pkgname{%
                Authority #1 has origsect but no name%
            }{Provide the name parameter for this citation}%
        }%
        % It is assumed that \hi@kv@inline was generated, since it can be taken
        % from \hi@kv@name.
    }{}%
    % Format the page numbers, and store them in \reserved@a
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@origsect{%
            \@format@page@macro\hi@kv@origsect
        }{%
            \hi@ifset\hi@kv@page{%
                \@format@page@macro\hi@kv@page
            }{}%
        }%
    }%
    %
    % There are two possible scenarios for the inline citation form of statutes.
    % The special case, treated below, is a citation to the U.S. Code where
    % there is no statute title. In this case, the section number
    % retains the \textsection symbols.
    \hi@ifset\hi@kv@origsect{}{%
        \@expand{\find@try\find@eq{%
            {U.S.C.}{\hi@statcode@special{#1}{U.S. Code}}%
            {C.F.R.}{\hi@statcode@special{#1}{Code of Federal Regulations}}%
        }}\hi@kv@rep i{}%
    }%
    %
    % Now define the general case for inline citations of statutes, in which we
    % expand \textsection to words.
    \@ifundefined{ic@#1}{%
        \protected@edef\reserved@a{%
            \@expand \hi@expand@symbols@ \reserved@a i{\@firstofone}%
        }%
        \hi@newcite@form{ic}{#1}##1{%
            \hi@ifinopt{s}{##1}{%
                \hi@expandedpageordefault{}{\@capnext\reserved@a}%
                \hi@ifset\hi@kv@name{%
                    \hi@ifinopt{t}{##1}{%
                        \hi@nocap\space of \hi@statcode@nameorinline{#1}%
                    }{}%
                }{%
                }%
            }{%
                \hi@statcode@nameorinline{#1}%
            }%
        }
    }{}%
}
\def\hi@statcode@special#1#2{%
    \hi@newcite@form{ic}{#1}##1{%
        %
        % If there is no section number, then force \@this@opt to be
        % just "t".
        \ifx\reserved@a\@empty
            \hi@ifpage{}{\def\noexpand\@this@opt{t}}%
        \fi
        \hi@ifinopt{s}{##1}{%
            \hi@ifset\hi@kv@name{}{%
                \hi@ifinopt{t}{##1}{%
                    \noexpand\hi@nocap
                    \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                    \hi@kv@rep\space
                }{}%
            }%
            \hi@pageordefault{}{%
                \@capnext\reserved@a
            }%
            \hi@ifset\hi@kv@name{%
                \hi@ifinopt{t}{##1}{%
                    \hi@nocap\space of \hi@statcode@nameorinline{#1}%
                }{}%
            }{}%
        }{%
            \hi@ifset\hi@kv@name{%
                \hi@statcode@nameorinline{#1}%
            }{%
                \noexpand\@capnext title \hi@kv@vol \space of the #2%
            }%
        }%
    }%
}
\def\hi@statcode@nameorinline#1{%
    \hi@ifset\hi@kv@inline{%
        \hi@record@choose@inline{#1}{%
            \hi@inline@the\@capnext\hi@kv@name
        }{%
            \hi@kv@inline\hi@short@use{#1}%
        }%
    }{%
        \hi@inline@the\@capnext\hi@kv@name
    }%
}
\hi@newcite\defstatsess{A statute in session laws}{%
    \hi@citetype{#1}\hi@type@statute
    \hi@statsess@name
    \hi@inlinestatname{#1}%
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Pub. L. No.}}%
    \hi@ifset\hi@kv@rep{\hi@ifset\hi@kv@vol\relax{\let\hi@kv@vol\hi@kv@year}}{}%
    \hi@ifset\hi@kv@year{%
        \def\reserved@a{}%
        \hi@ifset\hi@kv@name{\add@macro@to@macro\reserved@a{\hi@kv@name,}}{}%
        \hi@ifset\hi@kv@vol{\add@macro@to@macro\reserved@a{\hi@kv@vol,}}{}%
        \hi@ifset\hi@kv@rep{\add@macro@to@macro\reserved@a{\hi@kv@rep,}}{}%
        \@expand{\expandafter\in@\expandafter{\hi@kv@year}}\reserved@a i%
        \ifin@ \hi@undefine\hi@kv@year \fi
    }{}%
    \hi@ifset\hi@kv@in{%
        \hi@statsess@contained{#1}%
    }{%
        \hi@statsess@normal{#1}%
    }%
    \hi@statsess@shortforms{#1}%
}
\hi@fpg@defsegment{stat}
\def\hi@statsess@contained#1{%
    \hi@newcite@form{fc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@citeguts{%
            \hi@name@only{%
                \hi@inline@the\@capnext\hi@kv@name
            }%
            \hi@maybepage{ }%
            \hi@inline@never{%
                \noexpand\hi@statsess@statpage{%
                    ,
                    \hi@ifset\hi@kv@vol\hi@kv@vol\hi@kv@year \space
                    \noexpand\hi@fn@statute{\hi@kv@rep}\space
                    \noexpand\hi@atorsect@withpage
                }%
            }%
        }%
        \hi@inline@never{%
            , \noexpand\hi@fn@sig{in}\space
            \noexpand\clause{\hi@kv@in\space at \hi@kv@page}%
            \noexpand\hi@clause@endflag
        }%
    }%
}
\def\hi@statsess@normal#1{%
    \hi@newcite@form{fc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@citeguts{%
            \hi@name@only{%
                \hi@inline@the\@capnext\hi@kv@name
            }%
            \hi@inline@never{%
                \hi@name@only{, }%
                \hi@kv@type~\hi@kv@number
                \hi@maybepage{, }%
                \hi@ifset\hi@kv@rep{%
                    ,
                    \hi@ifset\hi@kv@vol\hi@kv@vol\hi@kv@year \space
                    \noexpand\hi@fn@statute{\hi@kv@rep}%
                    \hi@ifset\hi@kv@slip{}{%
                        \space\hi@kv@page
                        \noexpand\hi@statsess@statpage{, \noexpand\@iden}%
                    }%
                }{}%
            }%
        }%
        \hi@inline@never{%
            \hi@ifset\hi@kv@slip{}{\noexpand\hi@statsess@chkstatpage}%
            \hi@ifset\hi@kv@year{%
                \hi@parens@add\hi@paren@date{%
                    \hi@ifset\hi@kv@place{\hi@kv@place\space}{}%
                    \hi@param@optspc\hi@kv@publisher\hi@kv@year
                }%
            }{%
                \hi@ifset\hi@kv@publisher{%
                    \hi@parens@add\hi@paren@date{%
                        \hi@ifset\hi@kv@place{\hi@kv@place\space}{}%
                        \hi@kv@publisher
                    }%
                }{%
                    \hi@ifset\hi@kv@place{%
                        \hi@parens@add\hi@paren@date{\hi@kv@place}%
                    }{}%
                }%
            }%
            \the\hi@param@parens
        }%
    }%
}
\def\hi@statsess@shortforms#1{%
    \hi@newcite@form{sc}{#1}{%
        \hi@maybeusedefaultopt
        \hi@ifset\hi@kv@slip{}{\noexpand\hi@statsess@chkstatpage}%
        \hi@citeguts{%
            \hi@name@only{%
                \hi@ifset\hi@kv@inline{\hi@kv@inline\hi@short@use{#1}}{%
                    \hi@inline@the\@capnext\hi@kv@name
                }%
            }%
            \hi@maybepage{\hi@name@only{ }}%
            \hi@ifset\hi@kv@slip{}{%
                \noexpand\hi@statsess@statpage{%
                    ,
                    \hi@ifset\hi@kv@vol\hi@kv@vol\hi@kv@year \space
                    \noexpand\hi@fn@statute{\hi@kv@rep}\space
                    \noexpand\hi@atorsect@withpage
                }%
            }%
        }%
    }
    \hi@newcite@form{idc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@id
            \noexpand\@test
                \noexpand\ifx\noexpand\@this@page\noexpand\@last@page
            \noexpand\fi{}{%
            }{%
                % Use \hi@pageordefault to determine what to show. If
                % \@this@page is given, prepend it with ~\hi@page@atorsect; if
                % not, do nothing (\@hi@dottrue was set above).
                \hi@pageordefault{%
                    \noexpand~\noexpand\hi@page@atorsect
                }{}%
            }%
            \noexpand\hi@statsess@statpage{%
                \noexpand\@hi@dotfalse
                ,
                \hi@ifset\hi@kv@vol\hi@kv@vol\hi@kv@year \space
                \noexpand\hi@fn@statute{\hi@kv@rep}\space
                \noexpand\hi@atorsect@withpage
            }%
        }%
    }%
}
\make@find@in{ }
\def\hi@statsess@name{%
    \hi@ifset\hi@kv@name\relax{%
        \protected@edef\hi@kv@name{Act of \hi@kv@year}%
        \expandafter\hi@getyear\expandafter{\hi@kv@year}{\def\hi@kv@year}%
        \protected@edef\hi@kv@name{%
            \protect\@gobble{ACT OF \hi@kv@year}\hi@kv@name
        }%
    }%
}
\def\hi@statsess@statpage#1{%
    \ifx\@this@orig@page\relax\else
        \protected@edef\reserved@a{%
            \@expandarg\hi@fpg@segment{\@this@orig@page}{stat}{}{}%
        }%
        \ifx\reserved@a\@empty\else
            \@expand{#1}\reserved@a{i}%
        \fi
    \fi
}
\def\hi@getyear#1#2{\hi@getyear@{#2}{}{#1}}
\def\hi@getyear@#1#2#3{\find@in{ }{#3}{\hi@getyear@{#1}}{#1{#3}}}
\def\hi@statsess@chkstatpage{%
    \ifx\@this@page\relax
        % In some older statutes there are no section numbers, so you could have
        % a pincite page with no pincite section.
        % \ifx\@this@opt\relax\else \hi@statsess@opterr \fi
    \else
        % \@this@orig@page could be \relax which would cause problems, but if
        % \@this@page is not \relax then chances are we're good
        \protected@edef\reserved@a{%
            \@expandarg\hi@fpg@segment{\@this@orig@page}{stat}{}{}%
        }%
        \ifx\reserved@a\@empty \hi@statsess@statpageerr \fi
    \fi
}
\def\hi@statsess@statpageerr{%
    \PackageError\hi@pkgname{%
        Missing page number in session law citation
    }{%
        A pin cite to a statute in session laws must include\MessageBreak
        both a section number and a page number. The page\MessageBreak
        number is placed in a ::stat: segment.%
    }%
}
\hi@newcite\defstattitle{A titled statutory citation}{%
    \hi@citetype{#1}\hi@type@statute
    \hi@include@page@in@toa{#1}%
    \hi@inlinestatname{#1}% Set up \hi@kv@inline based on \hi@kv@name
    \@expand\hi@abbrev@name{\hi@kv@rep}i{\def\hi@kv@rep}%
    \hi@book@pubparen
    \hi@newcite@form{fc}{#1}{%
        \noexpand\hi@stattitle@choppageslash
        \hi@pstruct@initialize\hi@stattitle@choppedpage
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@kv@name
                \hi@maybepage{ },\space
                \hi@pstruct@use{vol}\space
                \hi@pstruct@use@font{rep}\hi@fn@statute\space
                \hi@pstruct@call{page}{\noexpand\@format@page@macro}%
            }%
            \hi@book@lcpost
        }%
        \hi@inline@only{%
            \hi@citeguts{%
                \hi@ifpage{%
                    \noexpand\expandafter\noexpand\@capnext\noexpand\@this@page
                    \space of the \hi@kv@name
                }{%
                    \hi@inline@the\@capnext\hi@kv@name
                }%
            }%
        }%
    }%
    \hi@newcite@form{sc}{#1}{%
        \noexpand\hi@stattitle@choppageslash
        \hi@pstruct@initialize\hi@stattitle@choppedpage
        \hi@short@use{#1}%
        \hi@citeguts{%
            \hi@inline@never{%
                \noexpand\if@hi@name
                    \hi@kv@inline
                    \hi@maybepage{ },\space
                \noexpand\else
                    \hi@ifpage{\noexpand\@this@page, }{}%
                \noexpand\fi
                \hi@pstruct@use{vol}\space
                \hi@pstruct@use@font{rep}\hi@fn@statute\space
                \hi@pstruct@call{page}{\noexpand\@format@page@macro}%
            }%
            \hi@inline@only{%
                \hi@ifpage{%
                    \noexpand\@hi@adjectivetrue
                    \hi@kv@inline\space
                    \noexpand\@this@page
                }{%
                    \hi@kv@inline
                }%
            }%
        }%
    }%
    \hi@newcite@form{idc}{#1}{%
        \noexpand\hi@stattitle@choppageslash
        \hi@pstruct@initialize\hi@stattitle@choppedpage
        \hi@citeguts{%
            \noexpand\hi@id
            \noexpand\@test
                \noexpand\ifx\noexpand\@this@page\noexpand\@last@page
            \noexpand\fi{}{%
                \noexpand\@hi@dotfalse
                \hi@maybepage{ },\space
                \hi@pstruct@use{vol}\space
                \hi@pstruct@use@font{rep}\hi@fn@statute\space
                \hi@pstruct@call{page}{\noexpand\@format@page@macro}%
            }%
        }%
    }%
}%
\DeclareRobustCommand\hi@stattitle@choppageslash{%
    \@expand{\find@in{/}}\@this@orig@page i{%
        \@tworun{\def\hi@stattitle@choppedpage}\@gobble
    }{\let\hi@stattitle@choppedpage\@this@orig@page}%
}
\hi@newcite\defrule{A rule of evidence or procedure}{%
    \hi@citetype{#1}\hi@type@rule
    \hi@statcode@setup@idpc{#1}% Set up id. and page numbering
    \hi@include@page@in@toa{#1}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@name{\noexpand\@capnext\hi@kv@name, }%
            \noexpand\hi@fn@statute{\hi@kv@rep}%
            \hi@pageordefault{ }{%
                \hi@ifset\hi@kv@page{ \@format@page@macro\hi@kv@page}{}%
            }%
        }%
        \hi@ifeitherset\hi@kv@year\hi@kv@court{%
            \hi@addparen{\hi@paren@date}{%
                \hi@param@optspc\hi@kv@court\hi@kv@year
            }%
        }{}%
        \the\hi@param@parens
    }%
}
%%
%% \iffalse filename: specrefs.dtx \fi
\hi@newcite\defbill{An bill or resolution of Congress}{%
    \hi@citetype{#1}\hi@type@other
    \hi@inlinestatname{#1}%
    \hi@ifset\hi@kv@congress{}{%
        \PackageError\hi@pkgname{%
            Definition of #1 is missing the Congress number%
        }{Provide the number in the definition}%
    }%
    \hi@ifset\hi@kv@status{%
        \@expand{\find@in{ by }}\hi@kv@status i{\hi@bill@abbrevstatus}{}%
    }{}%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@name{\@capnext\hi@kv@name, }{}%
                \hi@kv@number,
                \expandafter\hi@numtotxt@numeric\expandafter{\hi@kv@congress}~%
                Cong.%
                \hi@maybepage{ }%
            }%
            \hi@parens@add{\hi@paren@date}{%
                \hi@ifset\hi@kv@status{as \hi@kv@status, }{}%
                \hi@kv@year
            }%
            \the\hi@param@parens
        }%
        \hi@inline@only{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@name{\hi@inline@the\hi@kv@name}{\hi@kv@number}%
            }%
        }%
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@kv@number
                \hi@maybepage{, \hi@page@atorsect}%
            }%
        }%
        \hi@inline@only{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@inline{\hi@kv@inline}{\hi@kv@number}%
            }%
        }%
    }%
}
\def\hi@bill@abbrevstatus#1#2{%
    \def\hi@kv@status{#1 by }%
    \hi@abbrev@leg{#2}{\appto\hi@kv@status}%
}
\hi@newcite\defcongdoc{A Congressional numbered document}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \noexpand\hi@fn@bookauthor{\hi@kv@author},
            }{}%
            \hi@ifset\hi@kv@name{%
                \noexpand\hi@fn@booktitle{\hi@kv@name},
            }{}%
            \noexpand\hi@fn@congdoc{\hi@kv@number}%
            \hi@ifset\hi@kv@page{%
                , \@format@page@macro\hi@kv@page
            }{}%
            \hi@maybepage{, \hi@page@atorsect}%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@congdoc{\hi@kv@number}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
    \expandafter\hi@congdoc@expandnumber\expandafter{\hi@kv@number}%
    \hi@newcite@form{lc}{#1}{%
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \noexpand\hi@fn@bookauthor{\hi@kv@author},
            }{}%
            \hi@ifset\hi@kv@name{%
                \noexpand\hi@fn@booktitle{\hi@kv@name},
            }{}%
            \noexpand\hi@fn@congdoc{\reserved@a}%
            \hi@ifset\hi@kv@page{%
                , \@format@page@macro\hi@kv@page
            }{}%
            \hi@maybepage{, \hi@page@atorsect}%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
}
\def\hi@congdoc@expandnumber#1{%
    \@expand{\find@try\find@start}\hi@congdoc@list i{#1}{%
        \PackageError\hi@pkgname{%
            #1 is not a valid congressional document number
        }{Use a valid name such as H.R. Rep. No. or S. Doc. No.}%
    }%
}
\def\hi@congdoc@do#1#2{%
    \def\reserved@a{#1#2}%
}
\def\hi@congdoc@list{}
\def\hi@congdoc@add#1#2{%
    \make@find@start{H.R. #1 No. }
    \make@find@start{S. #1 No. }
    \addto@macro\hi@congdoc@list{%
        {H.R. #1 No. }{\hi@congdoc@do{House #2 No. }}%
        {S. #1 No. }{\hi@congdoc@do{Senate #2 No. }}%
    }%
}
\hi@congdoc@add{Rep.}{Report}
\hi@congdoc@add{Conf. Rep.}{Conference Report}
\hi@congdoc@add{Doc.}{Document}
\hi@congdoc@add{Exec. Doc.}{Executive Document}
\hi@congdoc@add{Misc. Doc.}{Miscellaneous Document}
\hi@newcite\defcongprint{A Congressional unnumbered document}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \noexpand\hi@fn@bookauthor{\hi@kv@author},
            }{%
                \hi@ifset\hi@kv@committee{%
                    \hi@noexpand\hi@fn@bookauthor{%
                        Staff of \hi@kv@committee,
                    }%
                }{}%
            }%
            \noexpand\hi@fn@bookauthor{%
                \expandafter\hi@numtotxt@numeric\expandafter{\hi@kv@congress}%
                ~Cong.,
            },
            \noexpand\hi@fn@booktitle{\hi@kv@name}%
            \hi@maybepage{\hi@page@space\hi@kv@name}%
        }%
        \hi@parens@add\hi@paren@date{Comm. Print \hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@booktitle{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defcongrec{A Congressional Record debate}{%
    \expandafter\hi@congrec@testpg\hi@kv@page\@stop
    \hi@book@pubparen
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@usevol{\hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}}%
            \noexpand\hi@fn@congdoc{\hi@kv@rep}\space
            \hi@ifpage{\hi@maybepage{}}{\@format@page@macro\hi@kv@page}%
        }%
        \hi@parens@add\hi@paren@date{%
            \hi@book@paren
            \hi@pstruct@use{year}%
        }%
        \the\hi@param@parens
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \hi@kv@vol\space
            \hi@kv@rep\space at\space
            \hi@ifpage{\hi@maybepage{}}{\hi@kv@page}%
        }%
    }%
}
\def\hi@congrec@testpg#1#2\@stop{%
    \@ifdigit{#1}{}{%
        \def\hi@kv@edition{daily ed.}%
    }%
}
\def\lc@cr{Congressional Record}
\def\tcpg@cr{} % Note: not sure if the volumes will show up
\def\fc@cr{%
    \hi@citeguts{%
        \@this@vol\space
        \hi@fn@congdoc{Cong. Rec.}\space
        \@this@page
    }%
    \ifx\@this@opt\relax\else
        \hi@parens@add\hi@paren@date{\@expandarg\hi@date@parse\@this@opt}%
    \fi
}
\hi@citetype{cr}\hi@type@other
\hi@newcite\defhearing{A hearing in Congress}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Hearing}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@usevol{}%
            \noexpand\hi@fn@hearing{%
                \hi@ifset\hi@kv@name{\hi@kv@name: }{}%
                \hi@kv@type\space
                \hi@ifset\hi@kv@number{on \hi@kv@number\space}{}%
                Before the \hi@kv@committee
            }\hi@font@comma
            \expandafter\hi@numtotxt@numeric\expandafter{\hi@kv@congress}~Cong.%
            \noexpand\@hi@dottrue
            \hi@maybepage{ }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@hearing{%
            \hi@ifset\hi@kv@name{%
                \hi@kv@name
            }{%
                Hearing\space
                \hi@ifset\hi@kv@bill{%
                    on \hi@kv@bill
                }{%
                    Before the \hi@kv@committee
                }%
            }%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\make@find@in{, }
\hi@newcite\defprespaper{A Presidential Paper}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@name, % Title
            \hi@kv@vol\space % Volume
            \hi@kv@rep\space % Title
            \hi@kv@page % Page number
            \hi@maybepage{, }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
}
\hi@newcite\defdcpd{Daily Compilation of Presidential Documents}{
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@name,
            \hi@fn@jrntitle{Daily Comp. Pres. Doc.} No. \hi@kv@number
            \hi@maybepage{, at }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \hi@kv@name,
            \hi@fn@jrntitle{Daily Comp. Pres. Doc.} No. \hi@kv@number
            \hi@maybepage{, at }%
        }%
    }%
}
\hi@newcite\defpatent{A U.S. patent}{%
    \hi@citetype{#1}\hi@type@other
    \let\reserved@a\@empty
    \@expand{\find@start{D}}\hi@kv@number i{%
        \def\reserved@a{D}\def\hi@kv@number
    }{}%
    \ifnum\hi@kv@number<\@m
        \let\hi@kv@inline\hi@kv@number
    \else
        \@tempcnta\hi@kv@number\relax
        \divide\@tempcnta\@m \multiply\@tempcnta-\@m
        \advance\@tempcnta\hi@kv@number\relax
        \def\hi@kv@inline{'\the\@tempcnta}%
    \fi
    \edef\hi@kv@number{%
        \expandafter\hi@numtotxt@comma\expandafter{\hi@kv@number}%
    }%
    %
    % So long as the date contains some prefix, I don't really care if it's
    % ``issued'' or ``filed''.
    %
    \@expand{%
        \find@start@cs{/hi@fn@dateprefix}%
    }{\hi@kv@year}{i}{\@gobble}{%
        \PackageWarning\hi@pkgname{%
            For patent citation #1, the date must include a\MessageBreak
            qualifier such as `filed' or `issued'.\MessageBreak
            This occurred%
        }%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@name{\@capnext\hi@kv@name, }\@empty
            U.S. Patent No. \reserved@a\hi@kv@number
            \hi@maybepage{ }%
        }%
        \hi@inline@never{%
            \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
            \the\hi@param@parens
        }%
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@inline@the
            \hi@kv@inline\space Patent%
            \hi@maybepage{ }%
        }%
    }%
}
\make@find@start{D}
\make@find@start@cs{/hi@fn@dateprefix}{\hi@fn@dateprefix}
\hi@newcite\defgovdoc{A government document}{%
    \hi@ifset\hi@kv@court{}{%
        \hi@ifset\hi@kv@author{\let\hi@kv@court\hi@kv@author}{}%
    }%
    \hi@cite@history
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@number{%
                \@capnext\hi@kv@number,
            }{}%
            \hi@ifset\hi@kv@name{%
                \@capnext\hi@kv@name
            }{}%
            \hi@ifset\hi@kv@rep{%
                ,
                \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                \hi@kv@rep\space \hi@kv@page
                \hi@maybepage{, }%
            }{%
                \hi@ifset\hi@kv@docket{%
                    , \hi@kv@docket
                    \hi@maybepage{, }%
                }{%
                    \hi@maybepage{ }%
                }%
            }%
        }%
        \hi@case@dateparen{%
            \hi@parens@add\hi@paren@date{%
                \hi@param@optspc\hi@kv@court\hi@kv@year
            }%
        }y%
        \the\hi@param@parens
    }
    % TODO think about the general case for the short form
    \hi@ifset\hi@kv@rep{%
        \hi@newcite@form{sc}{#1}{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                \hi@kv@rep
                \hi@pageordefault{ at }{ \hi@kv@page}%
            }%
        }%
    }{%
        \@expand{\hi@supra@form{#1}}\hi@kv@name i%
    }%
}
\hi@alias@cite\deffedreg\defgovdoc
\hi@newcite\deftestimony{Testimony in a congressional hearing}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Testimony}}%
    \hi@ifset\hi@kv@citation{}{%
        \hi@ifset\hi@kv@in{\let\hi@kv@citation\hi@kv@in}{%
            \PackageError\hi@pkgname{%
                \string\deftestimony\space requires parameter `citation'%
            }{Add the parameter}%
        }%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@type\space of
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable}{}%
            \hi@maybepage{ \hi@page@atorsect}%
            ,\space
            \noexpand\clause{\hi@kv@citation}\noexpand\hi@clause@endflag
        }
        \the\hi@param@parens
    }%
    \@expand{\hi@supra@form{#1}}\hi@kv@author i%
}
\hi@newcite\defcomments{Comments on an agency proceeding}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Comments}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \hi@kv@type\space of
            \hi@kv@commenter
            \hi@maybepage{ }%
            ,\space
            \noexpand\hi@fn@arttitle{%
                \hi@kv@name
            }%
            \hi@ifset\hi@kv@rep{%
                , \hi@kv@vol\space \hi@kv@rep\space \hi@kv@page
            }{}%`
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@court\space\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@arttitle{Comments on \hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defsecfiling{An SEC filing}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \hi@kv@name\space
            (Form \hi@kv@number)%
            \hi@maybepage{, at }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
}
%%
%% \iffalse filename: bookrefs.dtx \fi
%%
\def\hi@book@pubparen{%
    \let\hi@book@paren\@empty  % Date parenthetical
    \hi@ifset\hi@kv@editor{%
        \hi@ifset\hi@kv@edtype{%
            \ifstrempty\hi@kv@edtype{}{%
                \addto@macro\hi@kv@editor{ }%
                \add@macro@to@macro\hi@kv@editor\hi@kv@edtype
            }%
        }{%
            \@expand{\find@in@cs{hi@namelist@and}}{\hi@kv@editor}{i}{%
                \addto@macro\hi@kv@editor{ eds.}\@gobbletwo
            }{%
                \@expand{\find@end{ et al.}}{\hi@kv@editor}{i}{%
                    \addto@macro\hi@kv@editor{ eds.}\@gobble
                }{%
                    \addto@macro\hi@kv@editor{ ed.}%
                }%
            }%
        }%
        \def\hi@book@paren{\hi@kv@editor, }%
    }{}%
    \hi@ifset\hi@kv@number{%
        \@expand{\find@in{, }}\hi@kv@number i{\hi@book@serial}{}%
    }{}%
    % Previously there was a check to see if a year was present, but since this
    % macro is now also used for statutes that might legitimately have no date,
    % the year check was taken out.
    \hi@ifset\hi@kv@edition{%
        \addto@macro\hi@book@paren{%
            \hi@kv@edition
            \hi@ifset\hi@kv@publisher{, \hi@kv@publisher}{}%
            \space}%
    }{%
        \hi@ifset\hi@kv@publisher{%
            \addto@macro\hi@book@paren{\hi@kv@publisher\space}%
        }{}%
    }%
    \hi@ifset\hi@kv@forthcoming{%
        \addto@macro\hi@book@paren{forthcoming }%
    }{}%
}
\def\hi@book@serial#1#2{%
    \find@in{, }{#2}{%
        \PackageWarning\hi@pkgname{%
            Found comma in serial number:\MessageBreak
            institution=#1,\MessageBreak
            number \@spaces=#2.\MessageBreak
            I use commas to delimit institutions from serial\MessageBreak
            numbers, so you should use braces so I know which\MessageBreak
            comma actually belongs to a part.\MessageBreak
            This occurred%
        }%
        \@gobbletwo
    }{}%
    % Abbreviate the first part.
    \hi@abbrev@name{#1}{\def\hi@kv@number}%
    \addto@macro\hi@kv@number{, #2}%
    \expandafter\addto@macro\expandafter\hi@book@paren\expandafter{%
        \hi@kv@number, %
    }%
    \hi@undefine\hi@kv@number % Date parenthetical
}
\def\hi@book@lcpost{%
    \hi@ifset\hi@kv@year{%
        \hi@parens@add\hi@paren@date{%
            \hi@book@paren
            \hi@pstruct@use{year}%
        }%
    }{%
        \ifx\hi@book@paren\@empty\else
            \hi@parens@add\hi@paren@date{%
                \hi@book@paren
            }%
        \fi
    }%
    \the\hi@param@parens
}
\hi@newcite\defbook{A book or non-periodic material}{%
    \hi@citetype{#1}\hi@type@other
    \hi@book@pubparen
    \expandafter\hi@book@titlethe\expandafter{\hi@kv@name}%
    \hi@newcite@form{ic}{#1}{%
        \hi@citeguts{\hi@kv@author}%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@pstruct@initialize\@this@vol
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \noexpand\if@hi@inline
            \expandafter\noexpand\csname ic@#1\endcsname
        \noexpand\else
            \hi@citeguts{%
                \noexpand\hi@citecontainer@suppress{%
                    \noexpand\hi@usevol{%
                        \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                    }%
                    \hi@ifset\hi@kv@author{%
                        \hi@pstruct@use@font{author}\hi@fn@bookauthor, % space
                    }{}%
                }%
                \hi@ifset\hi@kv@number{%
                    \noexpand\hi@fn@booktitle{\hi@kv@number}, % space
                }{}%
                \hi@pstruct@use@font{name}\hi@fn@booktitle
                \hi@maybepage{\hi@page@space\hi@kv@name}%
            }%
            \hi@parens@add\hi@paren@date{%
                \hi@book@paren
                \hi@pstruct@use{year}%
            }%
            \the\hi@param@parens
        \noexpand\fi
    }%
    \hi@ifset\hi@kv@toapage{%
        \hi@include@page@in@toa{#1}%
        \hi@newcite@form{lc}{#1}{%
            \noexpand\hi@toa@duptitle{}{%
                \noexpand\hi@fn@bookauthor{\relax\hi@kv@author@sortable},\space
                \noexpand\hi@usevol{\hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}}%
                \hi@ifset\hi@kv@number{%
                    \noexpand\hi@fn@booktitle{\hi@kv@number}, % space
                }{}%
                \hi@fn@booktitle{\hi@kv@name}%
            }{%
                \hi@maybepage{\hi@page@space\hi@kv@name}%
                % The \reserved@a is to get the parens outside of \hi@citeguts
                % which is added kn \hi@toa@duptitle
                \gdef\noexpand\reserved@a{\hi@book@lcpost}%
                \noexpand\aftergroup\noexpand\reserved@a
            }{%
                \hi@maybepage{ }%
            }%
        }%
    }{%
        \hi@newcite@form{lc}{#1}{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@author{%
                    \hi@toa@dupauthor{\hi@fn@bookauthor}{%
                        \hi@kv@author@sortable
                    }%
                }{\hi@toa@dupnone}%
                \noexpand\hi@usevol{\hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}}%
                \hi@ifset\hi@kv@number{%
                    \noexpand\hi@fn@booktitle{\hi@kv@number}, % space
                }{}%
                \hi@fn@booktitle{\hi@kv@name}%
            }%
            \hi@parens@add\hi@paren@date{%
                \hi@book@paren
                \hi@pstruct@use{year}%
            }%
            \the\hi@param@parens
        }%
    }%
    \hi@ifset\hi@kv@authln{}{\let\hi@kv@usetitle\relax}%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@usetitle
            {\noexpand\hi@fn@booktitle{\hi@kv@name}}%
            {\noexpand\hi@fn@bookauthor{\hi@kv@authln}}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\make@find@start{The }
\def\hi@book@titlethe#1{%
    \find@start{The }{#1}{\hi@book@titlethe@}{}%
}
\def\hi@book@titlethe@#1{%
    \def\hi@kv@name{\hi@book@the#1}%
}
\DeclareRobustCommand\hi@book@the{The }
\make@find@in{, }
\hi@newcite\defcitecontainer{A citation in another citation}{%
    %
    % Set the joining phrase.
    %
    \hi@citecontainer@settype
    %
    % Perform initial matters to set up the citecontainer; see the comment
    % before \hi@citecontainer@init.
    \edef\reserved@a{%
        {#1}%
        \expandafter\noexpand\csname tc@#1\endcsname
        \hi@ifset\hi@kv@citation{%
            \expandafter\noexpand\csname tc@\hi@kv@citation\endcsname
            \expandafter\noexpand\csname fc@\hi@kv@citation\endcsname
        }{\relax\relax}%
    }%
    \expandafter\hi@citecontainer@init\reserved@a
    %
    % Prepare the full citation form.
    \edef\reserved@a{%
        {#1}%
        \expandafter\noexpand\csname fc@#1\endcsname
        \expandafter\noexpand\csname tcpg@\hi@kv@in\endcsname
    }%
    \expandafter\hi@citecontainer@fc\reserved@a
    %
    % Prepare the short citation form.
    \edef\reserved@a{%
        {#1}%
        \expandafter\noexpand\csname sc@#1\endcsname
        \hi@ifset\hi@kv@citation{%
            \expandafter\noexpand\csname sc@\hi@kv@citation\endcsname
        }{\relax}%
    }%
    \expandafter\hi@citecontainer@sc\reserved@a
    %
    % Cite container TOA form.
    %
    \edef\reserved@a{%
        {#1}%
        \expandafter\noexpand\csname lc@#1\endcsname
        \hi@ifset\hi@kv@citation{%
            \expandafter\noexpand\csname
                \@ifundefined{lc@\hi@kv@citation}{fc}{lc}@\hi@kv@citation
            \endcsname
        }{\relax}%
        %
        % We always use the fullcite form for the container, not the TOA form.
        % This is because the TOA form is sometimes special in ways that are not
        % appropriate to being the second citation in a string cite, and also
        % because the TOA forms sometimes don't account for things like page
        % numbers.
        \expandafter\noexpand\csname fc@\hi@kv@in\endcsname
        %
        % This macro enables storing the volume/page number for the container
        % citation.
        \expandafter\noexpand\csname hi@citecontainer@data@#1\endcsname
    }
    \expandafter\hi@citecontainer@lc\reserved@a
}
\def\hi@citecontainer@settype{%
    \hi@ifset\hi@kv@type{%
        \@expand{\find@try\find@eq{%
            {to}{\def\hi@kv@type{ to}}%
            {of}{\def\hi@kv@type{ of}}%
        }}\hi@kv@type i{%
            \@expand{\def\hi@kv@type}{\expandafter{\hi@kv@type}}i%
            \prepend@macro\hi@kv@type{, \noexpand\hi@fn@sig}%
        }%
    }{%
        \def\hi@kv@type{, \noexpand\hi@fn@sig{in}}%
    }%
}
\def\hi@citecontainer@init#1#2#3#4{%
    %
    % 2. If \hi@kv@citation is set, then the contained element is a citation.
    % Otherwise, the contained element is a generic article within the work, so
    % a citation form is constructed for it.
    %
    % The relevant contents from the contained citation are placed in
    % \hi@citecontainer@toks, to be added subsequently to the \fc@[#1] macro.
    %
    \hi@ifset\hi@kv@citation{%
        % In the case that the contained element is a citation:
        %
        % The TOA type for the citecontainer should be the TOA type of the
        % contained element.
        \global\let#2#3%
        %
        % No TOA entry should be made for the contained element alone.
        \global\let#3\relax
        %
        % Set \hi@citecontainer@toks to the (already-created) full-cite material
        % of \fc@[citation].
        \expandafter\hi@citecontainer@toks\expandafter{#4}%
    }{%
        % In the case that no citation is provided:
        %
        % Set up citecontainer with the author, name, and date.
        \protected@edef\reserved@a{%
            \hi@citecontainer@toks={%
                \hi@ifset\hi@kv@author{%
                    \hi@ifset\hi@kv@singleauthor{%
                        \noexpand\@gobble{\hi@kv@authln}%
                        \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                        \noexpand\hi@fn@bookauthor{\hi@kv@author}%
                    }{%
                        \hi@kv@author@sortable
                    }%
                    ,\space
                }{}%
                \noexpand\hi@fn@arttitle{\hi@kv@name}%
                \hi@ifset\hi@kv@year{%
                    \noexpand\hi@parens@add\noexpand\hi@paren@date{\hi@kv@year}%
                }{}%
                %
                % Any parentheticals attached to the citation itself get placed
                % from here.
                \the\hi@param@parens
            }%
        }\reserved@a
        %
        % Set up the short-form information for this citation.
        \hi@ifset\hi@kv@inline{}{%
            \hi@ifset\hi@kv@authln{%
                \hi@ifset\hi@kv@singleauthor{%
                    \protected@edef\hi@kv@inline{%
                        \noexpand\hi@fn@bookauthor{\hi@kv@authln}%
                    }%
                }{%
                    \let\hi@kv@inline\hi@kv@authln
                }%
            }{%
                \protected@edef\hi@kv@inline{%
                    \noexpand\hi@fn@arttitle{\hi@kv@name}%
                }%
            }%
        }%
        %
        % Set the TOA cite type to 'other'.
        \hi@citetype{#1}\hi@type@other
    }%
    %
    % 3. The citation reference for the container should be in the citation
    % parameter 'in' or 'rep'.
    \hi@ifset\hi@kv@in{\let\hi@kv@rep\hi@kv@in}{%
        \hi@ifset\hi@kv@rep{%
            \let\hi@kv@in\hi@kv@rep
        }{%
            \PackageError\hi@pkgname{%
                Missing `in' citation for citecontainer #1
            }{%
                A reference to a case is required for \string\defcitecontainer
            }%
        }%
    }%
}
\make@find@in{ at }
\make@find@eq{to}
\make@find@eq{of}
\newtoks\hi@citecontainer@toks
\def\hi@citecontainer@fc#1#2#3{%
    %
    % Insert the contained citation. This is done in a group, with pincite
    % information omitted since that information pertains to the container.
    %
    \hi@newcite@form{fc}{#1}{%
        \begingroup
            \let\noexpand\@this@page\relax
            \let\noexpand\@this@vol\relax
            \let\noexpand\@this@opt\relax
            %
            % We reset the parentheticals list here, which clears out any
            % citation-level parentheticals. \hi@citecontainer@toks will insert
            % parentheticals associated with the contained reference, which will
            % then be shown with the subsequent \hi@parens@show command.
            \noexpand\hi@parens@reset
            \the\hi@citecontainer@toks
            \noexpand\hi@parens@show
        \endgroup
        %
        % This is the end of the contained citation. Ensure that capitalization
        % is turned off.
        \hi@nocap
        %
        % Insert the transitional phrase between the container and contained
        % material.
        \hi@kv@type\space
        \begingroup
            % If singleauthor is set (which only makes sense if citation is not
            % set), instruct the book citation to suppress display of the author
            % and volume.
            \hi@ifset\hi@kv@citation{}{\hi@ifset\hi@kv@singleauthor{%
                \let\noexpand\hi@citecontainer@suppress\noexpand\@gobble
            }{}}%
            %
            % Insert the contents of the container citation. This is delegated
            % to the macro \hi@citecontainer@addpg.
            \let\noexpand#3\relax % Turn off page numbers for TOA references
            \hi@citecontainer@addpg{%
                \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                \hi@kv@in
            }{%
                \space at\space
                \hi@ifset\hi@kv@page{\hi@kv@page, }{}%
            }{%
                \hi@ifset\hi@kv@page{ at \hi@kv@page}{}%
            }%
        \endgroup
        %
        % Add short citation form records for the container, so that way other
        % uses of the container use the short form.
        \hi@ifset\hi@kv@citation{\hi@record@cite{\hi@kv@citation}}{}%
        %
        % This may be duplicative since |\clause| will already call
        % |\hi@record@cite|; need to check
        %
        \hi@record@cite{\hi@kv@in}%
    }%
}
\let\hi@citecontainer@suppress\@iden
\def\hi@citecontainer@sc#1#2#3{%
    %
    % Short citation form. If a form is given in the 'inline' parameter, use
    % that. (If the contained material was an author/title, then 'inline' was
    % set already above.) Otherwise, we want to copy the citation form for the
    % contained reference.
    \hi@ifset\hi@kv@inline{%
        \@expand{\hi@supra@form{#1}}\hi@kv@inline i%
    }{%
        \hi@newcite@form{sc}{#1}{}%
        \global\let#2#3%
    }%
}
\def\hi@citecontainer@lc#1#2#3#4#5{%
    %
    % Set up the token lists
    \hi@ifset\hi@kv@citation{%
        \expandafter\hi@citecontainer@toks\expandafter{#3}%
    }{}%
    \expandafter\@temptokena\expandafter{#4}%
    %
    % Make the citation form
    \hi@newcite@form{lc}{#1}{%
        %
        % Unlike with the fc form, \hi@parens@reset is not necessary here
        % because there are no citation-level parentheticals.
        \the\hi@citecontainer@toks
        \noexpand\hi@parens@show
        % Because the container citation is not separated from the contained by
        % a group, we reset the parens here so that any of them shown thus far
        % are not repeated.
        \noexpand\hi@parens@reset
        \noexpand\hi@nocap \hi@kv@type\space
        %
        % Make the container citation. To do so, we set the volume and page (in
        % the macro for this citecontainer) and then dereference \@temptokena,
        % which houses the container citation matter.
        \hi@ifset\hi@kv@citation{}{\hi@ifset\hi@kv@singleauthor{%
            \let\noexpand\hi@citecontainer@suppress\noexpand\@gobble
        }{}}%
        #5\the\@temptokena
        \let\noexpand\hi@citecontainer@suppress\noexpand\@iden
    }%
    \global\let#2#2%
    %
    % Make the volume/page data.
    \protected@edef#5{%
        \hi@ifset\hi@kv@vol{\def\noexpand\@this@vol{\hi@kv@vol}}{}%
        \hi@ifset\hi@kv@page{%
            \def\noexpand\@this@orig@page{\hi@kv@page}%
            \@ifundefined{pc@#1}{%
                \def\noexpand\@this@page{\@format@page@macro\hi@kv@page}%
            }{%
                \@expand{\@nameuse{pc@#1}}\hi@kv@page i%
            }%
        }{}%
    }%
    \global\let#5#5%
}
\DeclareRobustCommand\hi@citecontainer@addpg[3]{%
    \@test\ifx\@this@page\relax\fi{%
        \clause{#1#3}\hi@clause@endflag
    }{%
        \def\reserved@a{#1#2}%
        \add@macro@to@macro\reserved@a\@this@orig@page
        \expandafter\clause\expandafter{\reserved@a}\hi@clause@endflag
    }%
}
%%
%% \iffalse filename: artrefs.dtx \fi
%%
\hi@newcite\defjrnart{A consecutively paginated journal article}{%
    \hi@citetype{#1}\hi@type@other
    \hi@abbrev@journal@check
    \@expand{\find@eq{forthcoming}}{\hi@kv@page}{i}{%
        \hi@undefine\hi@kv@page
        \KV@hi@forthcoming\relax
    }{}%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@ifset\hi@kv@author{%
                    \hi@toa@dupauthor{\noexpand\@iden}{\hi@kv@author@sortable}%
                }{}%
                \hi@ifset\hi@kv@type{\@capnext\hi@kv@type, }{}%
                \hi@ifset\hi@kv@name{% Title
                    \noexpand\hi@fn@arttitle{\hi@kv@name}\hi@font@comma
                }{%
                    % If no title set, if there's a citation, use that as the
                    % title
                    \hi@ifset\hi@kv@citation{%
                        \noexpand\hi@fn@arttitle{%
                            \protect\inline{\hi@kv@citation}%
                        },
                    }{}%
                }%
                \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{%
                    % Prompt error unless forthcoming
                    \hi@ifset\hi@kv@forthcoming{}{\hi@kv@vol\space}%
                }% Volume
                \noexpand\hi@fn@jrntitle{\hi@kv@rep}% Magazine title
                \hi@ifset\hi@kv@forthcoming{}{%
                    \space
                    \hi@ifset\hi@kv@useissue{%
                        No.~\hi@kv@issue, at\space
                    }{}%
                    \@format@page@macro\hi@kv@page % First page
                    \hi@maybepage{, }% Pin cite page
                }%
            }%
            \the\hi@param@parens
            \hi@ifset\hi@kv@forthcoming{%
                \hi@parens@add\hi@paren@date{%
                    forthcoming%
                    \hi@ifset\hi@kv@year{ \hi@kv@year}{}%
                }%
                \noexpand\ifx\noexpand\@this@page\relax\noexpand\else
                    \hi@parens@add\hi@paren@forthcomingms{%
                        manuscript at \noexpand\@this@page
                    }%
                \noexpand\fi
            }{%
                \hi@ifset\hi@kv@vol{%
                    \ifx\hi@kv@vol\hi@kv@year\else
                        \hi@parens@add\hi@paren@date{\hi@kv@year}%
                    \fi
                }{}%
            }%
        }%
        \hi@inline@only{%
            \hi@citeguts{\hi@kv@author}%
        }%
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{%
            \hi@ifset\hi@kv@type{\@capnext\hi@kv@type}{%
                \noexpand\hi@fn@arttitle{\hi@kv@name}%
            }%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\make@find@eq{forthcoming}
\hi@newcite\defprocart{A non-consecutively paginated proceedings article}{%
    \hi@citetype{#1}\hi@type@other
    \hi@abbrev@journal@check
    \hi@ifset\hi@kv@page{}{%
        \hi@ifset\hi@kv@issue{%
            \edef\hi@kv@page{No. \expandonce\hi@kv@issue}%
        }{}%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \hi@toa@dupauthor{\noexpand\@iden}{\hi@kv@author@sortable}%
            }{}%
            \hi@ifset\hi@kv@type{\@capnext\hi@kv@type, }{}%
            \noexpand\hi@fn@arttitle{\hi@kv@name}%
            \hi@maybepage{ }\hi@font@comma
            \noexpand\hi@fn@sig{in}\space
            \hi@ifset\hi@kv@vol{\hi@kv@vol}{\hi@kv@year} % Volume
            \noexpand\hi@fn@jrntitle{\hi@kv@rep}%
            \hi@ifset\hi@kv@page{\space \@format@page@macro\hi@kv@page}{}%
        }%
        \hi@ifset\hi@kv@vol{%
            \hi@parens@add\hi@paren@date{\hi@kv@year}%
        }{}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{%
            \hi@ifset\hi@kv@type{\@capnext\hi@kv@type}{%
                \noexpand\hi@fn@arttitle{\hi@kv@name}%
            }%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}%
\hi@newcite\defmagart{A magazine article}{%
    \hi@citetype{#1}\hi@type@other
    \hi@abbrev@journal@check
    \hi@ifset\hi@kv@page{%
        \protected@edef\hi@kv@page{\@format@page@macro\hi@kv@page}%
    }{}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \noexpand\hi@fn@arttitle{\hi@kv@name}\hi@font@comma % Title
            \noexpand\hi@fn@jrntitle{\hi@kv@rep}% Magazine title
            \hi@ifset\hi@kv@publisher{ (\hi@kv@publisher)}{}%
            \hi@font@comma
            \hi@kv@year
            \hi@ifset\hi@kv@page{%
                ,
                \expandafter\hi@atorsect\expandafter{\hi@kv@page}%
                \hi@kv@page % First page number; already formatted above
                \hi@maybepage{, }%
            }{%
                \hi@maybepage{, \hi@page@atorsect}%
            }%
        }%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{%
            \noexpand\hi@fn@arttitle{\hi@kv@name}%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@alias@cite\defnewsart\defmagart
\hi@newcite\defwebsite{A web site or generic citation}{%
    \hi@citetype{#1}\hi@type@other
    \hi@book@pubparen
    \hi@ifset\hi@kv@rep{\hi@abbrev@journal@check}{}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \hi@toa@dupauthor{\noexpand\@iden}{\hi@kv@author@sortable}%
            }{}%
            \hi@ifset\hi@kv@name{\noexpand\hi@fn@webtitle{\hi@kv@name}}{}%
            \hi@ifset\hi@kv@rep{%
                \hi@ifset\hi@kv@name{\hi@font@comma}{}%
                \noexpand\hi@fn@jrntitle{\hi@kv@rep}%
            }{}%
            \hi@maybepage{ }%
        }%
        \hi@ifset\hi@kv@year{%
            \hi@parens@add\hi@paren@date{%
                \hi@book@paren
                \hi@pstruct@use{year}%
            }%
        }{}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\hi@kv@authln}{%
            \noexpand\hi@fn@webtitle{\hi@kv@name}%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defmanuscript{An unpublished manuscript}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{manuscript}}
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \hi@kv@name
            \hi@maybepage{\hi@page@space\hi@kv@name}%
        }%
        \the\hi@param@parens
        \hi@parens@add\hi@paren@manuscript{%
            unpublished \hi@kv@type
            \hi@ifset\hi@kv@onfile{, on file with \hi@kv@onfile}{}%
        }%
        \hi@parens@add\hi@paren@date{\hi@kv@year}%
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defworkingpaper{A working paper}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \noexpand\hi@fn@arttitle{\hi@kv@name}%
            \hi@maybepage{ }%
        }%
        \hi@parens@add{\hi@paren@date}{%
            \hi@kv@publisher, \hi@kv@number, \hi@kv@year
        }%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{%
            \hi@ifset\hi@kv@type{\@capnext\hi@kv@type}{%
                \noexpand\hi@fn@arttitle{\hi@kv@name}%
            }%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
%%
%% \iffalse filename: foreignrefs.dtx \fi
%%
\hi@newcite\defengdebate{An English parliamentary debate}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{%
            \hi@usevol{\hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}}%
            \noexpand\hi@fn@statute{\hi@kv@rep}\space
            \hi@ifset\hi@kv@number{%
                (\hi@kv@number
                \expandafter\hi@numtoord\expandafter{\hi@kv@number} ser.)\space
            }{}%
            (\hi@kv@year)\space
            \hi@pageordefault{}{%
                \@format@page@macro\hi@kv@page
            }%
        }%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@usevol{\hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}}%
            \noexpand\hi@fn@statute{\hi@kv@rep}\space
            \hi@ifset\hi@kv@number{%
                (\hi@kv@number
                \expandafter\hi@numtoord\expandafter{\hi@kv@number} ser.)\space
            }{}%
            (\hi@kv@year)\space
            \hi@pageordefault{}{%
                \@format@page@macro\hi@kv@page
            }%
        }%
        \the\hi@param@parens
    }%
}
\hi@newcite\defengstat{An English statute}{%
    \hi@citetype{#1}\hi@type@statute
    \hi@statcode@setup@idpc{#1}% Set up id. and page numbering
    %\hi@include@page@in@toa{#1}
    \hi@newcite@form{ic}{#1}{%
        \hi@ifset\hi@kv@name{\hi@inline@the\@capnext\hi@kv@name}{}%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@only{\hi@citeguts{\noexpand\@nameuse{ic@#1}}}%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@name@only{%
                    \hi@ifset\hi@kv@name{\@capnext\hi@kv@name, \hi@kv@year, }{}%
                }%
                \hi@ifset\hi@kv@regnal{\@capnext\hi@kv@regnal, }{}%
                \@capnext c. \hi@kv@number
                \hi@pageordefault{, }{%
                    % Don't put the page here if \hi@kv@rep is set because the
                    % page is assumed to refer to the code book, not a statutory
                    % section.
                    \hi@ifset\hi@kv@rep{}{%
                        \hi@ifset\hi@kv@page{%
                            , \@format@page@macro\hi@kv@page
                        }{}%
                    }%
                }%
                \hi@ifset\hi@kv@rep{%
                    ,\space
                    \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                    \noexpand\hi@fn@statute{\hi@kv@rep}\space
                    \@format@page@macro\hi@kv@page
                }{}%
            }%
            \hi@ifset\hi@kv@name{%
                \noexpand\if@hi@name\noexpand\else
                    \hi@ifset\hi@kv@year{%
                        \hi@parens@add\hi@paren@date{\hi@kv@year}%
                    }{}%
                \noexpand\fi
            }{%
                \hi@ifset\hi@kv@year{\hi@addparen\hi@paren@date{\hi@kv@year}}{}%
            }%
            \the\hi@param@parens
        }%
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@inline@only{\hi@citeguts{\noexpand\@nameuse{ic@#1}}}%
        \hi@inline@never{%
            \hi@citeguts{%
                \hi@name@only{%
                    \hi@ifset\hi@kv@name{\@capnext\hi@kv@name}{}%
                }%
                \hi@pageordefault{\hi@name@only{ \hi@page@atorsect}}{}%
            }%
        }%
    }%
}
\hi@newcite\defengcommand{A command paper in England}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \hi@citeguts{%
            \noexpand\hi@fn@bookauthor{\hi@kv@author},
            \noexpand\hi@fn@booktitle{\hi@kv@name},
            \hi@kv@year,
            \hi@kv@number
            \hi@maybepage{, \hi@page@atorsect}%
        }%
        \the\hi@param@parens
    }%
}
\hi@newcite\defforeignconst{A foreign constitution}{%
    \hi@citetype{#1}\hi@type@const
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@fn@const{\hi@kv@name}%
            \hi@ifset\hi@kv@page{ \hi@kv@page}{}%
            \hi@maybepage{ }%
        }%
        \hi@invis@inline
        \the\hi@param@parens
    }%
}
\hi@newcite\deftreaty{A treaty or international agreement}{%
    \hi@citetype{#1}\hi@type@treaty
    \hi@ifset\hi@kv@inline{%
        \hi@replacethe\hi@kv@inline{\def\hi@kv@inline}{}%
        \expandafter\KV@hi@hereinafter\expandafter{\hi@kv@inline}%
    }{%
        \@expand{\hi@supra@form{#1}}{\expandafter\hi@inline@the\hi@kv@name}i%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@only{%
            \hi@citeguts{%
                \hi@inline@the\hi@kv@name
            }%
        }%
        \hi@inline@never{%
            \hi@citeguts{%
                % The treaty name can only be suppressed in a star citation if a
                % country is given.
                \hi@ifset\hi@kv@countries{%
                    \hi@name@only{\hi@kv@name, }\hi@kv@countries
                }{\hi@kv@name}%
                \hi@maybepage{, },\space
                \hi@italdateprefix{\hi@kv@year}%
                \hi@ifset\hi@kv@rep{%
                    ,\space
                    \hi@ifset\hi@kv@vol{\hi@kv@vol\space}{}%
                    \noexpand\hi@fn@statute{\hi@kv@rep}%
                    \hi@ifset\hi@kv@page{%
                        \space\@format@page@macro\hi@kv@page
                    }{}%
                }{}%
            }%
            \the\hi@param@parens
        }%
    }%
}
\hi@newcite\defeucase{A European Union case}{%
    \hi@citetype{#1}\hi@type@case
    \hi@case@setparties{#1}%
    \hi@ifset\hi@kv@inline{%
        \@expand{\hi@short@register{#1}}\hi@kv@inline i{y}%
    }{}%
    \hi@case@proc
    \@expand{\hi@short@register{#1}}\hi@kv@inline i{n}%
    \hi@newcite@form{fc}{#1}{%
        \hi@inline@only{\hi@citeguts{\hi@kv@name}}%
        \hi@inline@never{%
            \hi@citeguts{%
                Case \hi@kv@docket
                \hi@name@only{\hi@font@comma \hi@kv@aname}%
                \hi@ifset\hi@kv@rep{%
                    \hi@name@comma
                    \hi@kv@vol\space \hi@kv@rep\space \hi@kv@page
                    \hi@maybepage{, }%
                }{\hi@maybepage{\hi@name@comma}}%
            }%
            \the\hi@param@parens
            \hi@case@dateparen{%
                \hi@parens@add{\hi@paren@date}{%
                    \hi@param@optspc\hi@kv@court\hi@kv@year
                }%
            }y%
        }%
    }
    \hi@newcite@form{lc}{#1}{%
        \hi@citeguts{%
            \hi@name@only{\@capnext\hi@kv@lname\unkern,\hfill\break}%
            Case \hi@kv@docket
            \hi@ifset\hi@kv@rep{%
                , \hi@kv@vol\space\hi@kv@rep\space\hi@kv@page% Reporter and page
            }{}%
        }%
        \hi@case@dateparen{%
            \hi@parens@add{\hi@paren@date}{%
                \hi@param@optspc\hi@kv@court\hi@kv@year
            }%
        }y%
        \the\hi@param@parens
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@short@use{#1}%
        \hi@citeguts{%
            \hi@inline@only{\hi@citeguts{\hi@kv@inline}}%
            \hi@inline@never{%
                \hi@name@only{%
                    \hi@kv@ainline
                    \hi@font@comma
                }%
                \hi@ifset\hi@kv@rep{%
                    \hi@kv@vol\space\hi@kv@rep\space %
                    \hi@ifpage{\hi@maybepage{\hi@page@atorsect}}{\hi@kv@page}%
                }{%
                    \hi@ifset{\hi@kv@dbid}{\hi@kv@dbid}{\hi@kv@docket}%
                    \hi@maybepage{, \hi@kv@slip\hi@page@atorsect}%
                }%
            }%
        }%
        \hi@case@dateparen{}n%
    }%
}
\hi@newcite\defunresolution{A U.N. resolution}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{U.N.}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@name{%
                \hi@inline@the\@capnext\hi@kv@name\hi@font@comma
            }{}%
            \hi@kv@number
            \hi@maybepage{, \hi@page@atorsect}%
            , \hi@kv@type\space Doc. \hi@kv@intdoc
        }%
        \the\hi@param@parens
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
    }%
    \@expand{\hi@supra@form{#1}}\hi@kv@number i%
}
\hi@newcite\defintdoc{A U.N. or international document}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{U.N.}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \hi@namelist@instpart\hi@kv@author{\@iden},\space
            }{}%
            \noexpand\hi@fn@arttitle{\hi@kv@name}%
            \hi@maybepage{\hi@font@comma}%
            \hi@font@comma
            \hi@kv@type\space Doc. \hi@kv@intdoc
        }%
        \the\hi@param@parens
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \hi@ifset\hi@kv@author{%
            \hi@namelist@personpart\hi@kv@author{\hi@intdoc@personauth}%
        }{}%
    }%
    \protected@edef\reserved@a{\hi@kv@type\space Doc. \hi@kv@intdoc}%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\def\hi@intdoc@personauth#1{%
    \hi@parens@add{\hi@paren@preparedby}{\noexpand\hi@fn@sig{prepared by} #1}%
}
\hi@newcite\deffrcase{A French case}{%
    \hi@citetype{#1}\hi@type@case
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@court\space
            decision no.\ \hi@kv@number,
            \hi@kv@year,
            \hi@kv@rep\space\hi@kv@page
            \hi@maybepage{, }%
        }%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{\hi@kv@court\space decision no.\ \hi@kv@number}%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\deffrstat{A French statute}{%
    \hi@citetype{#1}\hi@type@statute
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            Law No. \hi@kv@number\space
            of \hi@kv@year,
            \hi@kv@rep,
            \hi@kv@pubyear, % This parameter does not exist; needs to be defined
            p. \hi@kv@page
            \hi@maybepage{, }%
        }%
        \the\hi@param@parens
    }%
}
%%
%% \iffalse filename: specrefs.dtx \fi
\hi@newcite\defcjs{Corpus Juris Secondum}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@vol\space
            C.J.S.
            \hi@fn@arttitle{\hi@kv@name}%
            \hi@maybepage{ }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }
    \protected@edef\reserved@a{%
        \hi@kv@vol\space C.J.S. \hi@fn@arttitle{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defrfc{An IETF Request for Comments}{%
    \hi@citetype{#1}\hi@type@other
    \expandafter\hi@book@titlethe\expandafter{\hi@kv@name}%
    \protected@edef\reserved@a{%
        https://www.rfc-editor.org/rfc\hi@kv@number.txt%
    }
    \@expand{\hi@defkey@url{}}\reserved@a i\@empty
    \hi@newcite@form{ic}{#1}{%
        RFC \hi@kv@number
    }%
    \protected@edef\reserved@a{%
        RFC \hi@kv@number
    }
    \@expand{\hi@supra@form{#1}}\reserved@a i%
    %
    % Full cite is done last because \hi@kv@number is modified by
    % \hi@book@pubparen
    %
    \protected@edef\hi@kv@number{%
        Internet Engineering Task Force, RFC \hi@kv@number
    }%
    \hi@book@pubparen
    \hi@newcite@form{fc}{#1}{%
        \hi@ifset\hi@kv@author{%
            \noexpand\@gobble{\hi@kv@authln}%
        }{}% For sorting purposes
        \noexpand\if@hi@inline
            \expandafter\noexpand\csname ic@#1\endcsname
        \noexpand\else
            \hi@citeguts{%
                \hi@ifset\hi@kv@author{%
                    \hi@fn@bookauthor{\hi@kv@author}, % space
                }{}%
                \hi@fn@booktitle{\hi@kv@name}%
                \hi@maybepage{\hi@page@space\hi@kv@name}%
            }%
            \hi@parens@add\hi@paren@date{%
                \hi@book@paren
                \hi@kv@year
            }%
            \the\hi@param@parens
        \noexpand\fi
    }%
}
%%
%% \iffalse filename: otherrefs.dtx \fi
%%
\hi@newcite\defletter{A letter or memorandum}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Letter}}
    \@expand{\find@in{, }}{\hi@kv@author}i{%
        \def\reserved@a{, }\@gobbletwo
    }{\def\reserved@a{ }}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \@capnext\hi@kv@type
            \hi@ifset\hi@kv@author{ from \hi@kv@author}{}%
            \hi@ifset\hi@kv@to{\reserved@a to \hi@kv@to}{}%
            \hi@ifset\hi@kv@name{, \noexpand\hi@fn@arttitle{\hi@kv@name}}{}%
            \hi@maybepage{ }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \hi@newcite@form{lc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{%
                \hi@toa@dupauthor{}{\hi@kv@author@sortable}\hi@kv@type
            }{%
                \@capnext\hi@kv@type
            }%
            \hi@ifset\hi@kv@to{ to \hi@kv@to}{}%
            \hi@ifset\hi@kv@name{, \noexpand\hi@fn@arttitle{\hi@kv@name}}{}%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \@expand{\hi@supra@form{#1}}\hi@kv@authln i%
}
\hi@newcite\defpressrelease{A press release}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Press Release}}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@type,
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \hi@ifset\hi@kv@name{\noexpand\hi@fn@arttitle{\hi@kv@name}}{}% Title
            \hi@maybepage{ }%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{%
            \noexpand\hi@fn@arttitle{\hi@kv@name}%
        }%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defspeech{A speech, address, or presentation}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Address}}
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@ifset\hi@kv@author{\hi@kv@author@sortable, }{}%
            \hi@kv@type
            \hi@ifset\hi@kv@place{\space at the \hi@kv@place}{}%
            \hi@ifset\hi@kv@name{: \hi@kv@name}{}%
            \hi@maybepage{\hi@page@space\hi@kv@name}%
        }%
        \the\hi@param@parens
        \hi@parens@add\hi@paren@date{\hi@kv@year}%
    }%
    \protected@edef\reserved@a{%
        \hi@ifset\hi@kv@authln{\@capnext\hi@kv@authln}{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\deffilm{A film (movie/motion picture)}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\hi@fn@booktitle{\hi@kv@name}%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@publisher\space\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@booktitle{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\deftvshow{A television show}{%
    \hi@citetype{#1}\hi@type@other
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@fn@arttitle{\hi@kv@name}%
        }%
        \the\hi@param@parens
        \hi@parens@add{\hi@paren@date}{%
            \hi@param@optspc\hi@kv@publisher\hi@kv@year
        }%
    }%
    \protected@edef\reserved@a{%
        \noexpand\hi@fn@arttitle{\hi@kv@name}%
    }%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
\hi@newcite\defopinion{An ethics or other opinion}{%
    \hi@citetype{#1}\hi@type@other
    \hi@ifset\hi@kv@type{}{\def\hi@kv@type{Formal Opinion}}%
    \@expand\hi@abbrev@cdoc\hi@kv@type i{\def\hi@kv@type}%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \hi@kv@author,
            \hi@kv@type\space \hi@kv@number
            \hi@maybepage{, \hi@page@atorsect}%
        }%
        \hi@parens@add{\hi@paren@date}{\hi@kv@year}%
        \the\hi@param@parens
    }%
    \protected@edef\reserved@a{\hi@kv@type\space \hi@kv@number}%
    \@expand{\hi@supra@form{#1}}\reserved@a i%
}
%%
%% \iffalse filename: nondocrefs.dtx \fi
%%
\hi@newcite\defabbrev{An abbreviation for a name}{%
    \hi@ifset\hi@kv@name{%
        \hi@replacethe\hi@kv@name{\def\hi@kv@name}{}%
        \@expandarg\hi@abbrev@name{\hi@kv@name}{\def\hi@kv@aname}%
    }{%
        \PackageError\hi@pkgname{%
            For abbreviation #1, no name given%
        }{You must provide the name}%
    }%
    \hi@ifset\hi@kv@inline{%
        \hi@replacethe\hi@kv@inline{\def\hi@kv@inline}{}%
        \@expand{\hi@short@register{#1}}\hi@kv@inline i{y}%
        %
        % Unless the user has explicitly rejected it, tack on a parenthetical of
        % the short name to the full citation form.
        %
    }{%
        \PackageError\hi@pkgname{%
            For abbreviation #1, no inline given%
        }{You must provide the inline form}%
    }%
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            \noexpand\if@hi@inline
                \noexpand\@capnext\hi@kv@name
            \noexpand\else
                \noexpand\@capnext\hi@kv@aname
            \noexpand\fi
            \hi@ifset\hi@kv@noinlineparen{}{%
                \hi@short@maybeshow{#1}{\space
                    {\noexpand\@hi@adjectivetrue(``\hi@kv@inline'')}%
                    \noexpand\@%
                }%
            }%
        }%
        \hi@invis@inline
    }%
    \hi@newcite@form{sc}{#1}{%
        \hi@citeguts{\noexpand\@capnext\hi@kv@inline}%
        \noexpand\@%
        \hi@short@use{#1}%
        \hi@invis@inline
    }%
}
\hi@newcite\defalias{An alias for a citation reference}{%
    \hi@ifset\hi@kv@citation{}{%
        \hi@ifset\hi@kv@rep{%
            \let\hi@kv@citation\hi@kv@rep
        }{%
            \PackageError\hi@pkgname{%
                In defining alias #1, you must provide citation or rep%
            }{Add the requested parameter}%
        }%
    }%
    %
    % The full citation form should never be used
    %
    \hi@newcite@form{fc}{#1}{%
        \noexpand\PackageError\noexpand\hi@pkgname{%
            Reference #1 is an alias and should never be cited%
        }{Something is wrong with the package}%
    }%
    %
    % The modification macro should set the volume and reference name
    %
    \hi@newcite@form{mc}{#1}{%
        \def\noexpand\@this@case{\hi@kv@citation}%
        \hi@ifset\hi@kv@vol{%
            \noexpand\ifx\noexpand\@this@vol\relax
                \def\noexpand\@this@vol{\hi@kv@vol}%
            \noexpand\fi
        }{}%
        \hi@ifset\hi@kv@page{%
            \noexpand\ifx\noexpand\@this@page\relax
                \def\noexpand\@this@orig@page{\expandonce\hi@kv@page}%
                \def\@this@page{\@format@page@macro\hi@kv@page}%
            \noexpand\fi
        }{}%
    }%
    %
    % The page number macro should combine page numbers and set \@this@orig@page
    % and \@this@page appropriately
    %
    \hi@newcite@form{pc}{#1}##1{%
        \hi@ifset\hi@kv@page{%
            \noexpand\hi@pages@join{\expandonce\hi@kv@page}{##1}%
        }{%
            \noexpand\protected@edef\noexpand\@this@page{%
                \noexpand\@format@pageno{##1}%
            }%
        }%
    }%
}
\newcount\hi@anonselfcitecount
\hi@newcite\defselfcite{A self-citation}{%
    \global\advance\hi@anonselfcitecount\@ne
    \hi@newcite@form{fc}{#1}{%
        \hi@citeguts{%
            [Self-citation \#\the\hi@anonselfcitecount]%
        }%
    }%
}%
\def\fc@verbatim{%
    \hi@citeguts{%
        \@this@page
    }%
}
\def\pc@verbatim#1{%
    \def\@this@page{#1}%
    \if@endswithdot{#1}{\addto@macro\@this@page{\@hi@dottrue}}%
}
\let\idc@verbatim\fc@verbatim
%%
%% \iffalse filename: genparams.dtx \fi
%%
\hi@defparam{accessdate}{URL access date}{%
    \hi@date@parse[last visited]{#1}{\def\reserved@a}%
    \expandafter\hi@param@addparen\expandafter\hi@paren@accessdate
        \expandafter{\reserved@a}%
}
\hi@defparam@noval{bookreview}{Indicator that an article is a book review}{%
    \ifstrempty{#1}{%
        \hi@param@addparen\hi@paren@bookreview{book review}%
    }{%
        \hi@param@addparen\hi@paren@bookreview{reviewing \clause{#1}}%
    }%
}
\hi@defparam{citetype}{Table of Authorities category for this citation}{%
    \@ifundefined{hi@type@#1}{%
        \PackageError\hi@pkgname{Invalid Table of Authorities section #1}{%
            Please enter a valid section identifier.
        }%
    }{%
        \@expand{\hi@citetype{\@this@case}}{\csname hi@type@#1\endcsname}{i}%
    }%
}
\hi@param@alias{comment}{paren}
\hi@defparam{country}{Country for citation}{%
    \@ifundefined{hi@ctry@#1}{\hi@param@addparen\hi@paren@country{#1}}{%
        \@expand{\hi@param@addparen\hi@paren@country}{%
            \csname hi@ctry@#1\endcsname
        }{ii}%
    }%
}
\hi@newparam{defaultopt}{The default optional parameter}
\hi@defparam{hereinafter}{Text to use for hereinafter citation form}{%
    \expandafter\hi@short@register\expandafter{\@this@case}{#1}{y}%
    \hi@supra@form\@this@case{#1}%
    \hi@param@addparen\hi@paren@hia{#1}%
}
\hi@defparam{hyphenate}{Set hyphenation for a word}{%
    \hyphenation{#1}%
}
\hi@param@alias{hyphenation}{hyphenate}
\hi@newparam{kind}{Type of reference}
\hi@newparam@noval{noetal}{No et al. with 3 or more authors}
\hi@defparam@noval{notoa}{Do not include in the table of authorities}{%
    \hi@citetype\@this@case\@empty
}
\hi@newparam{opturl}{Optional URL}
\hi@defparam{origyear}{Year of original publication of the reference}{%
    \hi@date@parse{#1}{\hi@param@addparen\hi@paren@origdate}%
}
\hi@param@alias{origdate}{origyear}
\hi@defparam{parallel}{Parallel citation}{%
    \find@in{: }{#1}{\hi@defkey@parallel}{%
        \PackageError\hi@pkgname{%
            Parameter `parallel' must include a page segment\MessageBreak
            key name, followed by a colon%
        }{It should look like `key: 123 Rep. 456'}%
    }%
}
\def\hi@defkey@parallel#1#2{%
    \hi@fpg@defsegment{#1}%
    \hi@param@addparen\hi@paren@parallel{%
        #2%
        \@test\ifx\@this@page\relax\fi{}{%
            \@expandarg\hi@fpg@segment{\@this@page}{#1}{, }{%
                \PackageWarning\hi@pkgname{%
                    In citation to \@this@case, parallel cite\MessageBreak
                    with key `#1' not given in page number%
                }\textbf{??}%
            }%
        }%
    }%
}
\hi@defparam{paren}{A parenthetical to be included with citation}{%
    \find@try\find@in{%
        { in: }{\hi@defkey@cmt{ in}}%
        { by: }{\hi@defkey@cmt{ by}}%
        { at: }{\hi@defkey@cmt{ at}}%
    }{#1}{%
        \hi@param@addparen\hi@paren@doc{#1}%
    }%
}
\make@find@in{ in: }
\make@find@in{ by: }
\make@find@in{ at: }
\def\hi@defkey@cmt#1#2#3{%
    \hi@param@addparen\hi@paren@comment{\hi@fn@comment{#2#1} \clause{#3}}%
}
\hi@defparam{parse}{Apply automatic citation parser}{\hi@cparse{#1}}
\hi@defparam{reprinted}{Reprinted in parenthetical}{%
    \hi@anonref{#1}{\hi@reprinted}%
}
\def\hi@reprinted#1{%
    %
    % |\hi@kv@reprinted| is not used here, but is needed by hitobib.sty in order
    % to know what to place in the Bibtex file.
    %
    \def\hi@kv@reprinted{#1}%
    %
    % Add the parenthetical.
    %
    \hi@param@addparen\hi@paren@reprint{%
        \hi@fn@comment{reprinted in} \clause{#1}%
    }%
}
\hi@defparam{supplement}{Year/date of a supplement to the reference}{%
    \hi@date@parse[Supp.]{#1}{\def\hi@kv@supplement}%
    \hi@param@addhook{%
        \hi@ifset\hi@kv@year{%
            \addto@macro\hi@kv@year{ \& }%
            \expandafter\addto@macro\expandafter\hi@kv@year\expandafter{%
                \hi@kv@supplement
            }%
        }{%
            \let\hi@kv@year\hi@kv@supplement
        }%
    }%
}
\hi@defparam@noval{toapage}{Include page numbers in Table of Authorities}{%
    \hi@include@page@in@toa{\@this@case}%
    \def\hi@kv@toapage{}%
}
\hi@defparam{url}{URL for reference}{%
    \find@try\find@start{%
        {available at }{\hi@urlprefixwarn\KV@hi@url}%
        {at }{\hi@urlprefixwarn\KV@hi@url}%
    }{#1}{%
        \hi@parseurl{#1}\hi@kv@url
        \@expandarg\hi@defkey@url{\hi@kv@url}%
    }%
}
\make@find@start{available at }
\make@find@start{at }
\def\hi@defkey@url#1{%
    \hi@param@addparen\hi@paren@url{\hi@showurl{#1}}%
}
\def\hi@urlprefixwarn{%
    \PackageWarning\hi@pkgname{URL started with `at' or `available at'}%
}
%%
%% \iffalse filename: commparams.dtx \fi
%%
\hi@newparam{authln}{Last name of the first author, for short citations}
\hi@defparam{author}{Author of the reference}{%
    \hi@nameproc@person{#1}{\hi@namelist@addtwo\hi@kv@author\hi@kv@authln}%
}
\hi@defparam{cite}{Volume-reporter-page citation}{%
    \hi@cp@cite{#1}\KV@hi@vol\KV@hi@rep\KV@hi@page\KV@hi@year
}
\hi@param@alias{date}{year}
\hi@newparam{inline}{Short name for the reference}
\hi@defparam{instauth}{Institutional author}{%
    \hi@nameproc@inst{#1}{\hi@namelist@addinst}{\hi@kv@author}%
    \hi@nameproc@inst{#1}{\hi@namelist@addinst@ln}{\hi@kv@authln}%
}
\hi@param@alias{jcite}{cite}
\hi@param@alias{journal}{rep}
\hi@param@alias{journaltitle}{rep}
\hi@newparam{name}{Name of the reference}
\hi@newparam{number}{Number (for constitutional amendments, session laws)}
\hi@newparam{page}{Page number}
\hi@param@alias{pages}{page}
\hi@newparam{rep}{Reporter or journal name}%
\hi@param@alias{serial}{number}
\hi@param@alias{series}{number}
\hi@param@alias{short}{inline}
\hi@param@alias{shorttitle}{inline}
\hi@param@alias{src}{rep}
\hi@param@alias{subdiv}{page}
\hi@param@alias{title}{name}
\hi@newparam{type}{Type of work}
\hi@defparam{vol}{Volume number}{%
    \find@in{:}{#1}{\@twodef\hi@kv@vol\hi@kv@issue}{\def\hi@kv@vol{#1}}
}
\make@find@in{:}
\hi@param@alias{volume}{vol}
\hi@defparam{year}{Year/date of the case, article, regulation}{%
    \hi@date@parse{#1}{\def\hi@kv@year}%
}
%%
%% \iffalse filename: caseparams.dtx \fi
%%
\hi@defparam{agency}{Administrative agency name}{%
    \hi@abbrev@name{#1}{\KV@hi@court}%
}
\hi@newparam{court}{Court deciding the case}
\hi@newparam{d}{Second party name in the case}
\hi@newparam{dbid}{Database identifier for an online case}
\hi@defparam{docket}{Docket number of the case}{%
    \hi@defkey@docket#1\@stop{#1}%
}
\def\hi@defkey@docket#1#2\@stop#3{%
    \@ifdigit{#1}{\def\hi@kv@docket{No.~#3}}{\def\hi@kv@docket{#3}}%
}
\hi@defparam@noval{enbanc}{En banc case parenthetical}{%
    \hi@param@addparen\hi@paren@opinion{en banc}%
}
\hi@newparam@noval{inlinedefendant}{Don't use the first party as main party}
\hi@defparam@noval{mem}{Memorandum opinion parenthetical}{%
    \hi@param@addparen\hi@paren@opinion{mem.}%
}
\hi@newparam{p}{First party name in the case}
\hi@defparam{parties}{Named parties to a case, separated by `` v. ''}{%
    \find@in{ v. }{#1}{\@tworun\KV@hi@p\KV@hi@d}{\KV@hi@name{#1}}%
}
\hi@defparam@noval{percuriam}{Per curiam opinion}{%
    \hi@param@addparen\hi@paren@opinion{per curiam}%
}
\hi@newparam{prior}{Prior history for a case}
\hi@defparam@noval{revparties}{Parties to this case are reverse of named case}{%
    \@ifundefined{case@#1@p}{}{%
        \@expand\KV@hi@d{\csname case@#1@p\endcsname}{ii}%
    }%
    \@ifundefined{case@#1@d}{}{%
        \@expand\KV@hi@p{\csname case@#1@d\endcsname}{ii}%
    }%
    \@ifundefined{case@#1@name}{}{%
        \@expand\KV@hi@name{\csname case@#1@name\endcsname}{ii}%
    }%
}
\hi@defparam@noval{sameparties}{Parties to this case are same as named case}{%
    \@ifundefined{case@#1@p}{}{%
        \@expand\KV@hi@p{\csname case@#1@p\endcsname}{ii}%
    }%
    \@ifundefined{case@#1@d}{}{%
        \@expand\KV@hi@d{\csname case@#1@d\endcsname}{ii}%
    }%
    \@ifundefined{case@#1@name}{}{%
        \@expand\KV@hi@name{\csname case@#1@name\endcsname}{ii}%
    }%
}
\hi@newparam@noval{slip}{Slip opinion or law}
\hi@param@alias{slipop}{slip}
\hi@newparam{subsequent}{Subsequent history for a case}
%%
%% \iffalse filename: legparams.dtx \fi
%%
\hi@param@alias{bill}{number}
\hi@defparam{chapter}{Session law chapter}{%
    \KV@hi@sesslawid{ch.}%
    \def\hi@kv@number{#1}%
}
\hi@defparam{codified}{Citation for codification of law or regulation}{%
    \hi@defkey@codified{codified at}{#1}%
}
\def\hi@defkey@codified#1#2{%
    \begingroup
        \hi@undefine\hi@kv@year
        \KV@hi@cite{#2}%
        \edef\reserved@a{%
            #1
            \expandonce\hi@kv@vol \space
            \expandonce\hi@kv@rep \space
            \expandafter\@format@pageno\expandafter{\hi@kv@page}%
            \hi@ifset\hi@kv@year{ (\expandonce\hi@kv@year)}{}%
        }%
        \expandafter\hi@defkey@codified@\expandafter{\reserved@a}%
}
\def\hi@defkey@codified@#1{%
    \endgroup
    \def\hi@kv@codified{#1}%
}
\hi@defparam{codifiedamended}{Citation for codification of law or regulation}{%
    \hi@defkey@codified{codified as amended at}{#1}%
}
\hi@defparam{committee}{House or Senate committee}{%
    \hi@abbrev@leg{#1}{\def\hi@kv@committee}%
}
\hi@newparam{congress}{Congressional session number}
\hi@newparam{origsect}{Original section number of a statute in a code}
\hi@param@alias{publiclaw}{number}
\hi@param@alias{publno}{number}
\hi@param@alias{sesslawid}{type}
\hi@newparam{regnal}{Regnal citation for English pre-1963 statutes}
\hi@newparam{status}{Status of bill}
%%
%% \iffalse filename: bookparams.dtx \fi
%%
\hi@defparam{edition}{Edition number of book}{%
    \protected@edef\reserved@a{\ifnum\m@ne<0#1 \fi}%
    \ifx\reserved@a\@empty
        \edef\hi@kv@edition{#1\hi@numtoord{#1} ed.}%
    \else
        \find@in{ }{#1}{%
            \def\hi@kv@edition{#1}\@gobbletwo
        }{%
            \def\hi@kv@edition{#1 ed.}%
        }%
    \fi
}
\hi@defparam{editor}{Editor(s) of book}{%
    \hi@nameproc@person{#1}{\hi@namelist@addtwo\hi@kv@editor\relax}%
}
\hi@newparam{edtype}{Editor type (default ed.)}
\hi@newparam@noval{forthcoming}{Journal article is forthcoming}
\hi@defparam{in}{Reference name of a citation that the current item is in}{%
    \hi@anonref{#1}{\def\hi@kv@in}%
}
\hi@defparam{insted}{Institutional editor}{%
    \hi@nameproc@inst{#1}{\hi@namelist@addinst}{\hi@kv@editor}%
}
\hi@newparam{issue}{Issue number of journal}
\hi@param@alias{issuer}{publisher}
\hi@newparam@noval{noabbrevjrn}{Don't abbreviate the journal name}
\hi@defparam{publisher}{Publisher of book}{%
    \hi@abbrev@name{#1}{\def\hi@kv@publisher}%
}
\hi@newparam@noval{singleauthor}{All works in a collection are by one author}
\hi@newparam@noval{usetitle}{Use title rather than author in short cites}
\hi@newparam@noval{useissue}{Include issue number in journal citations}
%%
%% \iffalse filename: refparams.dtx \fi
%%
\hi@param@alias{broadcaster}{instauth}
\hi@defparam{citation}{Citation to another reference}{%
    \hi@anonref{#1}{\def\hi@kv@citation}%
}
\hi@newparam{commenter}{Names of parties submitting agency comments}
\hi@defparam{countries}{Countries to a treaty}{%
    \hi@abbrev@name{#1}{\def\hi@kv@countries}%
}
\hi@newparam@noval{inlineparen}{Always include a parenthetical for inline form}
\hi@defparam{instto}{Institutional recipient of letter, memorandum, etc.}{%
    \hi@nameproc@inst{#1}{\hi@namelist@addinst}{\hi@kv@to}%
}
\hi@newparam{intdoc}{Document number for international documents}
\hi@param@alias{issuedate}{issueyear}
\hi@defparam{issueyear}{Date a patent was issued}{%
    \hi@date@parse[issued]{#1}{\def\hi@kv@year}%
}
\hi@newparam@noval{noinlineparen}{Never include a parenthetical for inline form}
\hi@newparam@noval{noshorttitle}{Do not include title for short cites}
\hi@newparam{onfile}{Where the document is on file}
\hi@newparam{place}{Place (for speeches, constitutions, statutes)}
\hi@param@alias{producer}{instauth}
\hi@param@alias{sponsor}{publisher}
\hi@param@alias{state}{place}
\hi@defparam{struct}{Structure for data of multivolume works}{%
    \global\@namedef{hi@struct@set@\@this@case}{#1}%
    \expandafter\def\expandafter\hi@kv@struct\expandafter{%
        \csname hi@struct@set@\@this@case\endcsname
    }%
}
\hi@defparam{to}{Recipient of a letter}{%
    \hi@nameproc@person{#1}{\hi@namelist@addtwo\hi@kv@to\relax}%
}
\def\hi@kv@author@sortable{%
    \noexpand\@gobble{\hi@kv@authln}\@capnext\hi@kv@author
}
%%
%% \iffalse filename: conclusion.dtx \fi
%%
\ExecuteOptions{memo,fullurl,somenotename}
\ProcessOptions \relax
\endinput
%%
%% End of file `hicite.sty'.
